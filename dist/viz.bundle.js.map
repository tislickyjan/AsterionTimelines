{"version":3,"file":"viz.bundle.js","mappings":";qBAAwEA,EAAOC,QAAqS,WAAY,SAASC,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAmE,GAAGE,EAAE,OAAOA,EAAEF,GAAE,GAAI,IAAIG,EAAE,IAAIC,MAAM,uBAAuBJ,EAAE,KAAK,MAAMG,EAAEE,KAAK,mBAAmBF,CAAC,CAAC,IAAIG,EAAET,EAAEG,GAAG,CAACN,QAAQ,CAAC,GAAGE,EAAEI,GAAG,GAAGO,KAAKD,EAAEZ,SAAQ,SAASC,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,EAAE,GAAEW,EAAEA,EAAEZ,QAAQC,EAAEC,EAAEC,EAAEC,EAAE,CAAC,OAAOD,EAAEG,GAAGN,OAAO,CAAC,IAAI,IAAIQ,OAAE,EAAoCF,EAAE,EAAEA,EAAEF,EAAEU,OAAOR,IAAID,EAAED,EAAEE,IAAI,OAAOD,CAAC,CAAC,OAAOJ,CAAE,CAAxc,GAA4c,CAAC,EAAE,CAAC,SAASc,EAAQhB,EAAOC,GAG51BA,EAAQgB,QAAUD,EAAQ,iBAC1Bf,EAAQiB,SAAWF,EAAQ,kBAC3Bf,EAAQkB,SAAWH,EAAQ,iBAE3B,EAAE,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,iBAAiB,IAAI,EAAE,CAAC,SAASA,EAAQhB,EAAOC,GAsBxF,SAASkB,EAAST,EAAGU,EAAGC,EAAGC,EAAGnB,EAAGK,GAC7Be,OAAOC,iBAAiBC,KAAM,CAC1B,EAAK,CACDC,WAAcC,IAANjB,EAAmBA,EAAI,EAC/BkB,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,WAAcC,IAANP,EAAmBA,EAAI,EAC/BQ,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,WAAcC,IAANN,EAAmBA,EAAI,EAC/BO,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,WAAcC,IAANL,EAAmBA,EAAI,EAC/BM,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,WAAcC,IAANxB,EAAmBA,EAAI,EAC/ByB,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,WAAcC,IAANnB,EAAmBA,EAAI,EAC/BoB,UAAU,EACVC,YAAY,EACZC,cAAc,IAG1B,CAQAX,EAASY,SAAW,IAAIZ,EAAS,EAAG,EAAG,EAAG,EAAG,EAAG,GAChDA,EAASY,SAASC,WAAa,WAAc,OAAO,CAAM,EAQ1Db,EAASc,UAAUC,SAAW,SAAUC,GACpC,OAAIV,KAAKO,aACEG,EAGPA,EAAKH,aACEP,KAGJ,IAAIA,KAAKW,YACZX,KAAKf,EAAIyB,EAAKzB,EAAIe,KAAKJ,EAAIc,EAAKf,EAChCK,KAAKL,EAAIe,EAAKzB,EAAIe,KAAKH,EAAIa,EAAKf,EAChCK,KAAKf,EAAIyB,EAAKd,EAAII,KAAKJ,EAAIc,EAAKb,EAChCG,KAAKL,EAAIe,EAAKd,EAAII,KAAKH,EAAIa,EAAKb,EAChCG,KAAKf,EAAIyB,EAAKhC,EAAIsB,KAAKJ,EAAIc,EAAK3B,EAAIiB,KAAKtB,EACzCsB,KAAKL,EAAIe,EAAKhC,EAAIsB,KAAKH,EAAIa,EAAK3B,EAAIiB,KAAKjB,EAEjD,EAOAW,EAASc,UAAUI,QAAU,WACzB,GAAIZ,KAAKO,aACL,OAAOP,KAGX,IAAIa,EAAOb,KAAKf,EAAIe,KAAKH,EAAIG,KAAKL,EAAIK,KAAKJ,EAE3C,GAAc,IAATiB,EACD,KAAK,2BAGT,IAAIC,EAAO,EAAMD,EACbE,EAAOf,KAAKjB,EAAIiB,KAAKJ,EAAII,KAAKtB,EAAIsB,KAAKH,EACvCmB,EAAOhB,KAAKtB,EAAIsB,KAAKL,EAAIK,KAAKjB,EAAIiB,KAAKf,EAE3C,OAAO,IAAIe,KAAKW,YACZX,KAAKH,EAAIiB,GACTd,KAAKL,EAAImB,GACTd,KAAKJ,EAAIkB,EACTd,KAAKf,EAAI6B,EACPC,EAAOD,EACPE,EAAOF,EAEjB,EASApB,EAASc,UAAUS,UAAY,SAASC,EAAIC,GACxC,OAAO,IAAInB,KAAKW,YACZX,KAAKf,EACLe,KAAKL,EACLK,KAAKJ,EACLI,KAAKH,EACLG,KAAKf,EAAIiC,EAAKlB,KAAKJ,EAAIuB,EAAKnB,KAAKtB,EACjCsB,KAAKL,EAAIuB,EAAKlB,KAAKH,EAAIsB,EAAKnB,KAAKjB,EAEzC,EAQAW,EAASc,UAAUY,MAAQ,SAASA,GAChC,OAAO,IAAIpB,KAAKW,YACZX,KAAKf,EAAImC,EACTpB,KAAKL,EAAIyB,EACTpB,KAAKJ,EAAIwB,EACTpB,KAAKH,EAAIuB,EACTpB,KAAKtB,EACLsB,KAAKjB,EAEb,EASAW,EAASc,UAAUa,QAAU,SAASD,EAAOE,GACzC,IAAIC,EAAKD,EAAOE,EAAIJ,EAAQE,EAAOE,EAC/BC,EAAKH,EAAOI,EAAIN,EAAQE,EAAOI,EAEnC,OAAO,IAAI1B,KAAKW,YACZX,KAAKf,EAAImC,EACTpB,KAAKL,EAAIyB,EACTpB,KAAKJ,EAAIwB,EACTpB,KAAKH,EAAIuB,EACTpB,KAAKf,EAAIsC,EAAKvB,KAAKJ,EAAI6B,EAAKzB,KAAKtB,EACjCsB,KAAKL,EAAI4B,EAAKvB,KAAKH,EAAI4B,EAAKzB,KAAKjB,EAEzC,EASAW,EAASc,UAAUmB,gBAAkB,SAASC,EAAQC,GAClD,OAAO,IAAI7B,KAAKW,YACZX,KAAKf,EAAI2C,EACT5B,KAAKL,EAAIiC,EACT5B,KAAKJ,EAAIiC,EACT7B,KAAKH,EAAIgC,EACT7B,KAAKtB,EACLsB,KAAKjB,EAEb,EAUAW,EAASc,UAAUsB,kBAAoB,SAASF,EAAQC,EAAQP,GAC5D,IAAIC,EAAKD,EAAOE,EAAII,EAASN,EAAOE,EAChCC,EAAKH,EAAOI,EAAIG,EAASP,EAAOI,EAEpC,OAAO,IAAI1B,KAAKW,YACZX,KAAKf,EAAI2C,EACT5B,KAAKL,EAAIiC,EACT5B,KAAKJ,EAAIiC,EACT7B,KAAKH,EAAIgC,EACT7B,KAAKf,EAAIsC,EAAKvB,KAAKJ,EAAI6B,EAAKzB,KAAKtB,EACjCsB,KAAKL,EAAI4B,EAAKvB,KAAKH,EAAI4B,EAAKzB,KAAKjB,EAEzC,EAQAW,EAASc,UAAUuB,OAAS,SAASC,GACjC,IAAIpC,EAAIqC,KAAKC,IAAIF,GACbG,EAAIF,KAAKG,IAAIJ,GAEjB,OAAO,IAAIhC,KAAKW,YACZX,KAAKf,EAAKW,EAAII,KAAKJ,EAAIuC,EACvBnC,KAAKL,EAAKC,EAAII,KAAKH,EAAIsC,EACvBnC,KAAKf,GAAKkD,EAAInC,KAAKJ,EAAIA,EACvBI,KAAKL,GAAKwC,EAAInC,KAAKH,EAAID,EACvBI,KAAKtB,EACLsB,KAAKjB,EAEb,EASAW,EAASc,UAAU6B,SAAW,SAASL,EAASV,GAC5C,IAAI1B,EAAIqC,KAAKC,IAAIF,GACbG,EAAIF,KAAKG,IAAIJ,GACbM,GAAMhB,EAAOE,EAAIF,EAAOE,EAAI5B,EAAI0B,EAAOI,EAAIS,EAC3CI,GAAMjB,EAAOI,EAAIJ,EAAOI,EAAI9B,EAAI0B,EAAOE,EAAIW,EAE/C,OAAO,IAAInC,KAAKW,YACZX,KAAKf,EAAKW,EAAII,KAAKJ,EAAIuC,EACvBnC,KAAKL,EAAKC,EAAII,KAAKH,EAAIsC,EACvBnC,KAAKf,GAAKkD,EAAInC,KAAKJ,EAAIA,EACvBI,KAAKL,GAAKwC,EAAInC,KAAKH,EAAID,EACvBI,KAAKf,EAAIqD,EAAKtC,KAAKJ,EAAI2C,EAAKvC,KAAKtB,EACjCsB,KAAKL,EAAI2C,EAAKtC,KAAKH,EAAI0C,EAAKvC,KAAKjB,EAEzC,EAQAW,EAASc,UAAUgC,iBAAmB,SAASC,GAC3C,IAAIC,EAAOD,EAAOC,OACd9C,EAAI8C,EAAKlB,EACTW,EAAIO,EAAKhB,EAEb,OAAO,IAAI1B,KAAKW,YACZX,KAAKf,EAAKW,EAAII,KAAKJ,EAAIuC,EACvBnC,KAAKL,EAAKC,EAAII,KAAKH,EAAIsC,EACvBnC,KAAKf,GAAKkD,EAAInC,KAAKJ,EAAIA,EACvBI,KAAKL,GAAKwC,EAAInC,KAAKH,EAAID,EACvBI,KAAKtB,EACLsB,KAAKjB,EAEb,EAOAW,EAASc,UAAUmC,MAAQ,WACvB,OAAO,IAAI3C,KAAKW,aACXX,KAAKf,GACLe,KAAKL,EACLK,KAAKJ,EACLI,KAAKH,EACLG,KAAKtB,EACLsB,KAAKjB,EAEd,EAOAW,EAASc,UAAUoC,MAAQ,WACvB,OAAO,IAAI5C,KAAKW,YACXX,KAAKf,EACLe,KAAKL,GACLK,KAAKJ,GACLI,KAAKH,EACLG,KAAKtB,EACLsB,KAAKjB,EAEd,EAQAW,EAASc,UAAUqC,MAAQ,SAASb,GAChC,IAAIpD,EAAIqD,KAAKa,IAAId,GAEjB,OAAO,IAAIhC,KAAKW,YACZX,KAAKf,EACLe,KAAKL,EACLK,KAAKf,EAAIL,EAAIoB,KAAKJ,EAClBI,KAAKL,EAAIf,EAAIoB,KAAKH,EAClBG,KAAKtB,EACLsB,KAAKjB,EAEb,EAUAW,EAASc,UAAUuC,MAAQ,SAASf,GAChC,IAAIpD,EAAIqD,KAAKa,IAAId,GAEjB,OAAO,IAAIhC,KAAKW,YACZX,KAAKf,EAAIe,KAAKJ,EAAIhB,EAClBoB,KAAKL,EAAIK,KAAKH,EAAIjB,EAClBoB,KAAKJ,EACLI,KAAKH,EACLG,KAAKtB,EACLsB,KAAKjB,EAEb,EASAW,EAASc,UAAUD,WAAa,WAC5B,OACe,IAAXP,KAAKf,GACM,IAAXe,KAAKL,GACM,IAAXK,KAAKJ,GACM,IAAXI,KAAKH,GACM,IAAXG,KAAKtB,GACM,IAAXsB,KAAKjB,CAEb,EAOAW,EAASc,UAAUwC,aAAe,WAC9B,OAAOhD,KAAKf,EAAIe,KAAKH,EAAIG,KAAKL,EAAIK,KAAKJ,GAAM,CACjD,EAOAF,EAASc,UAAUyC,SAAW,WAC1B,MAAO,CACHrB,OAAQK,KAAKiB,KAAKlD,KAAKf,EAAIe,KAAKf,EAAIe,KAAKJ,EAAII,KAAKJ,GAClDiC,OAAQI,KAAKiB,KAAKlD,KAAKL,EAAIK,KAAKL,EAAIK,KAAKH,EAAIG,KAAKH,GAE1D,EAeAH,EAASc,UAAU2C,iBAAmB,WAClC,IAAIC,EAA6B,IAAnBpD,KAAKf,EAAIe,KAAKH,GACxBwD,EAA6B,IAAnBrD,KAAKf,EAAIe,KAAKH,GACxByD,EAA6B,IAAnBtD,KAAKL,EAAIK,KAAKJ,GACxB2D,EAA6B,IAAnBvD,KAAKL,EAAIK,KAAKJ,GAExB4D,EAASvB,KAAKiB,KAAKE,EAAIA,EAAIG,EAAIA,GAC/BE,EAASxB,KAAKiB,KAAKG,EAAIA,EAAIC,EAAIA,GAC/B1B,EAAS4B,EAAIC,EACb5B,EAAS2B,EAAIC,EAEbC,EAASzB,KAAK0B,MAAML,EAAGD,GACvBO,EAAS3B,KAAK0B,MAAMJ,EAAGH,GACvBS,EAAqB,IAAXD,EAAKF,GACfI,EAAqB,IAAXF,EAAKF,GAKnB,MAAO,CACHK,YAAa,IAAI/D,KAAKW,YAAY,EAAG,EAAG,EAAG,EAAGX,KAAKtB,EAAGsB,KAAKjB,GAC3DiF,SAAahE,KAAKW,YAAYL,SAASyB,OAAO+B,GAC9C1C,MAAa,IAAIpB,KAAKW,YAAYiB,EAAQ,EAAG,EAAGC,EAAQ,EAAG,GAC3DoC,UAAajE,KAAKW,YAAYL,SAASyB,OAAO8B,GAEtD,EAQAnE,EAASc,UAAU0D,OAAS,SAASxD,GACjC,OACIV,KAAKf,IAAMyB,EAAKzB,GAChBe,KAAKL,IAAMe,EAAKf,GAChBK,KAAKJ,IAAMc,EAAKd,GAChBI,KAAKH,IAAMa,EAAKb,GAChBG,KAAKtB,IAAMgC,EAAKhC,GAChBsB,KAAKjB,IAAM2B,EAAK3B,CAExB,EAOAW,EAASc,UAAU2D,SAAW,WAC1B,MAAO,UAAY,CAACnE,KAAKf,EAAGe,KAAKL,EAAGK,KAAKJ,EAAGI,KAAKH,EAAGG,KAAKtB,EAAGsB,KAAKjB,GAAGqF,KAAK,KAAO,GACpF,OAEsB,IAAX7F,IACPA,EAAOC,QAAUkB,EAGrB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASH,EAAQhB,EAAOC,GAgBjC,SAASgB,EAAQgC,EAAGE,GAChB5B,OAAOC,iBAAiBC,KAAM,CAC1B,EAAK,CACDC,MAAOuB,EACPrB,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,MAAOyB,EACPvB,UAAU,EACVC,YAAY,EACZC,cAAc,IAK1B,CAOAb,EAAQgB,UAAU6D,MAAQ,WACtB,OAAO,IAAIrE,KAAKW,YAAYX,KAAKwB,EAAGxB,KAAK0B,EAC7C,EAQAlC,EAAQgB,UAAU8D,IAAM,SAAS5D,GAC7B,OAAO,IAAIV,KAAKW,YAAYX,KAAKwB,EAAEd,EAAKc,EAAGxB,KAAK0B,EAAEhB,EAAKgB,EAC3D,EAQAlC,EAAQgB,UAAU+D,SAAW,SAAS7D,GAClC,OAAO,IAAIV,KAAKW,YAAYX,KAAKwB,EAAEd,EAAKc,EAAGxB,KAAK0B,EAAEhB,EAAKgB,EAC3D,EAQAlC,EAAQgB,UAAUC,SAAW,SAAS+D,GAClC,OAAO,IAAIxE,KAAKW,YAAYX,KAAKwB,EAAEgD,EAAQxE,KAAK0B,EAAE8C,EACtD,EAQAhF,EAAQgB,UAAUiE,OAAS,SAASD,GAChC,OAAO,IAAIxE,KAAKW,YAAYX,KAAKwB,EAAEgD,EAAQxE,KAAK0B,EAAE8C,EACtD,EAQAhF,EAAQgB,UAAU0D,OAAS,SAASxD,GAChC,OAASV,KAAKwB,IAAMd,EAAKc,GAAKxB,KAAK0B,IAAMhB,EAAKgB,CAClD,EAWAlC,EAAQgB,UAAUkE,KAAO,SAAShE,EAAM9B,GACpC,IAAI+F,EAAM,EAAM/F,EAEhB,OAAO,IAAIoB,KAAKW,YACZX,KAAKwB,EAAImD,EAAMjE,EAAKc,EAAI5C,EACxBoB,KAAK0B,EAAIiD,EAAMjE,EAAKgB,EAAI9C,EAEhC,EAQAY,EAAQgB,UAAUoE,aAAe,SAASlE,GACtC,IAAIa,EAAKvB,KAAKwB,EAAId,EAAKc,EACnBC,EAAKzB,KAAK0B,EAAIhB,EAAKgB,EAEvB,OAAOO,KAAKiB,KAAK3B,EAAGA,EAAKE,EAAGA,EAChC,EAQAjC,EAAQgB,UAAUqE,IAAM,SAASnE,GAC7B,OAAO,IAAIV,KAAKW,YACZsB,KAAK4C,IAAK7E,KAAKwB,EAAGd,EAAKc,GACvBS,KAAK4C,IAAK7E,KAAK0B,EAAGhB,EAAKgB,GAE/B,EAQAlC,EAAQgB,UAAUsE,IAAM,SAASpE,GAC7B,OAAO,IAAIV,KAAKW,YACZsB,KAAK6C,IAAK9E,KAAKwB,EAAGd,EAAKc,GACvBS,KAAK6C,IAAK9E,KAAK0B,EAAGhB,EAAKgB,GAE/B,EAQAlC,EAAQgB,UAAUuE,UAAY,SAASC,GACnC,OAAO,IAAIhF,KAAKW,YACZqE,EAAO/F,EAAIe,KAAKwB,EAAIwD,EAAOpF,EAAII,KAAK0B,EAAIsD,EAAOtG,EAC/CsG,EAAOrF,EAAIK,KAAKwB,EAAIwD,EAAOnF,EAAIG,KAAK0B,EAAIsD,EAAOjG,EAEvD,EAOAS,EAAQgB,UAAU2D,SAAW,WACzB,MAAO,SAAWnE,KAAKwB,EAAI,IAAMxB,KAAK0B,EAAI,GAC9C,OAEsB,IAAXnD,IACPA,EAAOC,QAAUgB,EAGrB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASD,EAAQhB,EAAOC,GAgBjC,SAASiB,EAAS+B,EAAGE,GACjB5B,OAAOC,iBAAiBC,KAAM,CAC1B,EAAK,CACDC,MAAOuB,EACPrB,UAAU,EACVC,YAAY,EACZC,cAAc,GAElB,EAAK,CACDJ,MAAOyB,EACPvB,UAAU,EACVC,YAAY,EACZC,cAAc,IAK1B,CASAZ,EAASwF,WAAa,SAASC,EAAIC,GAC/B,OAAO,IAAI1F,EACP0F,EAAG3D,EAAI0D,EAAG1D,EACV2D,EAAGzD,EAAIwD,EAAGxD,EAElB,EAOAjC,EAASe,UAAUlB,OAAS,WACxB,OAAO2C,KAAKiB,KAAKlD,KAAKwB,EAAExB,KAAKwB,EAAIxB,KAAK0B,EAAE1B,KAAK0B,EACjD,EAOAjC,EAASe,UAAU4E,UAAY,WAC3B,OAAOpF,KAAKwB,EAAExB,KAAKwB,EAAIxB,KAAK0B,EAAE1B,KAAK0B,CACvC,EAQAjC,EAASe,UAAU6E,IAAM,SAAS3E,GAC9B,OAAOV,KAAKwB,EAAEd,EAAKc,EAAIxB,KAAK0B,EAAEhB,EAAKgB,CACvC,EAQAjC,EAASe,UAAU8E,MAAQ,SAAS5E,GAChC,OAAOV,KAAKwB,EAAEd,EAAKgB,EAAI1B,KAAK0B,EAAEhB,EAAKc,CACvC,EAQA/B,EAASe,UAAU+E,YAAc,SAAS7E,GACtC,OAAOV,KAAKwB,EAAEd,EAAKgB,EAAI1B,KAAK0B,EAAEhB,EAAKc,CACvC,EAOA/B,EAASe,UAAUkC,KAAO,WACtB,OAAO1C,KAAKyE,OAAQzE,KAAKV,SAC7B,EAQAG,EAASe,UAAU8D,IAAM,SAAS5D,GAC9B,OAAO,IAAIV,KAAKW,YAAYX,KAAKwB,EAAId,EAAKc,EAAGxB,KAAK0B,EAAIhB,EAAKgB,EAC/D,EAQAjC,EAASe,UAAU+D,SAAW,SAAS7D,GACnC,OAAO,IAAIV,KAAKW,YAAYX,KAAKwB,EAAId,EAAKc,EAAGxB,KAAK0B,EAAIhB,EAAKgB,EAC/D,EAQAjC,EAASe,UAAUC,SAAW,SAAS+D,GACnC,OAAO,IAAIxE,KAAKW,YAAYX,KAAKwB,EAAIgD,EAAQxE,KAAK0B,EAAI8C,EAC1D,EAQA/E,EAASe,UAAUiE,OAAS,SAASD,GACjC,OAAO,IAAIxE,KAAKW,YAAYX,KAAKwB,EAAIgD,EAAQxE,KAAK0B,EAAI8C,EAC1D,EAQA/E,EAASe,UAAUgF,aAAe,SAAS9E,GACvC,IAAIwB,EAAMlC,KAAKqF,IAAI3E,IAASV,KAAKV,SAAWoB,EAAKpB,UACjD4C,EAAMD,KAAK6C,KAAK,EAAG7C,KAAK4C,IAAI3C,EAAK,IACjC,IAAIF,EAAUC,KAAKwD,KAAKvD,GAExB,OAAQlC,KAAKsF,MAAM5E,GAAQ,GAAQsB,EAAUA,CACjD,EAOAvC,EAASe,UAAUkF,KAAO,WACtB,OAAO,IAAI1F,KAAKW,aAAaX,KAAK0B,EAAG1B,KAAKwB,EAC9C,EASA/B,EAASe,UAAUmF,cAAgB,SAASjF,GACxC,OAAOV,KAAKuE,SAASvE,KAAK4F,QAAQlF,GACtC,EAQAjB,EAASe,UAAUoF,QAAU,SAASlF,GAClC,IAAImF,EAAU7F,KAAKqF,IAAI3E,GAAQA,EAAK2E,IAAI3E,GAExC,OAAOA,EAAKD,SAASoF,EACzB,EAQApG,EAASe,UAAUuE,UAAY,SAASC,GACpC,OAAO,IAAIhF,KAAKW,YACZqE,EAAO/F,EAAIe,KAAKwB,EAAIwD,EAAOpF,EAAII,KAAK0B,EACpCsD,EAAOrF,EAAIK,KAAKwB,EAAIwD,EAAOnF,EAAIG,KAAK0B,EAE5C,EAQAjC,EAASe,UAAU0D,OAAS,SAASxD,GACjC,OACIV,KAAKwB,IAAMd,EAAKc,GAChBxB,KAAK0B,IAAMhB,EAAKgB,CAExB,EAOAjC,EAASe,UAAU2D,SAAW,WAC1B,MAAO,UAAYnE,KAAKwB,EAAI,IAAMxB,KAAK0B,EAAI,GAC/C,OAEsB,IAAXnD,IACPA,EAAOC,QAAUiB,EAGrB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASF,EAAQhB,EAAOC,GAGjCA,EAAQsH,WAAavG,EAAQ,oBAC7Bf,EAAQuH,eAAiBxG,EAAQ,uBAEjC,EAAE,CAAC,mBAAmB,EAAE,uBAAuB,IAAI,EAAE,CAAC,SAASA,EAAQhB,EAAOC,GAkF9E,SAASsH,IACL9F,KAAKgG,KAAMC,UACf,CAxEAH,EAAWI,UAAY,KACvBJ,EAAWK,SAAY,GAcvBL,EAAWM,YAAc,SAASC,EAAIC,EAAI3H,EAAG4H,EAAQ/E,GACjD,GAAK6E,EAAG1F,cAAgB6F,OAASF,EAAG3F,cAAgB6F,MAChD,MAAM,IAAItH,MAAM,oDACpB,GAAKuH,MAAM9H,IAAM8H,MAAMF,IAAWE,MAAMjF,GACpC,MAAM,IAAItC,MAAM,4DAUpB,IARA,IAAIwC,EAAK,EACLD,EAAK,EACL7B,EAAI,IAAI4G,MAAM7H,GACdkB,EAAI,IAAI2G,MAAM7H,GACd+H,EAAK,EAGLC,EAAO1E,KAAK2E,IAAIpF,EAAI6E,EAAGE,IACjBzH,EAAI,EAAGA,EAAIH,EAAGG,IAAM,CAC1B,IAAI+H,EAAO5E,KAAK2E,IAAIpF,EAAI6E,EAAGE,EAAOzH,IAE7B+H,EAAOF,IACRD,EAAK5H,EACL6H,EAAOE,GAEXjH,EAAEd,GAAKe,EAAEf,GAAKwH,EAAGC,EAAOzH,EAC5B,CACA4C,EAAI4E,EAAGC,EAAOG,GACdA,IAEA,IAAM,IAAII,EAAI,EAAGA,EAAInI,EAAGmI,IAAM,CAC1B,IAAUhI,EAAI,EAAGA,EAAIH,EAAEmI,EAAGhI,IAAM,CAC5B,IAAIiI,EAAKV,EAAGE,EAAOzH,GAAK0C,EACpBwF,EAAKX,EAAGE,EAAOzH,EAAEgI,GAAKtF,EACtByF,EAAIrH,EAAEd,EAAE,GAAGe,EAAEf,GACboI,EAAMH,EAAKC,EAEf,GAAY,GAAPE,EAED,MAGJA,EAAMD,EAAIC,EACVrH,EAAEf,GAAKkI,EAAGE,EACVtH,EAAEd,GAAKiI,EAAGG,CACd,CAEAxF,GADAD,EAAM,GAAGiF,EAAG,GAAM/H,EAAEmI,EAAMlH,EAAE8G,EAAG,GAAK7G,EAAE6G,IAE1C,CAEA,MAAO,CAAEhF,EAAGA,EAAGD,GAAIA,EACvB,EAgBAqE,EAAWtF,UAAUwF,KAAO,SAASmB,GACjCnH,KAAKmH,MAAQ,IAAIX,MAEjB,IAAM,IAAI1H,EAAIqI,EAAM7H,OAAS,EAAGR,GAAK,EAAGA,IACpCkB,KAAKmH,MAAMC,KAAMD,EAAMrI,IAE3BkB,KAAKqH,UAAY,IACjBrH,KAAKsH,GAAK,CACd,EAMAxB,EAAWtF,UAAU+G,KAAO,SAAS/F,GACjC,GAAKiF,MAAMjF,GACP,MAAM,IAAItC,MAAM,+CAIpB,IAFA,IAAIsI,EAAS,EAEH1I,EAAIkB,KAAKmH,MAAM7H,OAAS,EAAGR,GAAK,EAAGA,IACzC0I,EAASA,EAAShG,EAAIxB,KAAKmH,MAAMrI,GAErC,OAAO0I,CACX,EAMA1B,EAAWtF,UAAU8D,IAAM,SAAS5D,GAMhC,IALA,IAAI8G,EAAS,IAAI1B,EACb2B,EAAKzH,KAAK0H,YACVC,EAAKjH,EAAKgH,YACVE,EAAO3F,KAAK6C,IAAI2C,EAAGE,GAEb7I,EAAI,EAAGA,GAAK8I,EAAM9I,IAAM,CAC9B,IAAI+I,EAAM/I,GAAK2I,EAAMzH,KAAKmH,MAAMrI,GAAK,EACjCgJ,EAAMhJ,GAAK6I,EAAMjH,EAAKyG,MAAMrI,GAAK,EAErC0I,EAAOL,MAAMrI,GAAK+I,EAAKC,CAC3B,CAEA,OAAON,CACX,EAMA1B,EAAWtF,UAAUC,SAAW,SAASC,GAGrC,IAFA,IAAI8G,EAAS,IAAI1B,EAEPhH,EAAI,EAAGA,GAAKkB,KAAK0H,YAAchH,EAAKgH,YAAa5I,IACvD0I,EAAOL,MAAMC,KAAK,GAEtB,IAAUtI,EAAI,EAAGA,GAAKkB,KAAK0H,YAAa5I,IACpC,IAAM,IAAIiJ,EAAI,EAAGA,GAAKrH,EAAKgH,YAAaK,IACpCP,EAAOL,MAAMrI,EAAEiJ,IAAM/H,KAAKmH,MAAMrI,GAAK4B,EAAKyG,MAAMY,GAExD,OAAOP,CACX,EAMA1B,EAAWtF,UAAUwH,cAAgB,SAASxD,GAC1C,IAAM,IAAI1F,EAAI,EAAGA,EAAIkB,KAAKmH,MAAM7H,OAAQR,IACpCkB,KAAKmH,MAAMrI,IAAM0F,CACzB,EAMAsB,EAAWtF,UAAUyH,SAAW,WAE5B,IADA,IAAI/B,EAAY,MACNpH,EAAIkB,KAAK0H,YAAa5I,GAAK,GAC5BmD,KAAK2E,IAAK5G,KAAKmH,MAAMrI,KAAQoH,EADEpH,IAEhCkB,KAAKmH,MAAMe,KAIvB,EAMApC,EAAWtF,UAAU2H,UAAY,SAAStD,EAAKC,GAC3C,IAEI0C,EAFAY,EAAWpI,KAAKuH,KAAK1C,GACrBwD,EAAWrI,KAAKuH,KAAKzC,GAGzB,GAAK7C,KAAK2E,IAAIwB,IAAatC,EAAWI,UAClCsB,EAAS3C,OACR,GAAK5C,KAAK2E,IAAIyB,IAAavC,EAAWI,UACvCsB,EAAS1C,OACR,GAAKsD,EAAWC,GAAY,EAK7B,IAJA,IAAIC,EAAQrG,KAAKsG,IAAIzD,EAAMD,GACvB2D,EAAQvG,KAAKwG,KAAO3C,EAAWK,SAC/BuC,EAAQzG,KAAK0G,MAAOL,EAAKE,GAAQvG,KAAK2G,KAEhC9J,EAAI,EAAGA,EAAI4J,EAAO5J,IAAM,CAC9B0I,EAAS,IAAO3C,EAAMC,GACtB,IAAI7E,EAAQD,KAAKuH,KAAKC,GAEtB,GAAKvF,KAAK2E,IAAI3G,IAAU6F,EAAWI,UAC/B,MAGCjG,EAAQmI,EAAW,GACpBtD,EAAM0C,EACNa,EAAWpI,IAEX4E,EAAM2C,EACNY,EAAWnI,EAEnB,CAGJ,OAAOuH,CACX,EAMA1B,EAAWtF,UAAU2D,SAAW,WAI5B,IAHA,IAAIgD,EAAQ,IAAIX,MACZqC,EAAQ,IAAIrC,MAEN1H,EAAIkB,KAAKmH,MAAM7H,OAAS,EAAGR,GAAK,EAAGA,IAAM,CAC/C,IAAImB,EAAQgC,KAAK6G,MAAoB,IAAd9I,KAAKmH,MAAMrI,IAAS,IAG3C,GAAc,GAATmB,EAAa,CACd,IAAI8I,EAAS9I,EAAQ,EAAM,MAAQ,MAEnCA,EAAQgC,KAAK2E,IAAI3G,GACZnB,EAAI,IACS,GAATmB,EACDA,EAAQD,KAAKqH,UAEbpH,GAASD,KAAKqH,WACjBvI,EAAI,IAAImB,GAAS,IAAMnB,GAE5B+J,EAAMzB,KAAM2B,GACZ5B,EAAMC,KAAMnH,EAChB,CACJ,CAEA4I,EAAM,GAAmB,OAAZA,EAAM,GAAgB,GAAK,IAExC,IAAIrB,EAAS,GACb,IAAU1I,EAAI,EAAGA,EAAIqI,EAAM7H,OAAQR,IAC/B0I,GAAUqB,EAAM/J,GAAKqI,EAAMrI,GAE/B,OAAO0I,CACX,EAOA1B,EAAWtF,UAAUwI,UAAY,SAASnE,EAAKC,EAAKnG,GAChD,GAAK8H,MAAM5B,IAAQ4B,MAAM3B,IAAQ2B,MAAM9H,GACnC,MAAM,IAAIO,MAAM,oDAEpB,IAAI+J,EAAQnE,EAAMD,EAGlB,GAAU,GAALlG,EAAS,CACV,IAAIyJ,EAAWpI,KAAKuH,KAAK1C,GACrBwD,EAAWrI,KAAKuH,KAAKzC,GACzB9E,KAAKsH,GAAK,GAAI2B,GAAQb,EAAWC,EACrC,KAAO,CAMH,IALA,IAAIa,EAAK,GAAMvK,EAAE,EACbwK,EAAQF,EAAQC,EAChB1H,EAAIqD,EAAM,GAAIsE,EACdC,EAAM,EAEAtK,EAAI,EAAGA,EAAIoK,EAAIpK,IACrBsK,GAAOpJ,KAAKuH,KAAK/F,GACjBA,GAAK2H,EAETnJ,KAAKsH,GAAK,IAAKtH,KAAKsH,GAAK2B,EAAMG,EAAIF,EACvC,CAEA,GAAKzC,MAAMzG,KAAKsH,IACZ,MAAM,IAAIpI,MAAM,wCAEpB,OAAOc,KAAKsH,EAChB,EAOAxB,EAAWtF,UAAU6I,QAAU,SAASxE,EAAKC,GACzC,GAAK2B,MAAM5B,IAAQ4B,MAAM3B,GACrB,MAAM,IAAI5F,MAAM,kDAWpB,IATA,IAAI+J,EAAQnE,EAAMD,EACdyE,EAAK,GAAML,GAAUjJ,KAAKuH,KAAK1C,GAAO7E,KAAKuH,KAAKzC,IAChDlG,EAAI0K,EACJnH,EAAI,EAAImH,EAAG,EACXC,EAAKpH,EACLqH,EAAMF,EACNpD,EAAY,KAEZgD,EAAK,EACCvK,EAAI,EAAGA,GAAK,GAAIA,IAAM,CAK5B,IAJA,IAAIwK,EAAQF,EAAQC,EAChB1H,EAAQqD,EAAM,GAAIsE,EAClBC,EAAQ,EAEFtK,EAAI,EAAGA,GAAKoK,EAAIpK,IACtBsK,GAAOpJ,KAAKuH,KAAK/F,GACjBA,GAAK2H,EAOT,GAFAhH,GAAK,GADLmH,EADA1K,EAAI,IAAOA,EAAIqK,EAAQG,EAAMF,IAEfM,GAAK,EAEdvH,KAAK2E,IAAIzE,EAAEoH,GAAMrD,EAAUjE,KAAK2E,IAAI2C,GACrC,MAEJA,EAAKpH,EACLqH,EAAMF,EACNJ,IAAO,CACX,CAEA,OAAO/G,CACX,EAMA2D,EAAWtF,UAAUiJ,QAAU,SAAS5E,EAAKC,GACzC,GAAK2B,MAAM5B,IAAQ4B,MAAM3B,GACrB,MAAM,IAAI5F,MAAM,kDAEpB,IAAIwK,EAAM,GACNC,EAAI,EACJzD,EAAY,KACZ/D,EAAI,IAAIqE,MAAMkD,EAAI,GAClBE,EAAI,IAAIpD,MAAMkD,EAAI,GAClBlC,EAAS,CAAE9F,EAAG,EAAGD,GAAI,GAEzBmI,EAAE,GAAK,EACP,IAAM,IAAI7B,EAAI,EAAGA,GAAK2B,IAClBvH,EAAE4F,EAAE,GAAK/H,KAAKgJ,UAAUnE,EAAKC,EAAKiD,KAC7BA,GAAK4B,IACNnC,EAAS1B,EAAWM,YAAYwD,EAAGzH,EAAGwH,EAAG5B,EAAE4B,EAAG,GACzC1H,KAAK2E,IAAIY,EAAO/F,KAAOyE,EAAUsB,EAAO9F,KAJ1BqG,IAMvB5F,EAAE4F,GAAK5F,EAAE4F,EAAE,GACX6B,EAAE7B,GAAK,IAAO6B,EAAE7B,EAAE,GAGtB,OAAOP,EAAO9F,CAClB,EAOAoE,EAAWtF,UAAUkH,UAAY,WAC7B,OAAO1H,KAAKmH,MAAM7H,OAAS,CAC/B,EAMAwG,EAAWtF,UAAUqJ,cAAgB,WAGjC,IAFA,IAAIC,EAAa,IAAIhE,EAEXhH,EAAI,EAAGA,EAAIkB,KAAKmH,MAAM7H,OAAQR,IACpCgL,EAAW3C,MAAMC,KAAKtI,EAAEkB,KAAKmH,MAAMrI,IAGvC,OAAOgL,CACX,EAMAhE,EAAWtF,UAAUuJ,SAAW,WAC5B,IAAIvC,EAGJ,OADAxH,KAAKiI,WACIjI,KAAK0H,aACV,KAAK,EAKL,QACIF,EAAS,IAAIhB,YALjB,KAAK,EAAGgB,EAASxH,KAAKgK,gBAAqB,MAC3C,KAAK,EAAGxC,EAASxH,KAAKiK,oBAAqB,MAC3C,KAAK,EAAGzC,EAASxH,KAAKkK,gBAAqB,MAC3C,KAAK,EAAG1C,EAASxH,KAAKmK,kBAM1B,OAAO3C,CACX,EAMA1B,EAAWtF,UAAU4J,mBAAqB,SAASvF,EAAKC,GACpD,IACIuF,EADAC,EAAQ,IAAI9D,MAGhB,GAAyB,GAApBxG,KAAK0H,YAEO,OADb2C,EAAOrK,KAAKmI,UAAUtD,EAAKC,KACPwF,EAAMlD,KAAKiD,OAC5B,CAEH,IACIE,EADSvK,KAAK6J,gBACCO,mBAAmBvF,EAAKC,GAE3C,GAAKyF,EAAOjL,OAAS,EAAI,CAGR,OADb+K,EAAOrK,KAAKmI,UAAUtD,EAAK0F,EAAO,MACdD,EAAMlD,KAAKiD,GAG/B,IAAK,IAAIvL,EAAI,EAAGA,GAAKyL,EAAOjL,OAAO,EAAGR,IAErB,OADbuL,EAAOrK,KAAKmI,UAAUoC,EAAOzL,GAAIyL,EAAOzL,EAAE,MACtBwL,EAAMlD,KAAKiD,GAKtB,OADbA,EAAOrK,KAAKmI,UAAUoC,EAAOA,EAAOjL,OAAO,GAAIwF,KAC3BwF,EAAMlD,KAAKiD,EACnC,MAGiB,OADbA,EAAOrK,KAAKmI,UAAUtD,EAAKC,KACPwF,EAAMlD,KAAKiD,EAEvC,CAEA,OAAOC,CACX,EAMAxE,EAAWtF,UAAUwJ,cAAgB,WACjC,IAAIxC,EAAS,IAAIhB,MACbvH,EAAIe,KAAKmH,MAAM,GAKnB,OAHU,GAALlI,GACDuI,EAAOJ,MAAOpH,KAAKmH,MAAM,GAAKlI,GAE3BuI,CACX,EAMA1B,EAAWtF,UAAUyJ,kBAAoB,WACrC,IAAIO,EAAU,IAAIhE,MAElB,GAAyB,GAApBxG,KAAK0H,YAAmB,CACzB,IAAIzI,EAAIe,KAAKmH,MAAM,GACfxH,EAAIK,KAAKmH,MAAM,GAAKlI,EAEpBY,EAAIF,EAAEA,EADFK,KAAKmH,MAAM,GAAKlI,EACV,EAEd,GAAKY,EAAI,EAAI,CACT,IAAInB,EAAIuD,KAAKiB,KAAKrD,GAElB2K,EAAQpD,KAAM,KAAQzH,EAAIjB,IAC1B8L,EAAQpD,KAAM,KAAQzH,EAAIjB,GAC9B,MAAiB,GAALmB,GAER2K,EAAQpD,KAAM,IAAOzH,EAE7B,CAEA,OAAO6K,CACX,EAUA1E,EAAWtF,UAAU0J,cAAgB,WACjC,IAAIM,EAAU,IAAIhE,MAElB,GAAyB,GAApBxG,KAAK0H,YAAmB,CACzB,IAAI+C,EAAKzK,KAAKmH,MAAM,GAChBuD,EAAK1K,KAAKmH,MAAM,GAAKsD,EACrBE,EAAK3K,KAAKmH,MAAM,GAAKsD,EAGrBxL,GAAW,EAAE0L,EAAKD,EAAGA,GAAM,EAC3B/K,GAAW,EAAE+K,EAAGA,EAAGA,EAAK,EAAEC,EAAGD,EAHxB1K,KAAKmH,MAAM,GAAKsD,EAGa,IAAS,GAC3ClE,EAAUmE,EAAK,EACfE,EAAUjL,EAAEA,EAAE,EAAIV,EAAEA,EAAEA,EAAE,GACxB4L,EAAUlL,EAAI,EAEdmL,EAAc9K,KAAK+K,oBAGvB,GAFI9I,KAAK2E,IAAIgE,IAAYE,IAAaF,EAAU,GAE3CA,EAAU,EAAI,CACf,IAEIP,EAFA3L,EAAIuD,KAAKiB,KAAK0H,GAMdP,GAFJW,GAAOH,EAAQnM,IACH,EACDuD,KAAKgJ,IAAID,EAAK,EAAE,IAEf/I,KAAKgJ,KAAKD,EAAK,EAAE,IAE7BA,GAAOH,EAAQnM,IACH,EACR2L,GAAQpI,KAAKgJ,IAAID,EAAK,EAAE,GAExBX,GAAQpI,KAAKgJ,KAAKD,EAAK,EAAE,GAE7BR,EAAQpD,KAAMiD,EAAO9D,EACzB,MAAO,GAAKqE,EAAU,EAAI,CACtB,IAAIM,EAAWjJ,KAAKiB,MAAMjE,EAAE,GACxBkM,EAAWlJ,KAAK0B,MAAO1B,KAAKiB,MAAM0H,IAAWC,GAAS,EACtD3I,EAAWD,KAAKC,IAAIiJ,GACpB/I,EAAWH,KAAKG,IAAI+I,GACpBC,EAAWnJ,KAAKiB,KAAK,GAEzBsH,EAAQpD,KAAM,EAAE8D,EAAShJ,EAAMqE,GAC/BiE,EAAQpD,MAAO8D,GAAYhJ,EAAMkJ,EAAQhJ,GAAOmE,GAChDiE,EAAQpD,MAAO8D,GAAYhJ,EAAMkJ,EAAQhJ,GAAOmE,EACpD,KAAO,CACH,IAAIyE,EAGAA,EADCH,GAAS,GACH5I,KAAKgJ,IAAIJ,EAAO,EAAE,GAEnB5I,KAAKgJ,KAAKJ,EAAO,EAAE,GAE7BL,EAAQpD,KAAM,EAAE4D,EAAMzE,GAEtBiE,EAAQpD,MAAO4D,EAAMzE,EACzB,CACJ,CAEA,OAAOiE,CACX,EAKA,IAAIzB,EAAO,SAAUvH,GACjB,MAAoB,iBAANA,EAAiBA,EAAIA,EAAI,GAAK,EAAI,EAAIA,GAAMA,EAAIA,EAAI6J,IAAMA,GAC5E,EAYAvF,EAAWtF,UAAU2J,gBAAkB,WACnC,IAAIK,EAAU,GAEV7L,EAAIqB,KAAK0H,YACb,GAAS,GAAL/I,EAAQ,CAER,IAAI2M,EAAO,IAAIxF,EACfwF,EAAKnE,MAAQnH,KAAKmH,MAAMoE,QACxBD,EAAKtD,cAAcsD,EAAKnE,MAAMxI,IAC9B,IAAI6M,EAAO,MACPvJ,KAAK2E,IAAI0E,EAAKnE,MAAM,IAAM,GAAKqE,EAAOvJ,KAAK2E,IAAI0E,EAAKnE,MAAM,MAC1DmE,EAAKnE,MAAM,GAAK,GACpB,IAIIrI,EAJA2M,EAASH,EAAKzB,gBACd6B,EAAQD,EAAO1B,WAAW4B,MAAK,SAAU1M,EAAGU,GAAK,OAAOV,EAAIU,CAAG,IAC/DiM,EAAO,GACPC,EAAKH,EAAMpM,OAAS,EAEpBwM,EAAK9L,KAAK+L,SACdC,QAAU/J,KAAK6C,IAAI7C,KAAK2E,IAAIkF,EAAGG,MAAOhK,KAAK2E,IAAIkF,EAAGI,OAClD,IAAIpB,EAAc9K,KAAK+K,kBAAkBiB,SAEzC,IAAKlN,EAAI,EAAGA,GAAK+M,EAAI/M,IACjB8M,EAAKxE,KAAKkE,EAAK/D,KAAKmE,EAAM5M,KAG9B,IAAKA,EAAI,EAAGA,GAAK+M,EAAI/M,IACbmD,KAAK2E,IAAIgF,EAAK9M,IAAMgM,IACpBc,EAAK9M,GAAK,GAGlBA,EAAI,EACJ,IAAIyC,EAAKU,KAAK6C,IAAI,IAAOgH,EAAGI,KAAOJ,EAAGG,MAAQtN,EAAG6M,GAC7CW,EAAU,GACVC,EAAS,GACb,GAAIP,GAAM,EAAG,CAYT,IAXe,GAAXD,EAAK,GACD7C,EAAK6C,EAAK,KAAO7C,EAAKuC,EAAK/D,KAAKmE,EAAM,GAAKnK,GAAMqK,EAAK,MACtDO,EAAQ/E,KAAKsE,EAAM,GAAKnK,GACxB6K,EAAOhF,KAAK,CAAC0E,EAAGG,KAAMP,EAAM,OAIhClB,EAAQpD,KAAKsE,EAAM,GAAIA,EAAM,IAC7B5M,KAGGA,EAAI+M,EAAI/M,IACQ,GAAf8M,EAAK9M,EAAI,IACT0L,EAAQpD,KAAKsE,EAAM5M,EAAI,GAAI4M,EAAM5M,EAAI,IACrCA,KAEKiK,EAAK6C,EAAK9M,KAAOiK,EAAK6C,EAAK9M,EAAI,MACpCqN,EAAQ/E,MAAMsE,EAAM5M,GAAK4M,EAAM5M,EAAI,IAAM,GACzCsN,EAAOhF,KAAK,CAACsE,EAAM5M,GAAI4M,EAAM5M,EAAI,MAGzB,GAAZ8M,EAAKC,IAAY9C,EAAK6C,EAAKC,KAAQ9C,EAAKuC,EAAK/D,KAAKmE,EAAMG,GAAMtK,GAAMqK,EAAKC,MACzEM,EAAQ/E,KAAKsE,EAAMG,GAAMtK,GACzB6K,EAAOhF,KAAK,CAACsE,EAAMG,GAAKC,EAAGI,OAEnC,CAEA,IAAInN,EAAI,SAAUyC,GAAK,OAAO8J,EAAK/D,KAAK/F,EAAI,EACxC6K,EAAK,SAAU7K,GAAK,OAAOiK,EAAOlE,KAAK/F,EAAI,EAC/C,GAAI2K,EAAQ7M,OAAS,EACjB,IAAKR,EAAI,EAAGA,EAAIqN,EAAQ7M,OAAQR,IAC5BqN,EAAQrN,GAAKgH,EAAWwG,wBAAwBH,EAAQrN,GAAIC,EAAGsN,EAAI,GAAID,EAAOtN,GAAG,GAAIsN,EAAOtN,GAAG,IAIvG0L,EAAUA,EAAQ+B,OAAOJ,EAC7B,CACA,OAAO3B,CACX,EAQA1E,EAAWtF,UAAUuK,kBAAoB,SAAUiB,GAC/C,IAAIV,EAAOtL,KACPwL,EAAO,MACX,QAAuB,IAAZQ,EAAyB,CAChC,IAAIF,EAAKR,EAAKS,SACdC,EAAU/J,KAAK6C,IAAI7C,KAAK2E,IAAIkF,EAAGG,MAAOhK,KAAK2E,IAAIkF,EAAGI,MACtD,CACA,GAAIF,EAAU,KACV,OAAO,EAAE/J,KAAK2E,IAAI0E,EAAK/D,KAAKiE,IAEhC,IAAI7M,EAAI2M,EAAKnE,MAAM7H,OAAS,EACxBkN,EAAKlB,EAAKnE,MAAMxI,GACpB,OAAO,GAAK6M,EAAOF,EAAKnE,MAAMsF,QAAO,SAAU3F,EAAG4F,EAAG5N,GACjD,IAAI6N,EAAKD,EAAIF,EAAKvK,KAAKgJ,IAAIe,EAASlN,GACpC,OAAO6N,EAAK7F,EAAI6F,EAAK7F,CACzB,GAAG,EACP,EAUAhB,EAAWtF,UAAUoM,0BAA4B,WAC7C,IAAI3N,EAAIe,KAAKmH,MACTxI,EAAIM,EAAEK,OAAS,EACfkN,EAAKvN,EAAEN,GACD,GAAN6N,IACAvN,EAAIe,KAAKmH,MAAM0F,KAAI,SAAUH,GAAK,OAAOA,EAAIF,CAAI,KAErD,IAEIM,EAFAnN,EAAIV,EAAE4N,KAAI,SAAUH,EAAG5N,GAAK,OAAQA,EAAIH,EAAKsD,KAAKgJ,IAAIhJ,KAAK2E,IAAU,GAAL9H,EAAU4N,EAAI,EAAIA,GAAI,GAAK/N,EAAIG,IAAM4N,CAAG,IAGxGK,EAAW,SAAUC,EAAKC,EAAInO,GAU9B,OATIgO,EAAkBhO,KACdkO,EAAIlI,IAAMmI,GACVD,EAAIE,QAAUF,EAAIlI,IAClBkI,EAAIlI,IAAMmI,GAELD,EAAIE,QAAUD,IACnBD,EAAIE,QAAUD,IAGfD,CACX,EAEAF,EAAoB,SAAUhO,GAAK,OAAOA,EAAIH,GAAKM,EAAEH,GAAK,CAAG,EAC7D,IAAIqO,EAAkBxN,EAAE8M,OAAOM,EAAU,CAAEjI,IAAK,EAAGoI,QAAS,IAK5D,OAHAJ,EAAoB,SAAUhO,GAAK,OAAOA,EAAIH,IAAOA,EAAI,GAAKG,EAAI,EAAKG,EAAEH,GAAK,EAAIG,EAAEH,GAAK,EAAI,EAGtF,CACHsO,MAAO,EAHWzN,EAAE8M,OAAOM,EAAU,CAAEjI,IAAK,EAAGoI,QAAS,IAG7BpI,IAC3BuI,KAAM,EAAIF,EAAgBrI,IAElC,EAWAgB,EAAWtF,UAAU8M,0BAA4B,WAC7C,IAAIhC,EAAO,IAAIxF,EACfwF,EAAKnE,MAAQnH,KAAKmH,MAAMoE,QAAQgC,UAChC,IAAIC,EAAMlC,EAAKsB,4BAGf,OAFAY,EAAIJ,KAAO,EAAII,EAAIJ,KACnBI,EAAIH,KAAO,EAAIG,EAAIH,KACZG,CACX,EAWA1H,EAAWtF,UAAUuL,OAAS,WAC1B,IAAI0B,EAAMzN,KAAK4M,4BACXd,EAAK,CAAEG,KAAMwB,EAAIL,KAAMlB,KAAMuB,EAAIJ,MACrC,OAAiB,IAAbI,EAAIL,MAA2B,IAAbK,EAAIJ,OAET,IAAbI,EAAIL,KACJtB,EAAGG,KAAOjM,KAAKsN,4BAA4BD,KAEzB,IAAbI,EAAIJ,OACTvB,EAAGI,KAAOlM,KAAKsN,4BAA4BF,MAE3CtB,EAAGG,KAAOH,EAAGI,OAEbJ,EAAGG,KAAOH,EAAGI,KAAO,IATbJ,CAef,EAoBAhG,EAAWwG,wBAA0B,SAAUoB,EAAI3O,EAAGsN,EAAIsB,EAAgB9I,EAAKC,GAC3E,IAAItD,EAAiBoM,EAA+BC,EAAcC,EAC3DC,EAASC,EADTC,EAAW,EAAQC,EAAuB,EAEjD1M,EAAIkM,EACJ,IAAIvH,EAAW,GACXgI,EAAwBlM,KAAKgJ,IAAI,IAAK9E,GACtCiI,EAA4B,iBAARvJ,GAAmC,iBAARC,EACnD,GAAIsJ,EAAW,CACX,GAAIvJ,EAAMC,EACN,MAAM,IAAI5F,MAAM,qDAGpB,GAFA6O,EAAUhP,EAAE8F,GACZmJ,EAAUjP,EAAE+F,GACRiE,EAAKgF,IAAahF,EAAKiF,GACvB,MAAM,IAAI9O,MAAM,mEACxB,CAEA,IAOIJ,EAPAuP,EAAqB,WAGrB,OAAQpM,KAAK2E,IAAIiH,IAAiBM,EAAwBlM,KAAK2E,IAAIpF,IAC3D0M,GAAyB1M,EAAIqM,EAAgBrM,CACzD,EAKA,IAAK1C,EAAI,EAAGA,EAAI6O,EAAgB7O,IAAK,CAEjC,GAAW,IADX8O,EAAMvB,EAAG7K,IACK,CACV,GAAgB,GAAZyM,EAEA,MAAM,IAAI/O,MAAM,sCAKhB0O,EAAMK,CAId,CAMA,GAJAA,EAAWL,EACXlM,EAAI3C,EAAEyC,GACNqM,EAAenM,EAAIkM,EACnBE,EAAQtM,EAAIqM,EACRQ,IACA,MAGJ,GAAID,EAAW,CACX,GAAIrF,EAAKrH,IAAMqH,EAAKiF,GAChBlJ,EAAMtD,EACNwM,EAAUtM,MAET,IAAIqH,EAAKrH,IAAMqH,EAAKgF,GAIpB,CACDvM,EAAIsM,EAEJ,KACJ,CAPIjJ,EAAMrD,EACNuM,EAAUrM,CAMd,CAEA,GAAKoM,EAAQjJ,GAASiJ,EAAQhJ,EAAM,CAChC,GAAIiE,EAAKgF,IAAYhF,EAAKiF,GACtB,MAGJ,IAAIM,EAAc,GACdC,EAAsB,IACtB9M,EAAKuM,EAAUD,EACfxM,EAAKuD,EAAMD,EAgBf,GAZIgJ,EAFM,GAANpM,EAEeD,GAAKqD,EAAW,GAALtD,GAErBU,KAAK2E,IAAInF,EAAKQ,KAAK4C,IAAIkJ,EAASC,IAAYM,EAElC9M,GAAKqD,EAAMtD,GAAM,IAAOU,KAAK2E,IAAImH,GAAW9L,KAAK2E,IAAIoH,IAAYO,EAAsBA,KAIvF/M,GAAKqD,EAAMkJ,EAAUtM,EAAKF,GAE7CuM,EAAQtM,EAAIqM,EAERQ,IACA,KAER,CACJ,CAEAH,EAAuB1M,EAAIsM,EAC3BtM,EAAIsM,CACR,CAKA,OAAOtM,CACX,OAEsB,IAAXjD,IACPA,EAAOC,QAAUsH,EAGrB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASvG,EAAQhB,EAAOC,GASjC,QAAsB,IAAXD,EACP,IAAIuH,EAAavG,EAAQ,gBAiB7B,SAASwG,IACL/F,KAAKgG,KAAMC,UACf,CAbAF,EAAeyI,QAAU,EAGzBzI,EAAevF,UAAwB,IAAIsF,EAC3CC,EAAevF,UAAUG,YAAcoF,EACvCA,EAAe0I,WAAwB3I,EAAWtF,UAiBlDuF,EAAevF,UAAU+G,KAAO,SAAS/F,GACrC,IAAI0E,EAAY,KACZsB,EAASzB,EAAe0I,WAAWlH,KAAKlI,KAAKW,KAAMwB,GAMvD,GADKS,KAAK2E,IAAIY,GAAUtB,IAAYsB,EAAS,GACxCA,EAAS,EACV,MAAM,IAAItI,MAAM,mEAEpB,OAAO+C,KAAKiB,KAAKsE,EACrB,EAEAzB,EAAevF,UAAU2D,SAAW,WAGhC,MAAO,QAFM4B,EAAe0I,WAAWtK,SAAS9E,KAAKW,MAE3B,GAC9B,OAEsB,IAAXzB,IACPA,EAAOC,QAAUuH,EAGrB,EAAE,CAAC,eAAe,IAAI,EAAE,CAAC,SAASxG,EAAQhB,EAAOC,GAGjDA,EAAQkQ,UAAYnP,EAAQ,mBAC5Bf,EAAQmQ,MAAQpP,EAAQ,4BAA4BqP,QACpD,EAAE,CAAC,2BAA2B,GAAG,kBAAkB,KAAK,EAAE,CAAC,SAASrP,EAAQhB,EAAOC,GAInF,SAASqQ,EAAaC,GAClB9O,KAAKgG,KAAK8I,EACd,CAQAD,EAAarO,UAAUwF,KAAO,SAAS8I,GACnC9O,KAAK8O,OAASA,EACd9O,KAAK+O,OAAS,EAClB,EAOAF,EAAarO,UAAUwO,YAAc,SAASC,GAC1CjP,KAAK+O,OAAO3H,KAAK6H,EACrB,EAOAJ,EAAarO,UAAU0O,aAAe,SAASH,GAC3C/O,KAAK+O,OAAS/O,KAAK+O,OAAOxC,OAAOwC,EACrC,EAEAxQ,EAAOC,QAAUqQ,CAEjB,EAAE,CAAC,GAAG,GAAG,CAAC,SAAStP,EAAQhB,EAAOC,GAClC,IAAIgB,EAAUD,EAAQ,cAAcC,QAepC,SAAS2P,EAAiBC,EAAYC,EAAUC,EAAIC,EAAIpE,EAAOqE,EAASC,GACpE,SAASC,EAAOC,EAAIC,EAAIC,EAAIC,GACxB,IAAIzK,EAAMsK,EAAKE,EAAKD,EAAKE,EACrBC,EAAM9N,KAAKiB,MAAMyM,EAAKA,EAAKC,EAAKA,IAAOC,EAAKA,EAAKC,EAAKA,IACtDE,EAAM/N,KAAKwD,KAAKJ,EAAM0K,GAE1B,OADIJ,EAAKG,EAAKF,EAAKC,EAAK,IAAKG,GAAOA,GAC7BA,CACX,CACA7E,EAAQA,EAAQlJ,KAAKgO,GAAK,IAC1B,IASIC,EATAtQ,EAAIqC,KAAKC,IAAIiJ,GACbhJ,EAAIF,KAAKG,IAAI+I,GACbjF,EAAY,KACZiK,EAAWf,EAAW7K,SAAS8K,GAAU5K,OAAO,GAChD2L,EAAMD,EAAS3O,EAAI5B,EAAIuQ,EAASzO,EAAIS,EACpCkO,EAAMF,EAAS3O,GAAKW,EAAIgO,EAASzO,EAAI9B,EACrC0Q,EAASF,EAAMA,EACfG,EAASF,EAAMA,EACfG,EAAUF,GAAUhB,EAAKA,GAAQiB,GAAUhB,EAAKA,GAEhDiB,EAAS,IAETlB,GADAY,EAASjO,KAAKiB,KAAKsN,GAEnBjB,GAAMW,GAEV,IAAIO,EAAOnB,EAAKA,EACZoB,EAAOnB,EAAKA,EACZoB,EAAOF,EAAOF,EACdK,EAAOF,EAAOJ,EAClBJ,GAAUO,EAAOC,EAAOC,EAAOC,IAASD,EAAOC,GAC3C3O,KAAK2E,IAAIsJ,GAAUhK,IAAWgK,EAAS,GAC3C,IAAIW,EAAK5O,KAAKiB,KAAKgN,GACfV,GAAWC,IAAWoB,GAAMA,GAehC,IAdA,IAAIC,EAAM1B,EAAW9K,IAAI+K,GAAU5K,OAAO,GACtCsM,EAAMF,EAAKvB,EAAKe,EAAMd,EACtByB,EAAMH,GAAMtB,EAAKa,EAAMd,EAGvB2B,GAAQb,EAAMW,GAAOzB,EACrB4B,GAAQd,EAAMW,GAAOzB,EACrB6B,GAAQd,EAAMW,GAAOzB,EACrB6B,GAAQf,EAAMW,GAAOzB,EAErB8B,EAAS3B,EAAO,EAAK,EAAKuB,EAAME,GAEhCG,EAAa5B,EAAOuB,EAAME,GAAOD,GAAOE,GACxCG,EAAiB,EAAVtP,KAAKgO,GACTqB,EAAaC,GAAMD,GAAcC,EACxC,KAAOD,EAAa,GAAKA,GAAcC,EAGvC,OAFiB,GAAb9B,IAAoB6B,GAAcC,GAE/B,CACHjQ,OAAQ,IAAI9B,EAAQuR,EAAMnR,EAAIoR,EAAM7O,EAAI2O,EAAItP,EAAGuP,EAAM5O,EAAI6O,EAAMpR,EAAIkR,EAAIpP,GACvE4N,GAAIA,EACJC,GAAIA,EACJ8B,OAAQA,EACRC,WAAYA,EAEpB,CAUA,SAASE,EAAmBC,EAAMC,GAC9B1R,KAAKgG,KAAKyL,EAAMC,EACpB,CAQAF,EAAmBhR,UAAUwF,KAAO,SAAU2L,EAAMD,GAChD1R,KAAK2R,KAAOA,EACZ3R,KAAK0R,OAASA,EACd1R,KAAK4R,KAAO,CAAC,CACjB,EAEAJ,EAAmBK,KAAO,CAAC,EAC3B,IAAIC,EAASN,EAAmBK,KAchC,SAASE,EAAkBhD,GACvB,OAAOA,EAAOiD,MAAM,KAAKnF,KAAI,SAASoC,GAElC,OADAA,EAAQA,EAAM+C,MAAM,KACb,IAAIxS,EAAQyP,EAAM,GAAIA,EAAM,GACvC,GACJ,CAlBA6C,EAAOG,KAAO,OACdH,EAAOI,KAAO,YACdJ,EAAOK,UAAY,iBACnBL,EAAOM,OAAS,SAChBN,EAAOO,QAAU,UACjBP,EAAOQ,QAAU,UACjBR,EAAOS,SAAW,WAClBT,EAAOU,KAAO,OACdV,EAAOW,IAAM,MACbX,EAAOY,QAAU,UACjBZ,EAAOa,QAAU,UAUjBnB,EAAmB5C,SAAW,SAASgE,EAAgBC,GAGnD,MAAsB,UAFtBD,EAAiBA,EAAeE,eAGrBtB,EAAmBuB,QACtB,IAAIvT,EAAQqT,EAAMG,GAAIH,EAAMI,IAC5B,IAAIzT,EAAQqT,EAAMK,GAAIL,EAAMM,KAId,SAAnBP,EACIC,EAAMvD,GAAK,GAAKuD,EAAMtD,GAAK,EACnBiC,EAAmB4B,aACtBP,EAAMrR,EAAGqR,EAAMnR,EACfmR,EAAMQ,MAAOR,EAAMS,OACnBT,EAAMvD,GAAIuD,EAAMtD,IAGbiC,EAAmB+B,QACtBV,EAAMrR,EAAGqR,EAAMnR,EACfmR,EAAMQ,MAAOR,EAAMS,QAKT,WAAnBV,EACQpB,EAAmBgC,UACtB,IAAIhU,EAAQqT,EAAMY,GAAIZ,EAAMa,IAC5Bb,EAAMpU,GAIQ,YAAnBmU,EACQpB,EAAmBmC,WACtB,IAAInU,EAAQqT,EAAMY,GAAIZ,EAAMa,IAC5Bb,EAAMvD,GAAIuD,EAAMtD,IAIF,YAAnBqD,EACQpB,EAAmBoC,WACtB7B,EAAkBc,EAAM9D,SAIV,aAAnB6D,EACQpB,EAAmBqC,YACtB9B,EAAkBc,EAAM9D,SAIV,SAAnB6D,EACQpB,EAAmBsC,QACtBjB,EAAMhT,QAFd,CAMJ,EAgBA2R,EAAmBuC,OAAS,SAAU3E,EAAYC,EAAUC,EAAIC,EAAIpE,EAAO6I,EAAcvE,GACrF,IAAIrQ,EAAI+P,EAAiBC,EAAYC,EAAUC,EAAIC,EAAIpE,EAAO6I,EAAcvE,GAC5E,OAAO,IAAI+B,EAAmBM,EAAOW,IAAK,CAACrT,EAAEkC,OAAQlC,EAAEkQ,GAAIlQ,EAAEmQ,GAAKpE,EAAQlJ,KAAKgO,GAAK,IAAM7Q,EAAEiS,OAAQjS,EAAEkS,YAC1G,EAWAE,EAAmByC,WAAa,SAAU/O,EAAIC,EAAI+O,GAC9C,OAAO,IAAI1C,EAAmBM,EAAOY,QAAS,CAACxN,EAAIC,EAAI+O,GAC3D,EAYA1C,EAAmB2C,WAAa,SAAUjP,EAAIC,EAAI+O,EAAIE,GAClD,OAAO,IAAI5C,EAAmBM,EAAOa,QAAS,CAACzN,EAAIC,EAAI+O,EAAIE,GAC/D,EAUA5C,EAAmBgC,UAAY,SAAU5T,EAAGnB,GACxC,OAAO,IAAI+S,EAAmBM,EAAOM,OAAQ,CAACxS,EAAGnB,GACrD,EAWA+S,EAAmBmC,WAAa,SAAU/T,EAAG0P,EAAIC,GAC7C,OAAO,IAAIiC,EAAmBM,EAAOO,QAAS,CAACzS,EAAG0P,EAAIC,GAC1D,EAUAiC,EAAmBuB,QAAU,SAAUrP,EAAIE,GACvC,OAAO,IAAI4N,EAAmBM,EAAOG,KAAM,CAACvO,EAAIE,GACpD,EASA4N,EAAmBoC,WAAa,SAAU7E,GACtC,OAAO,IAAIyC,EAAmBM,EAAOQ,QAAS,CAACvD,GACnD,EASAyC,EAAmBqC,YAAc,SAAU9E,GACvC,OAAO,IAAIyC,EAAmBM,EAAOS,SAAU,CAACxD,GACpD,EAaAyC,EAAmB+B,QAAU,SAAU/R,EAAGE,EAAG2R,EAAOC,GAChD,IAAIvE,EAAS,GAKb,OAJAA,EAAO3H,KAAK,IAAI5H,EAAQgC,EAAGE,IAC3BqN,EAAO3H,KAAK,IAAI5H,EAAQgC,EAAI6R,EAAO3R,IACnCqN,EAAO3H,KAAK,IAAI5H,EAAQgC,EAAI6R,EAAO3R,EAAI4R,IACvCvE,EAAO3H,KAAK,IAAI5H,EAAQgC,EAAGE,EAAI4R,IACxB,IAAI9B,EAAmBM,EAAOI,KAAM,CAACnD,GAChD,EAEA,IAAIsF,EAAmB,SAAUlJ,GAC7B,OAAOA,EAAQlJ,KAAKgO,GAAK,GAC7B,EA0CA,SAASqE,EAAM3C,EAAM4C,GACbtO,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK2L,EAAM4C,EAExB,CAjCA/C,EAAmB4B,aAAe,SAAU5R,EAAGE,EAAG2R,EAAOC,EAAQhE,EAAIC,GACjE,GAAW,IAAPD,GAAmB,IAAPC,EACZ,OAAOiC,EAAmB+B,QAAQ/R,EAAGE,EAAG2R,EAAOC,GACxC,IAAPhE,IACAA,EAAKC,GACE,IAAPA,IACAA,EAAKD,GACLA,EAAK+D,EAAQ,IACb/D,EAAK+D,EAAQ,GACb9D,EAAK+D,EAAS,IACdhE,EAAKgE,EAAS,GAClB,IAAI3E,EAAQ,GACRjB,EAAKlM,EAAGwR,EAAKxR,EAAI8N,EAAI4D,EAAK1R,EAAI6R,EAAQ/D,EAAIkF,EAAKhT,EAAI6R,EACnDoB,EAAK/S,EAAGuR,EAAKvR,EAAI6N,EAAI4D,EAAKzR,EAAI4R,EAAS/D,EAAImF,EAAKhT,EAAI4R,EAUxD,OATA3E,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOW,IAAK,CAAC,IAAIjT,EAAQwT,EAAIC,GAAK3D,EAAIC,EAAI,EAAG8E,EAAiB,KAAMA,EAAiB,OACvH1F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOG,KAAM,CAAC,IAAIzS,EAAQwT,EAAIyB,GAAK,IAAIjV,EAAQ0T,EAAIuB,MACrF9F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOW,IAAK,CAAC,IAAIjT,EAAQ0T,EAAID,GAAK3D,EAAIC,EAAI,EAAG8E,GAAkB,IAAKA,EAAiB,OACvH1F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOG,KAAM,CAAC,IAAIzS,EAAQgV,EAAIvB,GAAK,IAAIzT,EAAQgV,EAAIrB,MACrFxE,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOW,IAAK,CAAC,IAAIjT,EAAQ0T,EAAIC,GAAK7D,EAAIC,EAAI,EAAG8E,EAAiB,GAAIA,EAAiB,OACrH1F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOG,KAAM,CAAC,IAAIzS,EAAQ0T,EAAIwB,GAAK,IAAIlV,EAAQwT,EAAI0B,MACrF/F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOW,IAAK,CAAC,IAAIjT,EAAQwT,EAAIG,GAAK7D,EAAIC,EAAI,EAAG8E,EAAiB,IAAKA,EAAiB,OACtH1F,EAAMvH,KAAK,IAAIoK,EAAmBM,EAAOG,KAAM,CAAC,IAAIzS,EAAQkO,EAAIyF,GAAK,IAAI3T,EAAQkO,EAAIuF,MACrFtE,EAAMA,EAAMrP,OAAS,GAAGsS,KAAK+C,WAAY,EAClC,IAAInD,EAAmBM,EAAOK,UAAW,CAACxD,GACrD,EAUA2F,EAAM9T,UAAUwF,KAAO,SAAS2L,EAAM4C,GAClCvU,KAAK2R,KAAOA,EACZ3R,KAAKuU,KAAOA,CAChB,EACAD,EAAM9T,UAAUoU,OAAS,SAASjD,GAC9B,OAAO3R,KAAK2R,MAAQA,CACxB,EACA,IAAIkD,EAAO,CAAC,EA2BZ,SAASC,EAASjV,GAEd,IADA,IAAIkV,EAAS,IAAIvO,MACL,IAAL3G,GACH,GAAIA,EAAEmV,MAAM,kBACRnV,EAAIA,EAAEoV,OAAOC,OAAOC,GAAG7V,aACpB,GAAIO,EAAEmV,MAAM,6BACfD,EAAOA,EAAOzV,QAAU,IAAIgV,EAAMO,EAAKO,QAASF,OAAOC,IACvDtV,EAAIA,EAAEoV,OAAOC,OAAOC,GAAG7V,YACpB,KAAIO,EAAEmV,MAAM,+DAIf,MAAM,IAAI9V,MAAM,iCAAmCW,GAHnDkV,EAAOA,EAAOzV,QAAU,IAAIgV,EAAMO,EAAKQ,OAAQC,WAAWJ,OAAOC,KACjEtV,EAAIA,EAAEoV,OAAOC,OAAOC,GAAG7V,OAG3B,CAGJ,OADAyV,EAAOA,EAAOzV,QAAU,IAAIgV,EAAMO,EAAKU,IAAK,MACrCR,CACX,CAmHA,SAASS,EAAoBC,EAAS/D,EAAQgE,GACtCzP,UAAU3G,OAAS,GAAGU,KAAKgG,KAAKyP,EAAS/D,EAAQgE,EACzD,CAoBA,SAASC,EAAgBjE,EAAQgE,GACzBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CA4BA,SAASE,EAAiBlE,EAAQgE,GAC1BzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAWA,SAASG,EAAiBnE,EAAQgE,GAC1BzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAaA,SAASI,EAAgBpE,EAAQgE,GACzBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAYA,SAASK,EAAgBrE,EAAQgE,GACzBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAaA,SAASM,EAAetE,EAAQgE,GACxBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAWA,SAASO,EAAevE,EAAQgE,GACxBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAMA,SAASQ,EAAuBxE,EAAQgE,GAChCzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAsBA,SAASS,EAAuBzE,EAAQgE,GAChCzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAyBA,SAASU,EAAoBX,EAAS/D,EAAQgE,GACtCzP,UAAU3G,OAAS,GAAGU,KAAKgG,KAAKyP,EAAS/D,EAAQgE,EACzD,CAoBA,SAASW,EAAkB3E,EAAQgE,GAC3BzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAqBA,SAASY,EAAiB5E,EAAQgE,GAC1BzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAaA,SAASa,EAAiB7E,EAAQgE,GAC1BzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAaA,SAASc,EAAe9E,EAAQgE,GACxBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAuBA,SAASe,EAAe/E,EAAQgE,GACxBzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAOA,SAASgB,EAAuBhF,EAAQgE,GAChCzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CAuBA,SAASiB,EAAuBjF,EAAQgE,GAChCzP,UAAU3G,OAAS,GACnBU,KAAKgG,KAAK,IAAK0L,EAAQgE,EAE/B,CA3fAb,EAAKO,QAAU,EACfP,EAAKQ,OAAS,EACdR,EAAKU,IAAM,EACXV,EAAK+B,OAAS,CACVC,EAAG,CAAC,KAAM,KAAM,kBAAmB,iBAAkB,aAAc,IAAK,KACxE5X,EAAG,CAAC,KAAM,KAAM,kBAAmB,iBAAkB,aAAc,IAAK,KACxE6X,EAAG,CAAC,KAAM,KAAM,KAAM,KAAM,IAAK,KACjClX,EAAG,CAAC,KAAM,KAAM,KAAM,KAAM,IAAK,KACjC2D,EAAG,CAAC,KACJqG,EAAG,CAAC,KACJmN,EAAG,CAAC,IAAK,KACTC,EAAG,CAAC,IAAK,KACTC,EAAG,CAAC,IAAK,KACTnQ,EAAG,CAAC,IAAK,KACTtD,EAAG,CAAC,KAAM,KAAM,IAAK,KACrB0T,EAAG,CAAC,KAAM,KAAM,IAAK,KACrBC,EAAG,CAAC,KAAM,KAAM,IAAK,KACrBhV,EAAG,CAAC,KAAM,KAAM,IAAK,KACrBiV,EAAG,CAAC,IAAK,KACTxY,EAAG,CAAC,IAAK,KACTyY,EAAG,CAAC,KACJ3K,EAAG,CAAC,KACJ4K,EAAG,GACHC,EAAG,IAsBP/F,EAAmBsC,QAAU,SAASjU,GAOlC,IANA,IAAIkV,EAASD,EAASjV,GAClB2X,EAAQ,EACRC,EAAQ1C,EAAOyC,GACfE,EAAO,MACPC,EAAW,IAEPF,EAAM7C,OAAOC,EAAKU,MAAM,CAC5B,IAAIqC,EACAlG,EAAS,IAAIlL,MACjB,GAAY,OAARkR,EAAe,CACf,GAAkB,KAAdD,EAAMlD,MAA6B,KAAdkD,EAAMlD,KAK3B,MAAM,IAAIrV,MAAM,8CAJhBsY,IACAI,EAAe/C,EAAK+B,OAAOa,EAAMlD,MAAMjV,OACvCoY,EAAOD,EAAMlD,IAIrB,MACQkD,EAAM7C,OAAOC,EAAKQ,QAClBuC,EAAe/C,EAAK+B,OAAOc,GAAMpY,QAEjCkY,IACAI,EAAe/C,EAAK+B,OAAOa,EAAMlD,MAAMjV,OACvCoY,EAAOD,EAAMlD,MAGrB,KAAKiD,EAAQI,EAAgB7C,EAAOzV,QAsEhC,MAAM,IAAIJ,MAAM,oDArEhB,IAAK,IAAIJ,EAAI0Y,EAAO1Y,EAAI0Y,EAAQI,EAAc9Y,IAAK,CAC/C,IAAI+Y,EAAS9C,EAAOjW,GACpB,IAAI+Y,EAAOjD,OAAOC,EAAKQ,QAClB,MAAM,IAAInW,MAAM,mCAAqCwY,EAAO,IAAMG,EAAOtD,MAD9C7C,EAAOA,EAAOpS,QAAUuY,EAAOtD,IAEnE,CACA,IAAIuD,EACAxY,EAASqY,EAASrY,OAClBoW,EAAsB,GAAVpW,EAAe,KAAOqY,EAASrY,EAAS,GACxD,OAAQoY,GACJ,IAAK,IACDI,EAAU,IAAInC,EAAgBjE,EAAQgE,GACtC,MACJ,IAAK,IACDoC,EAAU,IAAIjC,EAAiBnE,EAAQgE,GACvC,MACJ,IAAK,IACDoC,EAAU,IAAIvB,EAAiB7E,EAAQgE,GACvC,MACJ,IAAK,IACDoC,EAAU,IAAIhC,EAAgBpE,EAAQgE,GACtC,MACJ,IAAK,IACDoC,EAAU,IAAI/B,EAAgBrE,EAAQgE,GACtC,MACJ,IAAK,IACDoC,EAAU,IAAI9B,EAAetE,EAAQgE,GACrC,MACJ,IAAK,IACDoC,EAAU,IAAItB,EAAe9E,EAAQgE,GACrC,MACJ,IAAK,IACDoC,EAAU,IAAI7B,EAAevE,EAAQgE,GACrC,MACJ,IAAK,IACDoC,EAAU,IAAIrB,EAAe/E,EAAQgE,GACrC,MACJ,IAAK,IACDoC,EAAU,IAAIlC,EAAiBlE,EAAQgE,GACvC,MACJ,IAAK,IACDoC,EAAU,IAAIxB,EAAiB5E,EAAQgE,GACvC,MACJ,IAAK,IACDoC,EAAU,IAAI3B,EAAuBzE,EAAQgE,GAC7C,MACJ,IAAK,IACDoC,EAAU,IAAInB,EAAuBjF,EAAQgE,GAC7C,MACJ,IAAK,IACDoC,EAAU,IAAI5B,EAAuBxE,EAAQgE,GAC7C,MACJ,IAAK,IACDoC,EAAU,IAAIpB,EAAuBhF,EAAQgE,GAC7C,MACJ,IAAK,IAGL,IAAK,IACDoC,EAAU,IAAIzB,EAAkB3E,EAAQgE,GACxC,MACJ,QACI,MAAM,IAAIxW,MAAM,6BAA+BwY,GAEvDC,EAASvQ,KAAK0Q,GAEdL,EAAQ1C,EADRyC,GAASI,GAEG,KAARF,IAAaA,EAAO,KACZ,KAARA,IAAaA,EAAO,IAIhC,CAEA,IAAIK,EAAgB,GACpB,IAAIjZ,EAAE,EAAGA,EAAE6Y,EAASrY,OAAQR,IAAK,CAC7B,IAAIkZ,EAAKL,EAAS7Y,GAAGmZ,wBAClBD,GACCD,EAAc3Q,KAAK4Q,EAE3B,CAEA,OAAO,IAAIxG,EAAmBM,EAAOU,KAAM,CAACuF,GAChD,EAMAvC,EAAoBhV,UAAUwF,KAAO,SAASyP,EAAS/D,EAAQgE,GAC3D1V,KAAKyV,QAAUA,EACfzV,KAAK0V,SAAWA,EAChB1V,KAAK+O,OAAS,GAEd,IADA,IAAIyI,EAAQ,EACLA,EAAQ9F,EAAOpS,QAClBU,KAAK+O,OAAO3H,KAAK,IAAI5H,EAAQkS,EAAO8F,GAAQ9F,EAAO8F,EAAQ,KAC3DA,GAAS,CAEjB,EACAhC,EAAoBhV,UAAU0X,aAAe,WACzC,OAAOlY,KAAK+O,OAAO/O,KAAK+O,OAAOzP,OAAS,EAC5C,EACAkW,EAAoBhV,UAAUyX,sBAAwB,WAClD,OAAO,IACX,EASAtC,EAAgBnV,UAAY,IAAIgV,EAChCG,EAAgBnV,UAAUG,YAAciV,EACxCD,EAAgBlH,WAAa+G,EAAoBhV,UAEjDmV,EAAgBnV,UAAUwF,KAAO,SAASyP,EAAS/D,EAAQgE,GACvD,IAAIzG,EAAQ,IAAIzI,MACZ9E,EAAIgQ,EAAOxJ,MACX1G,EAAIkQ,EAAOxJ,MACf+G,EAAM7H,KAAK5F,EAAGE,GACdiU,EAAgBlH,WAAWzI,KAAK3G,KAAKW,KAAMyV,EAASxG,EAAOyG,GAC3D1V,KAAKsP,GAAKgG,WAAW5D,EAAOyG,SAC5BnY,KAAKuP,GAAK+F,WAAW5D,EAAOyG,SAC5BnY,KAAKmL,MAAQmK,WAAW5D,EAAOyG,SAC/BnY,KAAKwP,QAAU8F,WAAW5D,EAAOyG,SACjCnY,KAAKyP,UAAY6F,WAAW5D,EAAOyG,QACvC,EACAxC,EAAgBnV,UAAUyX,sBAAwB,WAC9C,OAAOzG,EAAmBuC,OAAO/T,KAAK0V,SAASwC,eACdlY,KAAK+O,OAAO,GACZ/O,KAAKsP,GACLtP,KAAKuP,GACLvP,KAAKmL,MACLnL,KAAKwP,QACLxP,KAAKyP,UAC1C,EAQAmG,EAAiBpV,UAAY,IAAIgV,EACjCI,EAAiBpV,UAAUG,YAAciV,EACzCA,EAAiBnH,WAAa+G,EAAoBhV,UAElDoV,EAAiBpV,UAAUyX,sBAAwB,WAC/C,OAAOzG,EAAmByC,WAAWjU,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GACnG,EASA8G,EAAiBrV,UAAY,IAAIgV,EACjCK,EAAiBrV,UAAUG,YAAckV,EACzCA,EAAiBpH,WAAa+G,EAAoBhV,UAElDqV,EAAiBrV,UAAU4X,oBAAsB,WAC7C,OAAOpY,KAAK+O,OAAO,EACvB,EACA8G,EAAiBrV,UAAUyX,sBAAwB,WAC/C,OAAOzG,EAAmB2C,WAAWnU,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GACnH,EAQA+G,EAAgBtV,UAAY,IAAIgV,EAChCM,EAAgBtV,UAAUG,YAAcmV,EACxCA,EAAgBrH,WAAa+G,EAAoBhV,UAEjDsV,EAAgBtV,UAAUwF,KAAO,SAASyP,EAAS/D,EAAQgE,GACvD,IAAI2C,EAAY3C,EAASwC,eACrBjJ,EAAQ,IAAIzI,MAChByI,EAAM7H,KAAKsK,EAAOxJ,MAAOmQ,EAAU3W,GACnCoU,EAAgBrH,WAAWzI,KAAK3G,KAAKW,KAAMyV,EAASxG,EAAOyG,EAC/D,EAOAK,EAAgBvV,UAAY,IAAIgV,EAChCO,EAAgBvV,UAAUG,YAAcoV,EACxCA,EAAgBtH,WAAa+G,EAAoBhV,UAEjDuV,EAAgBvV,UAAUwF,KAAO,SAASyP,EAAS/D,EAAQgE,GACvD,IAAI2C,EAAY3C,EAASwC,eACrBjJ,EAAQ,IAAIzI,MAChByI,EAAM7H,KAAKiR,EAAU7W,EAAGkQ,EAAOxJ,OAC/B6N,EAAgBtH,WAAWzI,KAAK3G,KAAKW,KAAMyV,EAASxG,EAAOyG,EAC/D,EAQAM,EAAexV,UAAY,IAAIgV,EAC/BQ,EAAexV,UAAUG,YAAcqV,EACvCA,EAAevH,WAAa+G,EAAoBhV,UAEhDwV,EAAexV,UAAUyX,sBAAwB,WAC7C,OAAOzG,EAAmBuB,QAAQ/S,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAChF,EASAkH,EAAezV,UAAY,IAAIgV,EAC/BS,EAAezV,UAAUG,YAAcsV,EACvCA,EAAexH,WAAa+G,EAAoBhV,UAQhD0V,EAAuB1V,UAAY,IAAIgV,EACvCU,EAAuB1V,UAAUG,YAAcuV,EAC/CA,EAAuBzH,WAAa+G,EAAoBhV,UAExD0V,EAAuB1V,UAAU8X,gBAAkB,WAC/C,IACIrJ,EADAsJ,EAAYvY,KAAK0V,SAASwC,eAE9B,GAAIlY,KAAK0V,SAASD,QAAQT,MAAM,YAAa,CACzC,IACIrO,EADY3G,KAAK0V,SAAS4C,kBACT/T,SAASgU,GAC9BtJ,EAAQsJ,EAAUhU,SAASoC,EAC/B,MACIsI,EAAQsJ,EAEZ,OAAOtJ,CACX,EACAiH,EAAuB1V,UAAUyX,sBAAwB,WACrD,OAAOzG,EAAmByC,WAAWjU,KAAK0V,SAASwC,eAAgBlY,KAAKsY,kBAAmBtY,KAAK+O,OAAO,GAC3G,EAQAoH,EAAuB3V,UAAY,IAAIgV,EACvCW,EAAuB3V,UAAUG,YAAcwV,EAC/CA,EAAuB1H,WAAa+G,EAAoBhV,UAExD2V,EAAuB3V,UAAUgY,qBAAuB,WACpD,IACIvJ,EADAsJ,EAAYvY,KAAK0V,SAASwC,eAE9B,GAAIlY,KAAK0V,SAASD,QAAQT,MAAM,YAAa,CACzC,IACIrO,EADc3G,KAAK0V,SAAS0C,sBACT7T,SAASgU,GAChCtJ,EAAQsJ,EAAUhU,SAASoC,EAC/B,MACIsI,EAAQsJ,EAEZ,OAAOtJ,CACX,EACAkH,EAAuB3V,UAAU4X,oBAAsB,WACnD,OAAOpY,KAAK+O,OAAO,EACvB,EACAoH,EAAuB3V,UAAUyX,sBAAwB,WACrD,OAAOzG,EAAmB2C,WAAWnU,KAAK0V,SAASwC,eAAgBlY,KAAKwY,uBAAwBxY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GAChI,EAMAqH,EAAoB5V,UAAY,IAAIgV,EACpCY,EAAoB5V,UAAUG,YAAcyV,EAC5CA,EAAoB3H,WAAa+G,EAAoBhV,UAErD4V,EAAoB5V,UAAUwF,KAAO,SAASyP,EAAS/D,EAAQgE,GAI3D,IAAI6C,EAHJvY,KAAKyV,QAAUA,EACfzV,KAAK0V,SAAWA,EAChB1V,KAAK+O,OAAS,GAEKwJ,EAAfvY,KAAK0V,SAAsB1V,KAAK0V,SAASwC,eAC5B,IAAI1Y,EAAQ,EAAG,GAEhC,IADA,IAAIgY,EAAQ,EACLA,EAAQ9F,EAAOpS,QAAQ,CAC1B,IAAI2P,EAAQ,IAAIzP,EAAQ+Y,EAAU/W,EAAIkQ,EAAO8F,GAAQe,EAAU7W,EAAIgQ,EAAO8F,EAAQ,IAClFxX,KAAK+O,OAAO3H,KAAK6H,GACjBuI,GAAS,CACb,CACJ,EAOAnB,EAAkB7V,UAAY,IAAI4V,EAClCC,EAAkB7V,UAAUG,YAAc0V,EAC1CA,EAAkB5H,WAAa2H,EAAoB5V,UACnD6V,EAAkB7V,UAAU0X,aAAe,WAGvC,IAFA,IACIjJ,EADAwJ,EAAUzY,KAAK0V,SAEZ+C,GAAS,CACZ,GAAIA,EAAQhD,QAAQT,MAAM,YAAa,CACnC/F,EAAQwJ,EAAQP,eAChB,KACJ,CACAO,EAAUA,EAAQ/C,QACtB,CACA,OAAOzG,CACX,EACAoH,EAAkB7V,UAAUyX,sBAAwB,WAChD,OAAOzG,EAAmBuB,QAAQ/S,KAAK0V,SAASwC,eAAgBlY,KAAKkY,eACzE,EAQA5B,EAAiB9V,UAAY,IAAI4V,EACjCE,EAAiB9V,UAAUG,YAAc2V,EACzCA,EAAiB7H,WAAa2H,EAAoB5V,UAElD8V,EAAiB9V,UAAU8X,gBAAkB,WACzC,OAAOtY,KAAK+O,OAAO,EACvB,EACAuH,EAAiB9V,UAAUyX,sBAAwB,WAC/C,OAAOzG,EAAmByC,WAAWjU,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GACnG,EAQAwH,EAAiB/V,UAAY,IAAI4V,EACjCG,EAAiB/V,UAAUG,YAAc4V,EACzCA,EAAiB9H,WAAa2H,EAAoB5V,UAElD+V,EAAiB/V,UAAU4X,oBAAsB,WAC7C,OAAOpY,KAAK+O,OAAO,EACvB,EACAwH,EAAiB/V,UAAUyX,sBAAwB,WAC/C,OAAOzG,EAAmB2C,WAAWnU,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GACnH,EAQAyH,EAAehW,UAAY,IAAI4V,EAC/BI,EAAehW,UAAUG,YAAc6V,EACvCA,EAAe/H,WAAa2H,EAAoB5V,UAEhDgW,EAAehW,UAAU2D,SAAW,WAChC,IAEIoU,EACAtJ,EAMJ,OATa,IAAIzI,MAIE+R,EAAfvY,KAAK0V,SAAsB1V,KAAK0V,SAASwC,eAC5B,IAAIQ,MAAM,EAAG,GAC9BzJ,EAAQjP,KAAK+O,OAAO,GAAGxK,SAASgU,GAC5BvY,KAAK0V,SAAS/U,aAAeX,KAAK2Y,YAC9B3Y,KAAK0V,SAAS/U,aAAe8V,IAAgBmC,IAAM5Y,KAAKyV,SACzDmD,IAAM3J,EAAM9K,UACvB,EACAqS,EAAehW,UAAUyX,sBAAwB,WAC7C,OAAOzG,EAAmBuB,QAAQ/S,KAAK0V,SAASwC,eAAgBlY,KAAK+O,OAAO,GAChF,EASA0H,EAAejW,UAAY,IAAI4V,EAC/BK,EAAejW,UAAUG,YAAc8V,EACvCA,EAAehI,WAAa2H,EAAoB5V,UAShDkW,EAAuBlW,UAAY,IAAI4V,EACvCM,EAAuBlW,UAAUG,YAAc+V,EAC/CA,EAAuBjI,WAAa2H,EAAoB5V,UAExDkW,EAAuBlW,UAAU8X,gBAAkB,WAC/C,IACIrJ,EADAsJ,EAAYvY,KAAK0V,SAASwC,eAE9B,GAAIlY,KAAK0V,SAASD,QAAQT,MAAM,YAAa,CACzC,IACIrO,EADY3G,KAAK0V,SAAS4C,kBACT/T,SAASgU,GAC9BtJ,EAAQsJ,EAAUhU,SAASoC,EAC/B,MACIsI,EAAQsJ,EAEZ,OAAOtJ,CACX,EACAyH,EAAuBlW,UAAUyX,sBAAwB,WACrD,OAAOzG,EAAmByC,WAAWjU,KAAK0V,SAASwC,eAAgBlY,KAAKsY,kBAAmBtY,KAAK+O,OAAO,GAC3G,EASA4H,EAAuBnW,UAAY,IAAI4V,EACvCO,EAAuBnW,UAAUG,YAAcgW,EAC/CA,EAAuBlI,WAAa2H,EAAoB5V,UAExDmW,EAAuBnW,UAAUgY,qBAAuB,WACpD,IACIvJ,EADAsJ,EAAYvY,KAAK0V,SAASwC,eAE9B,GAAIlY,KAAK0V,SAASD,QAAQT,MAAM,YAAa,CACzC,IACIrO,EADc3G,KAAK0V,SAAS0C,sBACT7T,SAASgU,GAChCtJ,EAAQsJ,EAAUhU,SAASoC,EAC/B,MACIsI,EAAQsJ,EAEZ,OAAOtJ,CACX,EACA0H,EAAuBnW,UAAU4X,oBAAsB,WACnD,OAAOpY,KAAK+O,OAAO,EACvB,EACA4H,EAAuBnW,UAAUyX,sBAAwB,WACrD,OAAOzG,EAAmB2C,WAAWnU,KAAK0V,SAASwC,eAAgBlY,KAAKwY,uBAAwBxY,KAAK+O,OAAO,GAAI/O,KAAK+O,OAAO,GAChI,EAGAxQ,EAAOC,QAAUgT,CAEjB,EAAE,CAAC,aAAa,IAAI,GAAG,CAAC,SAASjS,EAAQhB,EAAOC,GAChD,IAAIqQ,EAAetP,EAAQ,mBAEvBsZ,EAAStZ,EAAQ,cACjBC,EAAUqZ,EAAOrZ,QACjBC,EAAWoZ,EAAOpZ,SAElBqG,EAAavG,EAAQ,kBAAkBuG,WAE3C,SAASgT,EAAwBxO,GAC7B,IAAIQ,EAAc,MAClBR,EAAMqB,MAAK,SAAU1M,EAAGU,GAAK,OAAOV,EAAIU,CAAG,IAC3C,IAAK,IAAIb,EAAI,EAAGA,EAAIwL,EAAMhL,QAClB2C,KAAK2E,IAAI0D,EAAMxL,GAAKwL,EAAMxL,EAAI,IAAMgM,EACpCR,EAAMyO,OAAOja,EAAG,GAGhBA,GAGZ,CAEAP,EAAOC,QAAU,CAAC,EAalBD,EAAOC,QAAQwa,wBAA0B,SAAStV,EAAIE,EAAIqV,EAAIC,EAAIC,EAAIC,GAClE,IAAIna,EAAGU,EACH0Z,EAAKC,EAAKC,EACVC,EAAKC,EAAKC,EAEVpO,EAoBAqO,EAAI9R,EAAIC,EAAI8R,EAAIC,EAAIC,EAAIC,EArBxBvS,EAAS,IAAIqH,EAGjB5P,EAAI2E,EAAGnD,UAAU,GACjB4Y,EAAM3V,EAAGY,IAAIrF,EAAEqF,IAAI2U,IAEnBha,EAAIyE,EAAGjD,UAAU,GACjBd,EAAIiE,EAAGnD,SAAS,GAChB6Y,EAAMra,EAAEqF,IAAI3E,GAEZ4Z,EAAM,IAAI/Z,EAAQkE,EAAGlC,EAAGkC,EAAGhC,GAE3BzC,EAAIka,EAAG1Y,UAAU,GACjB+Y,EAAMN,EAAG5U,IAAIrF,EAAEqF,IAAI8U,IAEnBna,EAAIia,EAAGzY,UAAU,GACjBd,EAAIwZ,EAAG1Y,SAAS,GAChBgZ,EAAMxa,EAAEqF,IAAI3E,GAEZ+Z,EAAM,IAAIla,EAAQ0Z,EAAG1X,EAAG0X,EAAGxX,GAGZ,IAAV2X,EAAI3X,GAGLoG,GAFA6R,EAAKN,EAAI7X,GAAG+X,EAAI7X,EAAIgY,EAAIhY,KACxBmG,EAAK8R,EAAKL,EAAI9X,EAAE8X,EAAI5X,GAEpBkY,EAAKN,EAAI5X,EAAE4X,EAAI5X,EAEf4J,EAAO,IAAIxF,EACPuT,EAAI7X,EAAEgY,EAAI9X,EAAE8X,EAAI9X,EAChB,EAAE2X,EAAI7X,EAAEiY,EAAI/X,EAAE8X,EAAI9X,EAClB2X,EAAI7X,EAAEiY,EAAI/X,EAAE+X,EAAI/X,EAAI8X,EAAIhY,EAAEoY,EAAKJ,EAAI9X,EAAEiY,EAAKH,EAAI9X,EAAEmG,GAC/C4R,EAAIjY,EAAEoY,EAAKH,EAAI/X,EAAEiY,EAAKF,EAAI/X,EAAEmG,GAC5B0R,EAAI/X,EAAIkY,EAAIlY,GAAGoY,GAAML,EAAI7X,EAAIgY,EAAIhY,GAAGmG,KAGzC8R,EAAKN,EAAI7X,EAAEgY,EAAI9X,EAAI2X,EAAI3X,EAAE8X,EAAIhY,EAC7BqG,EAAKwR,EAAI7X,EAAEiY,EAAI/X,EAAI+X,EAAIjY,EAAE6X,EAAI3X,EAC7BoG,EAAKwR,EAAI9X,EAAE6X,EAAI3X,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAC7BoY,EAAKL,EAAI7X,EAAIgY,EAAIhY,EACjBmY,EAAKR,EAAI3X,GAAG6X,EAAI/X,EAAIkY,EAAIlY,GAAK6X,EAAI7X,EAAEoY,EACnCE,GAAMR,EAAI5X,EAAEoG,EAAKuR,EAAI3X,EAAEmY,EACvBE,EAAKjS,EAAGA,EAERwD,EAAO,IAAIxF,EACP6T,EAAGA,EACH,EAAEA,EAAG9R,IACH2R,EAAI9X,EAAEqY,EAAKV,EAAI3X,EAAEmG,EAAGA,EAAKwR,EAAI3X,EAAEiY,EAAGE,EAAKF,EAAGG,GAAMT,EAAI3X,IACpD+X,EAAI/X,EAAEqY,EAAKV,EAAI3X,EAAEmG,EAAGgS,EAAKhS,EAAGiS,GAAMT,EAAI3X,GACvCkY,EAAGG,EAAKF,EAAGC,GAAMT,EAAI3X,IAK9B,IADA,IAAI4I,EAAQgB,EAAKvB,WACPjL,EAAI,EAAGA,EAAIwL,EAAMhL,OAAQR,IAAM,CACrC,IAAIqD,EAAImI,EAAMxL,GAEd,GAAK,GAAKqD,GAAKA,GAAK,EAAI,CACpB,IAAI6X,EAAS,IAAIlU,EACbuT,EAAI7X,EACJ8X,EAAI9X,EACJ+X,EAAI/X,EAAIkY,EAAIlY,EAAIW,EAAEsX,EAAIjY,EAAIW,EAAEA,EAAEqX,EAAIhY,GACpCuI,WACEkQ,EAAS,IAAInU,EACbuT,EAAI3X,EACJ4X,EAAI5X,EACJ6X,EAAI7X,EAAIgY,EAAIhY,EAAIS,EAAEsX,EAAI/X,EAAIS,EAAEA,EAAEqX,EAAI9X,GACpCqI,WAEF,GAAKiQ,EAAO1a,OAAS,GAAK2a,EAAO3a,OAAS,EAAI,CAC1C,IAAI4G,EAAY,KAEhBgU,EACI,IAAM,IAAInS,EAAI,EAAGA,EAAIiS,EAAO1a,OAAQyI,IAAM,CACtC,IAAIoS,EAAQH,EAAOjS,GAEnB,GAAK,GAAKoS,GAASA,GAAS,EACxB,IAAM,IAAIC,EAAI,EAAGA,EAAIH,EAAO3a,OAAQ8a,IAChC,GAAKnY,KAAK2E,IAAKuT,EAAQF,EAAOG,IAAOlU,EAAY,CAC7CsB,EAAOuH,OAAO3H,KAAMoS,EAAI/Y,SAAS0B,EAAEA,GAAGmC,IAAImV,EAAIhZ,SAAS0B,GAAGmC,IAAIoV,KAC9D,MAAMQ,CACV,CAGZ,CACR,CACJ,CACJ,CAEA,OAAO1S,CACX,EAeAjJ,EAAOC,QAAQ6b,wBAA0B,SAAS3W,EAAIE,EAAIqV,EAAIC,EAAIC,EAAIC,EAAIkB,GACtE,IAAIrb,EAAGU,EAAEC,EAAGC,EACRwZ,EAAKC,EAAKC,EACVgB,EAAKf,EAAKC,EAAKC,EACflS,EAAS,IAAIqH,EAEjB5P,EAAI2E,EAAGnD,UAAU,GACjB4Y,EAAM3V,EAAGY,IAAIrF,EAAEqF,IAAI2U,IAEnBha,EAAIyE,EAAGjD,UAAU,GACjBd,EAAIiE,EAAGnD,SAAS,GAChB6Y,EAAMra,EAAEqF,IAAI3E,GAEZ4Z,EAAM,IAAI/Z,EAAQkE,EAAGlC,EAAGkC,EAAGhC,GAE3BzC,EAAIia,EAAGzY,UAAU,GACjBd,EAAIwZ,EAAG1Y,SAAS,GAChBb,EAAIwZ,EAAG3Y,UAAU,GACjBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,EAAE0E,IAAIgW,KACtBC,EAAM,IAAI9a,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIia,EAAGzY,SAAS,GAChBd,EAAIwZ,EAAG1Y,UAAU,GACjBb,EAAIwZ,EAAG3Y,SAAS,GAChBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,IAChB4Z,EAAM,IAAI/Z,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIia,EAAGzY,UAAU,GACjBd,EAAIwZ,EAAG1Y,SAAS,GAChBb,EAAIX,EAAEqF,IAAI3E,GACV8Z,EAAM,IAAIha,EAASG,EAAE4B,EAAG5B,EAAE8B,GAE1BgY,EAAM,IAAIja,EAASyZ,EAAG1X,EAAG0X,EAAGxX,GAE5B,IAAI8Y,EAAQjB,EAAI/X,EAAE+X,EAAI/X,EAClBiZ,EAAQlB,EAAI7X,EAAE6X,EAAI7X,EAClBgZ,EAAQpB,EAAI9X,EAAE8X,EAAI9X,EAClBmZ,EAAQrB,EAAI5X,EAAE4X,EAAI5X,EAClBkZ,EAAQvB,EAAI7X,EAAE6X,EAAI7X,EAClBqZ,EAAQxB,EAAI3X,EAAE2X,EAAI3X,EAClBoZ,EAAQpB,EAAIlY,EAAEkY,EAAIlY,EAClBuZ,EAAQrB,EAAIhY,EAAEgY,EAAIhY,EAClBsZ,EAAQvB,EAAIjY,EAAEiY,EAAIjY,EAClByZ,EAAQxB,EAAI/X,EAAE+X,EAAI/X,EAClBwZ,EAAQ1B,EAAIhY,EAAEgY,EAAIhY,EAClB2Z,EAAQ3B,EAAI9X,EAAE8X,EAAI9X,EAClB0Z,EAAQb,EAAI/Y,EAAE+Y,EAAI/Y,EAClB6Z,EAAQd,EAAI7Y,EAAE6Y,EAAI7Y,EA6BlB4I,EA3BO,IAAIxE,GACV,EAAEuT,EAAI7X,EAAE6X,EAAI3X,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAIkZ,EAAMS,EAAQR,EAAMO,GAChD,EAAE/B,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAE+Y,EAAI7Y,EAAI,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAEqZ,EAAMrB,EAAIhY,EAAE+Y,EAAI/Y,EACvE,EAAEoZ,EAAMpB,EAAI9X,EAAE6Y,EAAI7Y,GACrB,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE6Y,EAAI7Y,EAAI,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAE6Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEgY,EAAI9X,EAC7E,EAAE+X,EAAIjY,EAAEqZ,EAAMN,EAAI/Y,EAAIqZ,EAAMK,EAAQN,GAAO,EAAEnB,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAC/D,EAAE5B,EAAI/X,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE6Y,EAAI/Y,EAAI8X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE+Y,EAAI7Y,EAC1E4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE6Y,EAAI/Y,EAAI,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE6Y,EAAI7Y,EAAI,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAE6Y,EAAI/Y,EAC9E,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE8X,EAAI9X,EAAI,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAE8X,EAAIhY,EAAI,EAAE+X,EAAI/X,EAAEqZ,EAAMN,EAAI/Y,EAC1E,EAAE+X,EAAI7X,EAAEkZ,EAAML,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAEqZ,EAAMN,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAEqZ,EAAMrB,EAAIhY,EAC9DmZ,EAAMtB,EAAI7X,EAAE+Y,EAAI/Y,EAAIkZ,EAAMrB,EAAI3X,EAAE6Y,EAAI7Y,EAAIkZ,GAAO,EAAElB,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAC/E,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAI8X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgY,EAAI9X,EAC1E4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE8X,EAAIhY,EAAI,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAI9X,EAAI,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAE8X,EAAIhY,EAC9E,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAI,EAAE6X,EAAI/X,EAAEqZ,EAAMrB,EAAIhY,EAAI,EAAE+X,EAAI7X,EAAEkZ,EAAMpB,EAAI9X,EACpE,EAAEgY,EAAIlY,EAAEqZ,EAAMrB,EAAIhY,EAAImZ,EAAMtB,EAAI7X,EAAEgY,EAAIhY,EAAIkZ,EAAMrB,EAAI3X,EAAE8X,EAAI9X,EAAIsZ,EAAMH,EACpED,GAAO,EAAElB,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAC3B,EAAE1B,EAAI/X,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAI,EAAE6X,EAAI7X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAI/X,EAC1E4X,EAAI9X,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAI,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAC9E,EAAE6X,EAAI/X,EAAEiY,EAAIjY,EAAEqZ,EAAQ,EAAEtB,EAAI7X,EAAEkZ,EAAMnB,EAAI/X,EAAI,EAAEgY,EAAIlY,EAAEiY,EAAIjY,EAAEqZ,EAC1DF,EAAMtB,EAAI7X,EAAEiY,EAAIjY,EAAIkZ,EAAMrB,EAAI3X,EAAE+X,EAAI/X,EAAI,EAAEkZ,EAAMlB,EAAIhY,EAAE+X,EAAI/X,GAC7D,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAI6X,EAAI/X,EAAE8X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAI6X,EAAI7X,EAAE4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EACzE,EAAE+X,EAAI/X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAE6X,EAAI3X,EAAI4X,EAAI9X,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAC9E4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEqZ,EACpEtB,EAAI/X,EAAEmZ,EAAMtB,EAAI7X,EAAI+X,EAAI7X,EAAEgZ,EAAMrB,EAAI3X,EAAI,EAAE6X,EAAI7X,EAAEkZ,EAAMlB,EAAIhY,EAC1DgY,EAAIlY,EAAEmZ,EAAMtB,EAAI7X,EAAIkZ,EAAMhB,EAAIhY,EAAE2X,EAAI3X,EAAI8Y,EAAMK,EAAQJ,EAAMG,EAC5DE,EAAMD,EAAQD,EAAMG,GAEX3Q,mBAAmB,EAAE,GACtC0O,EAAwBxO,GAExB,IAAM,IAAIxL,EAAI,EAAGA,EAAIwL,EAAMhL,OAAQR,IAAM,CACrC,IAAIqD,EAAImI,EAAMxL,GACVkb,EAAS,IAAIlU,EACbuT,EAAI7X,EACJ8X,EAAI9X,EACJ+X,EAAI/X,EAAIkY,EAAIlY,EAAIW,EAAEsX,EAAIjY,EAAIW,EAAEA,EAAEqX,EAAIhY,EAAIW,EAAEA,EAAEA,EAAEoY,EAAI/Y,GAClDuI,WACEkQ,EAAS,IAAInU,EACbuT,EAAI3X,EACJ4X,EAAI5X,EACJ6X,EAAI7X,EAAIgY,EAAIhY,EAAIS,EAAEsX,EAAI/X,EAAIS,EAAEA,EAAEqX,EAAI9X,EAAIS,EAAEA,EAAEA,EAAEoY,EAAI7Y,GAClDqI,WAEF,GAAKiQ,EAAO1a,OAAS,GAAK2a,EAAO3a,OAAS,EAAI,CAC1C,IAAI4G,EAAY,KAEhBgU,EACI,IAAM,IAAInS,EAAI,EAAGA,EAAIiS,EAAO1a,OAAQyI,IAAM,CACtC,IAAIoS,EAAQH,EAAOjS,GAEnB,GAAK,GAAKoS,GAASA,GAAS,EACxB,IAAM,IAAIC,EAAI,EAAGA,EAAIH,EAAO3a,OAAQ8a,IAChC,GAAKnY,KAAK2E,IAAKuT,EAAQF,EAAOG,IAAOlU,EAAY,CAC7C,IAAIwG,EAAI6N,EAAI9Z,SAAS0B,EAAIA,EAAIA,GAAGmC,IAAIkV,EAAI/Y,SAAS0B,EAAIA,GAAGmC,IAAImV,EAAIhZ,SAAS0B,GAAGmC,IAAIoV,KAChFlS,EAAOuH,OAAO3H,KAAK,IAAI5H,EAAQkN,EAAElL,EAAGkL,EAAEhL,IACtC,MAAMwY,CACV,CAGZ,CACR,CACJ,CAEA,OAAO1S,CAEX,EAaAjJ,EAAOC,QAAQ8c,wBAA0B,SAASpW,EAAIC,EAAI+O,EAAIqH,EAAIjM,EAAIC,GAClE,IAAItQ,EAAGU,EACH+K,EAAIC,EAAI6Q,EACRhU,EAAS,IAAIqH,EAEjB5P,EAAIkG,EAAG1E,UAAU,GACjBiK,EAAKxF,EAAGZ,IAAIrF,EAAEqF,IAAI4P,IAElBjV,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBkK,EAAK1L,EAAEqF,IAAI3E,GAEX6b,EAAK,IAAIhc,EAAQ0F,EAAG1D,EAAG0D,EAAGxD,GAc1B,IAZA,IAAI+O,EAAQnB,EAAGA,EACXoB,EAAQnB,EAAGA,EACXjF,EAAQ,IAAIxE,EACZ4K,EAAKhG,EAAGlJ,EAAEkJ,EAAGlJ,EAAIiP,EAAK/F,EAAGhJ,EAAEgJ,EAAGhJ,EAC9B,GAAGgP,EAAKhG,EAAGlJ,EAAEmJ,EAAGnJ,EAAIiP,EAAK/F,EAAGhJ,EAAEiJ,EAAGjJ,GACjCgP,GAAM,EAAEhG,EAAGlJ,EAAEga,EAAGha,EAAImJ,EAAGnJ,EAAEmJ,EAAGnJ,GAAKiP,GAAM,EAAE/F,EAAGhJ,EAAE8Z,EAAG9Z,EAAEiJ,EAAGjJ,EAAEiJ,EAAGjJ,GACvD,GAAGgP,EAAK6K,EAAG/Z,EAAEkJ,EAAGlJ,EAAIiP,EAAK8K,EAAG7Z,EAAEgJ,EAAGhJ,GACrC,GAAGgP,EAAK/F,EAAGnJ,GAAGga,EAAGha,EAAE+Z,EAAG/Z,GAAKiP,EAAK9F,EAAGjJ,GAAG8Z,EAAG9Z,EAAE6Z,EAAG7Z,IAC9CgP,GAAM8K,EAAGha,EAAEga,EAAGha,EAAE+Z,EAAG/Z,EAAE+Z,EAAG/Z,GAAKiP,GAAM+K,EAAG9Z,EAAE8Z,EAAG9Z,EAAI6Z,EAAG7Z,EAAE6Z,EAAG7Z,GACnD,GAAGgP,EAAK6K,EAAG/Z,EAAEga,EAAGha,EAAIiP,EAAK8K,EAAG7Z,EAAE8Z,EAAG9Z,GAAK+O,EAAKC,GACjD3G,WAEQjL,EAAI,EAAGA,EAAIwL,EAAMhL,OAAQR,IAAM,CACrC,IAAIF,EAAI0L,EAAMxL,GAET,GAAKF,GAAKA,GAAK,GAChB4I,EAAOuH,OAAO3H,KAAMsD,EAAGjK,SAAS7B,EAAEA,GAAG0F,IAAIqG,EAAGlK,SAAS7B,GAAG0F,IAAIkX,IACpE,CAEA,OAAOhU,CACX,EAaAjJ,EAAOC,QAAQid,qBAAuB,SAASvW,EAAIC,EAAI+O,EAAIxQ,EAAIE,GAC3D,IAAI3E,EAAGU,EACH+K,EAAIC,EAAI6Q,EACRE,EACA/c,EACAkG,EAAMnB,EAAGmB,IAAIjB,GACbkB,EAAMpB,EAAGoB,IAAIlB,GACb4D,EAAS,IAAIqH,EAEjB5P,EAAIkG,EAAG1E,UAAU,GACjBiK,EAAKxF,EAAGZ,IAAIrF,EAAEqF,IAAI4P,IAElBjV,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBkK,EAAK1L,EAAEqF,IAAI3E,GAEX6b,EAAK,IAAIhc,EAAQ0F,EAAG1D,EAAG0D,EAAGxD,GAI1B/C,EAAI,IAAIc,EAASiE,EAAGhC,EAAIkC,EAAGlC,EAAGkC,EAAGpC,EAAIkC,EAAGlC,GAGxCka,EAAKhY,EAAGlC,EAAEoC,EAAGlC,EAAIkC,EAAGpC,EAAEkC,EAAGhC,EAIzB4I,MAAQ,IAAIxE,EACRnH,EAAE0G,IAAIqF,GACN/L,EAAE0G,IAAIsF,GACNhM,EAAE0G,IAAImW,GAAME,GACd3R,WAKF,IAAM,IAAIjL,EAAI,EAAGA,EAAIwL,MAAMhL,OAAQR,IAAM,CACrC,IAAIF,EAAI0L,MAAMxL,GAEd,GAAK,GAAKF,GAAKA,GAAK,EAAI,CAGpB,IAAIwV,EAAKlP,EAAGR,KAAKS,EAAIvG,GACjB+c,EAAKxW,EAAGT,KAAKwP,EAAItV,GAEjBgd,EAAKxH,EAAG1P,KAAKiX,EAAI/c,GAKhB8E,EAAGlC,GAAKoC,EAAGpC,EACPqD,EAAInD,GAAKka,EAAGla,GAAKka,EAAGla,GAAKoD,EAAIpD,GAC9B8F,EAAOwH,YAAa4M,GAEhBlY,EAAGhC,GAAKkC,EAAGlC,EACdmD,EAAIrD,GAAKoa,EAAGpa,GAAKoa,EAAGpa,GAAKsD,EAAItD,GAC9BgG,EAAOwH,YAAa4M,GAEjB/W,EAAIrD,GAAKoa,EAAGpa,GAAKoa,EAAGpa,GAAKsD,EAAItD,GAAKqD,EAAInD,GAAKka,EAAGla,GAAKka,EAAGla,GAAKoD,EAAIpD,GACtE8F,EAAOwH,YAAa4M,EAE5B,CACJ,CAEA,OAAOpU,CACX,EAgBAjJ,EAAOC,QAAQqd,wBAA0B,SAASnY,EAAIE,EAAIqV,EAAI6C,EAAI5C,EAAIC,EAAIC,EAAIkB,GAC1E,IAAIrb,EAAGU,EAAGC,EAAGC,EACTkc,EAAK1C,EAAKC,EAAKC,EACfgB,EAAKf,EAAKC,EAAKC,EACflS,EAAS,IAAIqH,EAGjB5P,EAAIyE,EAAGjD,UAAU,GACjBd,EAAIiE,EAAGnD,SAAS,GAChBb,EAAIqZ,EAAGxY,UAAU,GACjBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,EAAE0E,IAAIwX,KACtBC,EAAM,IAAItc,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIyE,EAAGjD,SAAS,GAChBd,EAAIiE,EAAGnD,UAAU,GACjBb,EAAIqZ,EAAGxY,SAAS,GAChBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,IAChByZ,EAAM,IAAI5Z,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIyE,EAAGjD,UAAU,GACjBd,EAAIiE,EAAGnD,SAAS,GAChBb,EAAIX,EAAEqF,IAAI3E,GACV2Z,EAAM,IAAI7Z,EAASG,EAAE4B,EAAG5B,EAAE8B,GAE1B6X,EAAM,IAAI9Z,EAASiE,EAAGlC,EAAGkC,EAAGhC,GAE5BzC,EAAIia,EAAGzY,UAAU,GACjBd,EAAIwZ,EAAG1Y,SAAS,GAChBb,EAAIwZ,EAAG3Y,UAAU,GACjBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,EAAE0E,IAAIgW,KACtBC,EAAM,IAAI9a,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIia,EAAGzY,SAAS,GAChBd,EAAIwZ,EAAG1Y,UAAU,GACjBb,EAAIwZ,EAAG3Y,SAAS,GAChBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,IAChB4Z,EAAM,IAAI/Z,EAASI,EAAE2B,EAAG3B,EAAE6B,GAE1BzC,EAAIia,EAAGzY,UAAU,GACjBd,EAAIwZ,EAAG1Y,SAAS,GAChBb,EAAIX,EAAEqF,IAAI3E,GACV8Z,EAAM,IAAIha,EAASG,EAAE4B,EAAG5B,EAAE8B,GAE1BgY,EAAM,IAAIja,EAASyZ,EAAG1X,EAAG0X,EAAGxX,GAE5B,IAAI8Y,EAAQjB,EAAI/X,EAAE+X,EAAI/X,EAClBwa,EAAQzC,EAAI/X,EAAE+X,EAAI/X,EAAE+X,EAAI/X,EACxBiZ,EAAQlB,EAAI7X,EAAE6X,EAAI7X,EAClBua,EAAQ1C,EAAI7X,EAAE6X,EAAI7X,EAAE6X,EAAI7X,EACxBgZ,EAAQpB,EAAI9X,EAAE8X,EAAI9X,EAClB0a,EAAQ5C,EAAI9X,EAAE8X,EAAI9X,EAAE8X,EAAI9X,EACxBmZ,EAAQrB,EAAI5X,EAAE4X,EAAI5X,EAClBya,EAAQ7C,EAAI5X,EAAE4X,EAAI5X,EAAE4X,EAAI5X,EACxBkZ,EAAQvB,EAAI7X,EAAE6X,EAAI7X,EAClB4a,EAAQ/C,EAAI7X,EAAE6X,EAAI7X,EAAE6X,EAAI7X,EACxBqZ,EAAQxB,EAAI3X,EAAE2X,EAAI3X,EAClB2a,EAAQhD,EAAI3X,EAAE2X,EAAI3X,EAAE2X,EAAI3X,EACxB4a,EAAQP,EAAIva,EAAEua,EAAIva,EAClB+a,EAAQR,EAAIva,EAAEua,EAAIva,EAAEua,EAAIva,EACxBgb,EAAQT,EAAIra,EAAEqa,EAAIra,EAClB+a,EAAQV,EAAIra,EAAEqa,EAAIra,EAAEqa,EAAIra,EACxBoZ,EAAQpB,EAAIlY,EAAEkY,EAAIlY,EAClBkb,EAAQhD,EAAIlY,EAAEkY,EAAIlY,EAAEkY,EAAIlY,EACxBuZ,EAAQrB,EAAIhY,EAAEgY,EAAIhY,EAClBib,EAAQjD,EAAIhY,EAAEgY,EAAIhY,EAAEgY,EAAIhY,EACxBsZ,EAAQvB,EAAIjY,EAAEiY,EAAIjY,EAClBob,EAAQnD,EAAIjY,EAAEiY,EAAIjY,EAAEiY,EAAIjY,EACxByZ,EAAQxB,EAAI/X,EAAE+X,EAAI/X,EAClBwZ,EAAQ1B,EAAIhY,EAAEgY,EAAIhY,EAClBqb,EAAQrD,EAAIhY,EAAEgY,EAAIhY,EAAEgY,EAAIhY,EACxB2Z,EAAQ3B,EAAI9X,EAAE8X,EAAI9X,EAClB0Z,EAAQb,EAAI/Y,EAAE+Y,EAAI/Y,EAClBsb,EAAQvC,EAAI/Y,EAAE+Y,EAAI/Y,EAAE+Y,EAAI/Y,EACxB6Z,GAAQd,EAAI7Y,EAAE6Y,EAAI7Y,EAClBqb,GAAQxC,EAAI7Y,EAAE6Y,EAAI7Y,EAAE6Y,EAAI7Y,EA0LxB4I,GAzLO,IAAIxE,GACVyW,EAAMQ,GAAQN,EAAMK,EAAQ,EAAEf,EAAIva,EAAEgb,EAAMpB,EAAMb,EAAI7Y,EACjD,EAAE4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,EAAE6Z,IACvB,EAAEU,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE4a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE8X,EAAIhY,EAAEib,EAAMrB,EAC/E,EAAEmB,EAAM/C,EAAI9X,EAAE2Z,GAAQ,EAAEU,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAE0Z,EAAQ,EAAEkB,EAAM9C,EAAIhY,EAAEua,EAAIra,EAAE2Z,IACzE,EAAE5B,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMhD,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE8a,EAAM9C,EAAIhY,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAC/F,EAAE+X,EAAIjY,EAAEib,EAAMrB,EAAQ,EAAEF,EAAMuB,EAAMlC,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAE2Z,GAAQ,EAAEU,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAMpB,EAC5F,EAAEW,EAAIva,EAAE0Z,EAAMsB,EAAMjC,EAAI7Y,EAAI4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,GAAG,EAAEiY,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GAASoB,IAAQ9C,EAAI/X,EAAE2Z,GACxF,EAAEF,EAAMZ,EAAI7Y,EAAI6Y,EAAI7Y,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,IAC3C7B,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE+X,EAAIjY,EAAEgY,EAAIhY,EAAEib,EAAMlC,EAAI/Y,EAChG,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE2Z,GAAQ,EAAE9B,EAAI/X,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAMjC,EAAI/Y,EAAE+Y,EAAI7Y,EAClG,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE0Z,EAAQ,EAAE7B,EAAI7X,EAAE4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAE+Y,EAAI7Y,EAClG,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM/B,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAE+Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAI,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI7Y,EAClG,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAClG,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAE+Y,EAAI7Y,EAAImb,EAAMJ,EAAQ,EAAElD,EAAI/X,EAAEib,EAAMrB,EAAQ,EAAE7B,EAAI7X,EAAE6a,EAAMlB,GACpF,EAAE3B,EAAIlY,EAAEib,EAAMrB,EAAQiB,EAAMN,EAAIva,EAAE4Z,EAAQgB,EAAML,EAAIra,EAAE2Z,GAAQ,EAAE9B,EAAI/X,EAAE8a,EAAMP,EAAIra,EAAE2Z,GAClF,EAAE9B,EAAI7X,EAAEqa,EAAIva,EAAEgb,EAAMpB,EAAQ,EAAE9B,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAMjB,GAAQ/B,EAAI9X,EAAE6X,EAAI3X,EAAE8a,EAAMpB,EAAQ9B,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAMjB,GACpG,EAAE/B,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EAAMpB,EAAQ,EAAE1B,EAAIlY,EAAE8a,EAAMP,EAAIra,EAAE2Z,GAAQhC,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAE0Z,EAC1E,EAAE1B,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAAMpB,EAAQR,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAE6Z,GAAQ,EAAEU,EAAIva,EAAE0Z,EAAMsB,EAAMhD,EAAI9X,EAC9E4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,GAAG,EAAEkY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK4a,EAAM9C,EAAIhY,EAAEua,EAAIra,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GACzFoB,IAAQ,EAAE9C,EAAI/X,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAAIgY,EAAIhY,EAAE2Z,GAAQ7B,EAAI9X,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAASZ,EAAI7Y,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,IACnH,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAAI4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAC5G8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAChH,EAAE+X,EAAI/X,EAAEgY,EAAIhY,EAAEib,EAAMlC,EAAI/Y,EAAI,EAAEkY,EAAIlY,EAAEgY,EAAIhY,EAAEib,EAAMlC,EAAI/Y,EAAI,EAAE+X,EAAI7X,EAAE6a,EAAM/C,EAAI9X,EAAE6Y,EAAI7Y,EAAI,EAAE2a,EAAMN,EAAIva,EAAEgY,EAAIhY,EAAE+Y,EAAI/Y,EAC5G,EAAE4a,EAAML,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAE6Y,EAAI/Y,EAC5F,EAAE+X,EAAI7X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAMhD,EAAI9X,EAAE6Y,EAAI/Y,EAClG,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAE8a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAClG,EAAE6X,EAAI7X,EAAE4a,EAAM9C,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAE4a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAE6Y,EAAI7Y,EAClG,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAM9C,EAAI9X,EAAE6Y,EAAI7Y,EAClG,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAIhY,EAAE+Y,EAAI7Y,EAAI,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAIhY,EAAE+Y,EAAI7Y,EAClG,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAI9X,EAAE6Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAEqZ,EAAMrB,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMjC,EAAI/Y,EAClG,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAMjC,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAEgY,EAAIlY,EAAE8a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAClG,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAI9X,EAAE6Y,EAAI7Y,EAAI,EAAEkZ,EAAMvB,EAAI3X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE8X,EAAI9X,EAAE6Y,EAAI/Y,EAClG,EAAEiY,EAAIjY,EAAE0Z,EAAMuB,EAAQ,EAAEzB,EAAMyB,EAAMlC,EAAI/Y,EAAI,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEwZ,EAAMsB,EAAQ,EAAExB,EAAMe,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAChG4a,EAAM9C,EAAIhY,EAAEua,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,GAAG,EAAEkY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GACzFxB,EAAIjY,EAAE8a,EAAMP,EAAIra,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GAASoB,IAAQ,EAAE7C,EAAIhY,EAAE8X,EAAI9X,EAAE6Y,EAAI7Y,EAAI6Y,EAAI7Y,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GACnGxB,EAAI/X,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAAS3B,EAAI9X,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,IACvE4X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAI8X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAE8X,EAAI9X,EAC1G4X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAI8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAE8X,EAAI9X,EAC9G,EAAE4X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAEiY,EAAIjY,EAAEib,EAAMlC,EAAI/Y,EAAI,EAAEkY,EAAIlY,EAAEiY,EAAIjY,EAAEib,EAAMlC,EAAI/Y,EAC5F,EAAEiY,EAAIjY,EAAE6a,EAAMN,EAAIva,EAAE+Y,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAMjC,EAAI/Y,EAC5F,EAAE+X,EAAI/X,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAAMjC,EAAI7Y,EAClG,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAI/X,EAAE8a,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE4X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE8a,EAAMjC,EAAI/Y,EAClG,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI7X,EAAE+X,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAE4a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAE+X,EAAI7X,EAAE4a,EAAM9C,EAAIhY,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI,EAAEgY,EAAIlY,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAMjC,EAAI/Y,EAClG,EAAEkY,EAAIlY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE4X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAE4a,EAAM/B,EAAI7Y,EAAI,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAE0Z,EAAMa,EAAIra,EAClG,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAAE6Y,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAIhY,EAAEgY,EAAI9X,EAAI,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAE+Y,EAAI7Y,EAClG,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAE6Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAIhY,EAAEgY,EAAI9X,EAClG,EAAEgY,EAAIhY,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEgb,EAAQ,EAAE9C,EAAIhY,EAAE4a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAEoZ,EAAMnB,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAEkZ,EAAMvB,EAAI3X,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAEoZ,EAAMvB,EAAI3X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAE8X,EAAI9X,EAClG,EAAE6X,EAAI/X,EAAE0Z,EAAMuB,EAAQ,EAAE/C,EAAIlY,EAAE0Z,EAAMuB,EAAQ,EAAEzB,EAAMxB,EAAIhY,EAAEib,EAAQJ,EAAMN,EAAIva,EAAE0Z,EAC9E,EAAE3B,EAAI7X,EAAEqa,EAAIva,EAAE0Z,EAAMsB,EAAQlD,EAAI9X,EAAE6X,EAAI3X,EAAEwZ,EAAMsB,EAAQ,EAAElD,EAAI5X,EAAE2X,EAAI7X,EAAE0Z,EAAMsB,EAC1EnD,EAAI7X,EAAEqZ,EAAMK,EAAMa,EAAIra,EAAI,EAAEgY,EAAIhY,EAAEqa,EAAIva,EAAE0Z,EAAMsB,EAAQ,EAAExB,EAAMe,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAC9EkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,GAAG,EAAEiY,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAAS7B,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GACvF1B,EAAIjY,EAAE8a,EAAMP,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK0a,EAAML,EAAIra,IAAI,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAClF5B,EAAI7X,EAAE6a,GAAO,EAAE9C,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GAAS7B,EAAI5X,EAAE2X,EAAI7X,EAAE8a,IAAQ,EAAE7C,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GAC5E7B,EAAI9X,EAAE6X,EAAI3X,EAAE4a,IAAQ,EAAE7C,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GAAS5B,EAAI/X,EAAE8a,EAAMP,EAAIra,IAAI,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GACrFmB,EAAM9C,EAAIhY,EAAEua,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GAASvB,EAAIlY,EAAE8a,EAAMP,EAAIra,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI,EAAEyZ,GACnFoB,IAAQ,EAAE7C,EAAIhY,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAI8X,EAAI9X,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAASvB,EAAIhY,GAAG,EAAE+X,EAAI/X,EAAE6Y,EAAI7Y,EAAIyZ,GACrF1B,EAAI/X,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,KACtC6X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAC7G,EAAE+X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI6X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAI+X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAChH8X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAE+Y,EAAI7Y,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAI8X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAC9G4X,EAAI9X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAI8X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAC9GgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAAI8X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAChH8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI,EAAE4X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAChH,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEib,EAAMlC,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAEiY,EAAIjY,EAAEgY,EAAIhY,EAAEib,EAAQ,EAAElD,EAAI/X,EAAE6a,EAAMN,EAAIva,EAAE+Y,EAAI/Y,EAAI,EAAEkY,EAAIlY,EAAEiY,EAAIjY,EAAEgY,EAAIhY,EAAEib,EACxG,EAAE/C,EAAIlY,EAAE6a,EAAMN,EAAIva,EAAE+Y,EAAI/Y,EAAI,EAAEiY,EAAIjY,EAAE6a,EAAMN,EAAIva,EAAEgY,EAAIhY,EAAI,EAAE+X,EAAI7X,EAAE0a,EAAML,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAEqa,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAClH,EAAE+X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAE8a,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EAAMjC,EAAI/Y,EAClG,EAAE+X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAE+X,EAAI7X,EAAE4a,EAAMP,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAClG,EAAE6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM/B,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAE+Y,EAAI7Y,EAAI,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAE+X,EAAI/X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI/X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE6X,EAAI/X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEgb,EAC9F,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAM/B,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE+X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAM/B,EAAI7Y,EAClG,EAAE6X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM/B,EAAI/Y,EAAI,EAAE+X,EAAI7X,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAE+Y,EAAI/Y,EAAI,EAAE+X,EAAI7X,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAC9F,EAAElD,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAE8a,EAAMjC,EAAI/Y,EAAI8X,EAAI9X,EAAE8X,EAAI5X,EAAEmZ,EAAMkB,EAAIva,EAAE+Y,EAAI/Y,EAChG,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE8a,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEgb,EAC9F,EAAElD,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEgb,EAAQ,EAAE9C,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEgY,EAAIhY,EAAEgb,EAC9F,EAAEjD,EAAI/X,EAAEoZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAE8a,EAAMP,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAE4a,EAAMP,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAE+X,EAAI7X,EAAE+X,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAE+Y,EAAI7Y,EAAI,EAAE6X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAE+X,EAAI7X,EAAE4a,EAAM7C,EAAI/X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAEkZ,EAAMmB,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAE4X,EAAI9X,EAAEmZ,EAAMoB,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI/Y,EAChG,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM/B,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAE+Y,EAAI7Y,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAE6Y,EAAI/Y,EAClG,EAAEkY,EAAIlY,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAAMjC,EAAI/Y,EAAI,EAAEkY,EAAIlY,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAEgb,EAC9F,EAAElD,EAAI5X,EAAEgY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAM/B,EAAI/Y,EAAI,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAI,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAAE8X,EAAIhY,EAClG,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAEmZ,EAAMkB,EAAIva,EAAE+Y,EAAI/Y,EAAI,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAI9X,EAAI,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMrB,EAAIhY,EAAEua,EAAIra,EAClG,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAE8X,EAAIhY,EAAI,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAQ7B,EAAMtB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAE+Y,EAAI/Y,EAChG,EAAEkY,EAAIlY,EAAEoZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAEgY,EAAIhY,EAAE4a,EAAM7C,EAAI/X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI,EAAEgZ,EAAMpB,EAAI5X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE6Y,EAAI7Y,EAClGgZ,EAAMrB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI7Y,EAAI,EAAEkZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAEoZ,EAAMnB,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAE8X,EAAI9X,EAChG,EAAEkZ,EAAMvB,EAAI3X,EAAE+X,EAAI/X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAIkb,EAAMH,EAAQ,EAAEjC,EAAMiC,EAAMlC,EAAI/Y,EAAI,EAAEiZ,EAAM8B,EAAMhC,EAAI7Y,EACxF,EAAEoZ,EAAM2B,EAAMlC,EAAI/Y,EAAI2a,EAAMG,EAAM/B,EAAI/Y,EAAI0a,EAAMM,EAAMjC,EAAI7Y,EAAI4X,EAAI9X,EAAEmZ,EAAM2B,EAAM/B,EAAI7Y,EACpFgZ,EAAMpB,EAAI5X,EAAE8a,EAAMjC,EAAI/Y,EAAI,EAAEgZ,EAAMuB,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAE+Y,EAAM6B,EAAMP,EAAIra,EAAE6Y,EAAI/Y,EAAIkZ,EAAMG,EAAMkB,EAAIva,EAAE+Y,EAAI7Y,EACxGiZ,EAAMC,EAAMmB,EAAIra,EAAE6Y,EAAI/Y,EAAI,EAAEwZ,EAAMe,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAQ,EAAE1B,EAAMiB,EAAIva,EAAEgb,EAAMjC,EAAI7Y,EAAI,EAAEqZ,EAAMuB,EAAMP,EAAIra,EAAE6Y,EAAI/Y,EAC1G8X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK0a,EAAML,EAAIra,IAAI,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GACpG6X,EAAI7X,EAAE6a,GAAO,EAAE7C,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK4X,EAAI5X,EAAE2X,EAAI7X,EAAE8a,IAAQ,EAAE5C,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAC9FkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,GAAG,EAAEkY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAK4X,EAAI9X,EAAE6X,EAAI3X,EAAE4a,IAAQ,EAAE5C,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GACpG6X,EAAI/X,EAAE8a,EAAMP,EAAIra,IAAI,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GAAKgY,EAAIlY,EAAE8a,EAAMP,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,GACpG+X,EAAIjY,EAAE8a,EAAMP,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GAASsB,IAAQ,EAAE7C,EAAIhY,EAAE+X,EAAI/X,EAAE8X,EAAI9X,EAAIqZ,EAAMR,EAAI7Y,EACtF+X,EAAI/X,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAASvB,EAAIhY,GAAG,EAAEgY,EAAIhY,EAAE6Y,EAAI7Y,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,KACtE6X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAC7G,EAAE6X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAAI6X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAI6X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAChH4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAI9X,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAC9G4X,EAAI9X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAIgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAC9G,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAChH,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEgY,EAAIhY,EAAEib,EAAQ,EAAElD,EAAI/X,EAAE6a,EAAMN,EAAIva,EAAEgY,EAAIhY,EAAI,EAAEkY,EAAIlY,EAAE6a,EAAMN,EAAIva,EAAEgY,EAAIhY,EAAI,EAAE+X,EAAI7X,EAAE0a,EAAML,EAAIra,EAAE8X,EAAI9X,EAC5G,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEgb,EAC9F,EAAEjD,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAE+X,EAAI7X,EAAE4a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAClG,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEua,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAI,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAI9X,EAClG,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEqZ,EAAMrB,EAAIhY,EAAEua,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAC9F,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAM9C,EAAI9X,EAClG,EAAE6X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAIhY,EAAI,EAAE+X,EAAI7X,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAIhY,EAAI,EAAE8X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEgb,EAAMhD,EAAI9X,EAClG,EAAE4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAE8X,EAAIhY,EAAEgb,EAAQlD,EAAI9X,EAAE8X,EAAI5X,EAAEmZ,EAAMkB,EAAIva,EAAEgY,EAAIhY,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE8X,EAAIhY,EAAEgb,EAC5F,EAAElD,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEiY,EAAI/X,EAAE8a,EAAQ,EAAE9C,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAEoZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE8X,EAAI9X,EAClG,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAE8a,EAAMP,EAAIra,EAAE8X,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAE4a,EAAM9C,EAAIhY,EAAEua,EAAIra,EAAI,EAAE6X,EAAI7X,EAAE+X,EAAIjY,EAAE8a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAClG,EAAE6X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAEkZ,EAAMmB,EAAIra,EAAE8X,EAAI9X,EAChG,EAAE4X,EAAI9X,EAAEmZ,EAAMoB,EAAIva,EAAEgY,EAAIhY,EAAEua,EAAIra,EAAI,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAI9X,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEgY,EAAI9X,EAClG,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMrB,EAAIhY,EAAEua,EAAIra,EAAI,EAAEgY,EAAIlY,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAEgb,EAAQ,EAAE9C,EAAIlY,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAC9F,EAAElD,EAAI5X,EAAEgY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAM9C,EAAIhY,EAAI,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAAI,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAEmZ,EAAMkB,EAAIva,EAAEgY,EAAIhY,EAClG,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAIiZ,EAAMtB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEgY,EAAIhY,EAAI,EAAEkY,EAAIlY,EAAEoZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAE8X,EAAI9X,EAChG,EAAE4X,EAAI5X,EAAEsZ,EAAM3B,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI,EAAEgY,EAAIhY,EAAE+X,EAAIjY,EAAE8a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAI,EAAEgZ,EAAMpB,EAAI5X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAE8X,EAAI9X,EAClGgZ,EAAMrB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAE8X,EAAI9X,EAAI,EAAEkZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAE8X,EAAIhY,EAAEua,EAAIra,EAAI,EAAEkZ,EAAMnB,EAAIjY,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAChG,EAAE6X,EAAI/X,EAAEwZ,EAAMyB,EAAQ,EAAE/C,EAAIlY,EAAEwZ,EAAMyB,EAAQ,EAAEjC,EAAMhB,EAAIhY,EAAEib,EAAQ,EAAEhC,EAAM8B,EAAM/C,EAAI9X,EAAI,EAAEoZ,EAAMtB,EAAIhY,EAAEib,EACtGzB,EAAMqB,EAAMN,EAAIva,EAAI2a,EAAMG,EAAM9C,EAAIhY,EAAI0a,EAAMM,EAAMhD,EAAI9X,EAAI,EAAE6X,EAAI7X,EAAEsZ,EAAMe,EAAIva,EAAEgb,EAChFlD,EAAI9X,EAAEmZ,EAAM2B,EAAM9C,EAAI9X,EAAI4X,EAAI9X,EAAEwZ,EAAM3B,EAAI3X,EAAE8a,EAAQ,EAAElD,EAAI5X,EAAE2X,EAAI7X,EAAEwZ,EAAMwB,EAAQ9B,EAAMpB,EAAI5X,EAAE8X,EAAIhY,EAAEgb,EAClGnD,EAAI7X,EAAEwZ,EAAMH,EAAMkB,EAAIra,EAAI,EAAEgY,EAAIhY,EAAEsZ,EAAMe,EAAIva,EAAEgb,EAAQ,EAAEhC,EAAMuB,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAE+Y,EAAM6B,EAAM9C,EAAIhY,EAAEua,EAAIra,EAC1GgZ,EAAMG,EAAMkB,EAAIva,EAAEgY,EAAI9X,EAAIiZ,EAAMC,EAAMpB,EAAIhY,EAAEua,EAAIra,EAAI,EAAEoZ,EAAMiB,EAAIva,EAAEgb,EAAMhD,EAAI9X,EAAI,EAAEqZ,EAAMuB,EAAM9C,EAAIhY,EAAEua,EAAIra,EACxGkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,GAAG,EAAEkY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAAS3B,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GACvFmB,EAAML,EAAIra,IAAI,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAAS1B,EAAI7X,EAAE6a,GAAO,EAAE7C,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GACtE3B,EAAI5X,EAAE2X,EAAI7X,EAAE8a,IAAQ,EAAE5C,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,GAAS3B,EAAI9X,EAAE6X,EAAI3X,EAAE4a,IAAQ,EAAE5C,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GACnF1B,EAAI/X,EAAE8a,EAAMP,EAAIra,IAAI,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GAASvB,EAAIlY,EAAE8a,EAAMP,EAAIra,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAI,EAAEuZ,GACpFsB,IAAQ,EAAE7C,EAAIhY,EAAEuZ,EAAQF,EAAMvB,EAAI9X,EAAIgY,EAAIhY,GAAG,EAAEgY,EAAIhY,EAAE8X,EAAI9X,EAAIuZ,KAChE1B,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAI6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI/X,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAC7G,EAAE6X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAI6X,EAAI7X,EAAE4X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI6X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEua,EAAIra,EAChH4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAI4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAC9G,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAAI4X,EAAI9X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAIgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAChH,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEua,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEiY,EAAIjY,EAAEib,EAClG,EAAElD,EAAI/X,EAAEiY,EAAIjY,EAAE6a,EAAMN,EAAIva,EAAI,EAAE+X,EAAI7X,EAAEgY,EAAIhY,EAAE6a,EAAM9C,EAAI/X,EAAI,EAAEgY,EAAIlY,EAAEiY,EAAIjY,EAAE6a,EAAMN,EAAIva,EAAI,EAAE+X,EAAI7X,EAAE0a,EAAM3C,EAAI/X,EAAEqa,EAAIra,EAC5G,EAAE0a,EAAM1C,EAAIhY,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAI/X,EAAE8a,EACxF,EAAEjD,EAAI/X,EAAE8X,EAAI9X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE8a,EAAQ,EAAEjD,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAAQ,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAC9F,EAAEjD,EAAI/X,EAAE+X,EAAI7X,EAAE4a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEua,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAAQ,EAAEjD,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAClG,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIra,EAAI,EAAE6X,EAAI/X,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAC9F,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAEiY,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAQ,EAAEjD,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAM7C,EAAI/X,EAClG,EAAE6X,EAAI7X,EAAE4X,EAAI5X,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAE4a,EAAQ,EAAE/C,EAAI7X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAI,EAAE8X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEiY,EAAI/X,EAAE8a,EAC9F,EAAElD,EAAI9X,EAAEkY,EAAIlY,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAE8a,EAAQlD,EAAI9X,EAAE8X,EAAI5X,EAAE+X,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAI,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEgb,EAC5F,EAAE9C,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEiY,EAAIjY,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAEkY,EAAIhY,EAAE4a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEoZ,EAAMvB,EAAI3X,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAClG,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAE8a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIhY,EAAE+X,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAI,EAAE6X,EAAI7X,EAAEkZ,EAAMnB,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAClG,EAAE6X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAEkZ,EAAMnB,EAAI/X,EAAEqa,EAAIra,EAAI,EAAE4X,EAAI9X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAChG,EAAE4X,EAAI9X,EAAEmZ,EAAMlB,EAAIjY,EAAEua,EAAIva,EAAEua,EAAIra,EAAI,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAM7C,EAAI/X,EAAI,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEiY,EAAIjY,EAAEqZ,EAAMkB,EAAIra,EAClG,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAI,EAAEgY,EAAIlY,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEua,EAAIva,EAAEgb,EAAQ,EAAElD,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE4a,EAAM7C,EAAI/X,EAClG,EAAE4X,EAAI5X,EAAEgY,EAAIhY,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAE4a,EAAQ,EAAEjD,EAAI7X,EAAEkY,EAAIhY,EAAE+X,EAAIjY,EAAEqZ,EAAMkB,EAAIva,EAAImZ,EAAMtB,EAAI7X,EAAEiY,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAChG,EAAEkY,EAAIlY,EAAEkY,EAAIhY,EAAE4a,EAAM7C,EAAI/X,EAAEqa,EAAIra,EAAI,EAAEgY,EAAIlY,EAAEoZ,EAAMvB,EAAI3X,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAAI,EAAEgZ,EAAMpB,EAAI5X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAAEqa,EAAIra,EAClGgZ,EAAMrB,EAAI7X,EAAE6X,EAAI3X,EAAE+X,EAAI/X,EAAEqa,EAAIra,EAAI,EAAEkZ,EAAMlB,EAAIhY,EAAE+X,EAAIjY,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAI,EAAEkZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEiY,EAAI/X,EAChG,EAAE8Y,EAAMf,EAAIjY,EAAEib,EAAQ,EAAEhC,EAAM8B,EAAM9C,EAAI/X,EAAI,EAAEoZ,EAAMrB,EAAIjY,EAAEib,EAAQN,EAAM1C,EAAIjY,EAAE8a,EAAQJ,EAAMzC,EAAI/X,EAAE8a,EAClG,EAAEzB,EAAMwB,EAAM9C,EAAI/X,EAAI4X,EAAI9X,EAAEmZ,EAAM2B,EAAM7C,EAAI/X,EAAIgZ,EAAMpB,EAAI5X,EAAE+X,EAAIjY,EAAEgb,EAAQ,EAAEhC,EAAMuB,EAAIva,EAAEiY,EAAI/X,EAAE8a,EAC9F,EAAE/B,EAAMhB,EAAIjY,EAAE8a,EAAMP,EAAIra,EAAIgZ,EAAMG,EAAMkB,EAAIva,EAAEiY,EAAI/X,EAAIiZ,EAAMC,EAAMnB,EAAIjY,EAAEua,EAAIra,EAAI,EAAEoZ,EAAMiB,EAAIva,EAAEiY,EAAI/X,EAAE8a,EACpG,EAAEzB,EAAMtB,EAAIjY,EAAE8a,EAAMP,EAAIra,EAC5B6X,EAAI/X,EAAE+X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI6X,EAAI/X,EAAE+X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAI6X,EAAI/X,EAAE8X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAC1G6X,EAAI7X,EAAE4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAI+X,EAAI/X,EAAE8X,EAAI9X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAChH6X,EAAI/X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI6X,EAAI7X,EAAE4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI,EAAE6X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEua,EAAIra,EAChH6X,EAAI7X,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAC9G8X,EAAI9X,EAAEkY,EAAIlY,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAIgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAE6a,EAAMN,EAAIva,EACpG,EAAE+X,EAAI7X,EAAE0a,EAAM1C,EAAIhY,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAE+X,EAAI7X,EAAEgY,EAAIlY,EAAEua,EAAIva,EAAEgb,EACxF,EAAEjD,EAAI/X,EAAE+X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAAQ,EAAE/C,EAAI/X,EAAE+X,EAAI7X,EAAE2X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI3X,EAAE8a,EAC9FjD,EAAI/X,EAAE8X,EAAI9X,EAAE8X,EAAI5X,EAAEmZ,EAAMkB,EAAIva,EAAI,EAAE+X,EAAI/X,EAAE8X,EAAI9X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE8a,EAAQ,EAAEjD,EAAI/X,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EAC5F,EAAEjD,EAAI7X,EAAE4X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEgb,EAAQ,EAAEjD,EAAI/X,EAAE+X,EAAI7X,EAAEgY,EAAIhY,EAAE4a,EAAMP,EAAIra,EAAI,EAAE6X,EAAI/X,EAAE+X,EAAI7X,EAAEkZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAClG,EAAE6X,EAAI/X,EAAE8X,EAAI9X,EAAEmZ,EAAMoB,EAAIva,EAAEua,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAI,EAAE6X,EAAI/X,EAAEkY,EAAIlY,EAAEkY,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAC9F,EAAEjD,EAAI/X,EAAE8X,EAAI5X,EAAEgY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAQ,EAAE/C,EAAI/X,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAEmZ,EAAMkB,EAAIva,EAAI+X,EAAI/X,EAAEmZ,EAAMtB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAChG+X,EAAI7X,EAAE4X,EAAI9X,EAAE8X,EAAI5X,EAAEkZ,EAAMmB,EAAIra,EAAI,EAAE6X,EAAI7X,EAAE4X,EAAI9X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAQ,EAAE/C,EAAI7X,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAE2X,EAAI3X,EAAE4a,EAC5F,EAAE/C,EAAI7X,EAAEgY,EAAIlY,EAAE6X,EAAI7X,EAAEqZ,EAAMkB,EAAIva,EAAI,EAAE+X,EAAI7X,EAAE4X,EAAI5X,EAAE2X,EAAI7X,EAAEkY,EAAIhY,EAAE4a,EAAQhD,EAAI9X,EAAEkY,EAAIlY,EAAE8X,EAAI5X,EAAEmZ,EAAMkB,EAAIva,EAChG,EAAE8X,EAAI9X,EAAEkY,EAAIlY,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAE8a,EAAQ,EAAEjD,EAAI/X,EAAEoZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAEkY,EAAIhY,EAAE4a,EAAMP,EAAIra,EAClG,EAAE6X,EAAI7X,EAAEgY,EAAIlY,EAAEoZ,EAAMvB,EAAI3X,EAAEqa,EAAIra,EAAI,EAAE6X,EAAI7X,EAAEgZ,EAAMpB,EAAI5X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI6X,EAAI7X,EAAEgZ,EAAMrB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIra,EAChG,EAAE6X,EAAI7X,EAAEkZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAI,EAAE8X,EAAI9X,EAAEkY,EAAIlY,EAAEmZ,EAAMoB,EAAIva,EAAEua,EAAIra,EAAI4X,EAAI9X,EAAE8X,EAAI5X,EAAEkZ,EAAMlB,EAAIhY,EAAEqa,EAAIra,EAChG,EAAEgY,EAAIlY,EAAE8X,EAAI5X,EAAEgY,EAAIhY,EAAE2X,EAAI3X,EAAE4a,EAAQ,EAAE5C,EAAIlY,EAAE6X,EAAI7X,EAAEkY,EAAIhY,EAAEmZ,EAAMkB,EAAIva,EAAIkY,EAAIlY,EAAEmZ,EAAMtB,EAAI7X,EAAE6X,EAAI3X,EAAEqa,EAAIva,EAChG,EAAEiZ,EAAMnB,EAAI9X,EAAE6X,EAAI7X,EAAEua,EAAIva,EAAEua,EAAIra,EAAI,EAAE4X,EAAI9X,EAAE6X,EAAI7X,EAAEuZ,EAAMgB,EAAIva,EAAEua,EAAIra,EAAI,EAAEgY,EAAIlY,EAAEoZ,EAAMlB,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIra,EAClG,EAAE8Y,EAAMlB,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAI,EAAEgZ,EAAMpB,EAAI5X,EAAEgY,EAAIhY,EAAEqa,EAAIva,EAAEua,EAAIra,EAAIgZ,EAAMrB,EAAI7X,EAAEkY,EAAIhY,EAAE2X,EAAI3X,EAAEqa,EAAIra,EAChG,EAAEoZ,EAAMxB,EAAI5X,EAAE2X,EAAI3X,EAAEqa,EAAIva,EAAEua,EAAIra,EAAIsa,EAAMS,EAAQR,EAAMM,EAAQG,EAAMD,EAAQE,EAAMJ,EAClF,EAAEhD,EAAI/X,EAAEsZ,EAAM2B,EAAQlD,EAAI/X,EAAE2a,EAAMG,EAAQ,EAAE9B,EAAMd,EAAIlY,EAAEib,EAAQlD,EAAI7X,EAAEwa,EAAMM,EAC5E,EAAEjD,EAAI7X,EAAEqZ,EAAMwB,EAAQ7C,EAAIlY,EAAE2a,EAAMG,EAAQ9B,EAAM6B,EAAMN,EAAIva,EAAI,EAAEiZ,EAAMf,EAAIhY,EAAE6a,EAAQ9B,EAAM2B,EAAML,EAAIra,EACpGoZ,EAAMuB,EAAMN,EAAIva,EAAI0a,EAAMxC,EAAIhY,EAAE8a,EAAQJ,EAAMrB,EAAMgB,EAAIra,EAAI6X,EAAI/X,EAAEkZ,EAAMpB,EAAI5X,EAAE8a,EAC9EjD,EAAI7X,EAAE4X,EAAI9X,EAAEmZ,EAAM2B,EAAQ,EAAE/C,EAAI/X,EAAEiZ,EAAM6B,EAAMP,EAAIra,EAAI6X,EAAI/X,EAAEmZ,EAAMC,EAAMmB,EAAIra,EAAI6X,EAAI7X,EAAEgZ,EAAMG,EAAMkB,EAAIva,EACtG8X,EAAI9X,EAAEmZ,EAAMjB,EAAIhY,EAAE4a,EAAQ,EAAE9B,EAAMjB,EAAI7X,EAAEqa,EAAIva,EAAEgb,EAAQhC,EAAMlB,EAAI9X,EAAE6X,EAAI3X,EAAE8a,EACxE,EAAEhC,EAAMlB,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EAAQ,EAAE/B,EAAMnB,EAAI9X,EAAE6X,EAAI3X,EAAE4a,EAAQ7B,EAAMnB,EAAI5X,EAAE2X,EAAI7X,EAAE8a,EAAQ5B,EAAMhB,EAAIlY,EAAE8X,EAAI5X,EAAE8a,EACpG,EAAEjD,EAAI/X,EAAEuZ,EAAMuB,EAAMP,EAAIra,EAAI,EAAE6X,EAAI7X,EAAEoZ,EAAMiB,EAAIva,EAAEgb,EAAQlD,EAAI9X,EAAEsZ,EAAMzB,EAAI3X,EAAE8a,EAAQ,EAAElD,EAAI9X,EAAEuZ,EAAM1B,EAAI3X,EAAE4a,EACtG5C,EAAIlY,EAAEmZ,EAAMC,EAAMmB,EAAIra,EAAI4X,EAAI5X,EAAE2X,EAAI7X,EAAEuZ,EAAMuB,EAAQ9B,EAAMnB,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAI,EAAE8Y,EAAMd,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAClG,EAAE/B,EAAMf,EAAIlY,EAAE8a,EAAMP,EAAIra,EAAI+Y,EAAMG,EAAMvB,EAAI3X,EAAEqa,EAAIva,EAAIkZ,EAAMhB,EAAIhY,EAAEmZ,EAAMkB,EAAIva,EAAI,EAAEsZ,EAAMxB,EAAI5X,EAAE2X,EAAI7X,EAAEgb,EACpG,EAAE9C,EAAIlY,EAAEuZ,EAAMuB,EAAMP,EAAIra,EAAIoZ,EAAMzB,EAAI7X,EAAEqZ,EAAMkB,EAAIra,EAAI,EAAEoZ,EAAMpB,EAAIhY,EAAEqa,EAAIva,EAAEgb,EAAQ5B,EAAMG,EAAM1B,EAAI3X,EAAEqa,EAAIva,GAE/F4I,mBAAmB,EAAE,GACtC0O,EAAwBxO,IAExB,IAAM,IAAIxL,GAAI,EAAGA,GAAIwL,GAAMhL,OAAQR,KAAM,CACrC,IAAIqD,GAAImI,GAAMxL,IACVkb,GAAS,IAAIlU,EACbiW,EAAIva,EACJ6X,EAAI7X,EACJ8X,EAAI9X,EACJ+X,EAAI/X,EAAIkY,EAAIlY,EAAIW,GAAEsX,EAAIjY,EAAIW,GAAEA,GAAEqX,EAAIhY,EAAIW,GAAEA,GAAEA,GAAEoY,EAAI/Y,GAClDuI,WACEkQ,GAAS,IAAInU,EACbiW,EAAIra,EACJ2X,EAAI3X,EACJ4X,EAAI5X,EACJ6X,EAAI7X,EAAIgY,EAAIhY,EAAIS,GAAEsX,EAAI/X,EAAIS,GAAEA,GAAEqX,EAAI9X,EAAIS,GAAEA,GAAEA,GAAEoY,EAAI7Y,GAClDqI,WAEF,GAAKiQ,GAAO1a,OAAS,GAAK2a,GAAO3a,OAAS,EAAI,CAC1C,IAAI4G,GAAY,KAEhBgU,EACI,IAAM,IAAInS,GAAI,EAAGA,GAAIiS,GAAO1a,OAAQyI,KAAM,CACtC,IAAIoS,GAAQH,GAAOjS,IAEnB,GAAK,GAAKoS,IAASA,IAAS,EACxB,IAAM,IAAIC,GAAI,EAAGA,GAAIH,GAAO3a,OAAQ8a,KAChC,GAAKnY,KAAK2E,IAAKuT,GAAQF,GAAOG,KAAOlU,GAAY,CAC7C,IAAIwG,GAAI6N,EAAI9Z,SAAS0B,GAAIA,GAAIA,IAAGmC,IAAIkV,EAAI/Y,SAAS0B,GAAIA,IAAGmC,IAAImV,EAAIhZ,SAAS0B,IAAGmC,IAAIoV,KAChFlS,EAAOuH,OAAO3H,KAAK,IAAI5H,EAAQkN,GAAElL,EAAGkL,GAAEhL,IACtC,MAAMwY,CACV,CAGZ,CACR,CACJ,CAEA,OAAO1S,CACX,EAcAjJ,EAAOC,QAAQwe,wBAA0B,SAAS9X,EAAIC,EAAI+O,EAAIE,EAAImH,EAAIjM,EAAIC,GACtE,IAAItQ,EAAGU,EAAGC,EAAGC,EACT4K,EAAIC,EAAIC,EAAI6Q,EACZhU,EAAS,IAAIqH,EAGjB5P,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBb,EAAIsU,EAAGzT,UAAU,GACjBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,EAAE0E,IAAI8P,KACtB3J,EAAK,IAAIhL,EAASI,EAAE2B,EAAG3B,EAAE6B,GAEzBzC,EAAIiG,EAAGzE,SAAS,GAChBd,EAAIwF,EAAG1E,UAAU,GACjBb,EAAIsU,EAAGzT,SAAS,GAChBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,IAChB8K,EAAK,IAAIjL,EAASI,EAAE2B,EAAG3B,EAAE6B,GAEzBzC,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBb,EAAIX,EAAEqF,IAAI3E,GACVgL,EAAK,IAAIlL,EAASG,EAAE4B,EAAG5B,EAAE8B,GAEzB8Z,EAAK,IAAI/b,EAASyF,EAAG1D,EAAG0D,EAAGxD,GAE3B,IAAI+O,EAAQnB,EAAGA,EACXoB,EAAQnB,EAAGA,EAaXjF,EAZO,IAAIxE,EACX2E,EAAGjJ,EAAEiJ,EAAGjJ,EAAEkP,EAAOjG,EAAG/I,EAAE+I,EAAG/I,EAAE+O,EAC3B,GAAGhG,EAAGjJ,EAAEkJ,EAAGlJ,EAAEkP,EAAOjG,EAAG/I,EAAEgJ,EAAGhJ,EAAE+O,GAC9B,GAAGhG,EAAGjJ,EAAEmJ,EAAGnJ,EAAEkP,EAAOjG,EAAG/I,EAAEiJ,EAAGjJ,EAAE+O,GAAQ/F,EAAGlJ,EAAEkJ,EAAGlJ,EAAEkP,EAAOhG,EAAGhJ,EAAEgJ,EAAGhJ,EAAE+O,EACjE,EAAEhG,EAAGjJ,EAAEkP,GAAM8K,EAAGha,EAAI+Z,EAAG/Z,GAAK,EAAEiJ,EAAG/I,EAAE+O,GAAM+K,EAAG9Z,EAAI6Z,EAAG7Z,GAC/C,GAAGgJ,EAAGlJ,EAAEmJ,EAAGnJ,EAAEkP,EAAOhG,EAAGhJ,EAAEiJ,EAAGjJ,EAAE+O,GAClC,EAAE/F,EAAGlJ,EAAEkP,GAAM8K,EAAGha,EAAI+Z,EAAG/Z,GAAK,EAAEkJ,EAAGhJ,EAAE+O,GAAM+K,EAAG9Z,EAAI6Z,EAAG7Z,GAC/CiJ,EAAGnJ,EAAEmJ,EAAGnJ,EAAEkP,EAAO/F,EAAGjJ,EAAEiJ,EAAGjJ,EAAE+O,EAC/B,EAAE9F,EAAGnJ,EAAEkP,GAAM8K,EAAGha,EAAI+Z,EAAG/Z,GAAK,EAAEmJ,EAAGjJ,EAAE+O,GAAM+K,EAAG9Z,EAAI6Z,EAAG7Z,GACnD8Z,EAAGha,EAAEga,EAAGha,EAAEkP,EAAO,EAAE8K,EAAG9Z,EAAE6Z,EAAG7Z,EAAE+O,EAAO,EAAE+K,EAAGha,EAAE+Z,EAAG/Z,EAAEkP,EAC5C8K,EAAG9Z,EAAE8Z,EAAG9Z,EAAE+O,EAAO8K,EAAG/Z,EAAE+Z,EAAG/Z,EAAEkP,EAAO6K,EAAG7Z,EAAE6Z,EAAG7Z,EAAE+O,EAAOA,EAAKC,GAE/CtG,mBAAmB,EAAE,GACtC0O,EAAwBxO,GAExB,IAAM,IAAIxL,EAAI,EAAGA,EAAIwL,EAAMhL,OAAQR,IAAM,CACrC,IAAIF,EAAI0L,EAAMxL,GACV4N,EAAIjC,EAAGhK,SAAS7B,EAAIA,EAAIA,GAAG0F,IAAIoG,EAAGjK,SAAS7B,EAAIA,GAAG0F,IAAIqG,EAAGlK,SAAS7B,GAAG0F,IAAIkX,KAC7EhU,EAAOuH,OAAO3H,KAAK,IAAI5H,EAAQkN,EAAElL,EAAGkL,EAAEhL,GAC1C,CAEA,OAAO8F,CACX,EAkBAjJ,EAAOC,QAAQye,qBAAuB,SAAS/X,EAAIC,EAAI+O,EAAIE,EAAI1Q,EAAIE,GAC/D,IAAI3E,EAAGU,EAAGC,EAAGC,EACT4K,EAAIC,EAAIC,EAAI6Q,EACZE,EACA/c,EACAkG,EAAMnB,EAAGmB,IAAIjB,GACbkB,EAAMpB,EAAGoB,IAAIlB,GACb4D,EAAS,IAAIqH,EAajB5P,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBb,EAAIsU,EAAGzT,UAAU,GACjBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,EAAE0E,IAAI8P,KACtB3J,EAAK,IAAIhL,EAASI,EAAE2B,EAAG3B,EAAE6B,GAEzBzC,EAAIiG,EAAGzE,SAAS,GAChBd,EAAIwF,EAAG1E,UAAU,GACjBb,EAAIsU,EAAGzT,SAAS,GAChBZ,EAAIZ,EAAEqF,IAAI3E,EAAE2E,IAAI1E,IAChB8K,EAAK,IAAIjL,EAASI,EAAE2B,EAAG3B,EAAE6B,GAEzBzC,EAAIiG,EAAGzE,UAAU,GACjBd,EAAIwF,EAAG1E,SAAS,GAChBb,EAAIX,EAAEqF,IAAI3E,GACVgL,EAAK,IAAIlL,EAASG,EAAE4B,EAAG5B,EAAE8B,GAEzB8Z,EAAK,IAAI/b,EAASyF,EAAG1D,EAAG0D,EAAGxD,GAI3B/C,EAAI,IAAIc,EAASiE,EAAGhC,EAAIkC,EAAGlC,EAAGkC,EAAGpC,EAAIkC,EAAGlC,GAGxCka,EAAKhY,EAAGlC,EAAEoC,EAAGlC,EAAIkC,EAAGpC,EAAEkC,EAAGhC,EAczB,IAVA,IAAI4I,EAAQ,IAAIxE,EACZnH,EAAE0G,IAAIoF,GACN9L,EAAE0G,IAAIqF,GACN/L,EAAE0G,IAAIsF,GACNhM,EAAE0G,IAAImW,GAAME,GACd3R,WAKQjL,EAAI,EAAGA,EAAIwL,EAAMhL,OAAQR,IAAM,CACrC,IAAIF,EAAI0L,EAAMxL,GAEd,GAAK,GAAKF,GAAKA,GAAK,EAAI,CAGpB,IAAI+c,EAAKzW,EAAGR,KAAKS,EAAIvG,GACjBgd,EAAKzW,EAAGT,KAAKwP,EAAItV,GACjBse,EAAKhJ,EAAGxP,KAAK0P,EAAIxV,GAEjBue,EAAKxB,EAAGjX,KAAKkX,EAAIhd,GACjBwe,EAAKxB,EAAGlX,KAAKwY,EAAIte,GAEjBye,EAAMF,EAAGzY,KAAK0Y,EAAIxe,GAKjB8E,EAAGlC,GAAKoC,EAAGpC,EACPqD,EAAInD,GAAK2b,EAAI3b,GAAK2b,EAAI3b,GAAKoD,EAAIpD,GAChC8F,EAAOwH,YAAaqO,GAEhB3Z,EAAGhC,GAAKkC,EAAGlC,EACdmD,EAAIrD,GAAK6b,EAAI7b,GAAK6b,EAAI7b,GAAKsD,EAAItD,GAChCgG,EAAOwH,YAAaqO,GAEjBxY,EAAIrD,GAAK6b,EAAI7b,GAAK6b,EAAI7b,GAAKsD,EAAItD,GAAKqD,EAAInD,GAAK2b,EAAI3b,GAAK2b,EAAI3b,GAAKoD,EAAIpD,GAC1E8F,EAAOwH,YAAaqO,EAE5B,CACJ,CAEA,OAAO7V,CACX,CAGA,EAAE,CAAC,kBAAkB,EAAE,aAAa,EAAE,iBAAiB,IAAI,GAAG,CAAC,SAASjI,EAAQhB,EAAOC,GAYvF,IAAIgB,EAAUD,EAAQ,cAAcC,QAChCC,EAAWF,EAAQ,cAAcE,SACjCC,EAAWH,EAAQ,cAAcG,SACjCoG,EAAavG,EAAQ,kBAAkBuG,WACvC0L,EAAqBjS,EAAQ,wBAC7BsP,EAAetP,EAAQ,kBACvB+d,EAA8B/d,EAAQ,sBAEtCuS,EAASN,EAAmBK,KAehC,SAAS0L,EAAOC,EAAIC,GAChB,IAAIC,EAAQF,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BG,EAAQH,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BI,EAAQJ,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BK,EAAQL,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BM,EAAQN,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BO,EAAQP,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BQ,EAAQR,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BS,EAAQT,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BU,EAAQV,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BW,EAAQX,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/BY,EAAQZ,EAAG,GAAGC,EAAG,GAAKA,EAAG,GAAGD,EAAG,GAC/Ba,EAAQJ,EAAKE,EACbG,EAAQN,EAAKE,EAEjB,OAAO,IAAIpY,EACP4X,EAAGK,EAAKJ,EAAGA,EACXD,EAAGY,EAAQV,EAAGG,EAAK,EAAEJ,EAAGE,EACxBH,EAAGW,EAAQT,EAAGU,EAAQT,EAAGA,EAAK,EAAEF,EAAGG,EACnCJ,EAAGU,EAAKR,EAAGS,EAAQ,EAAER,EAAGC,EACxBF,EAAGQ,EAAKN,EAAGA,EAEnB,CAgBA,SAASS,EAAqBC,EAAc5e,EAAG0P,EAAIC,EAAIzL,EAAK2a,EAAKC,EAAK5X,GAClE,GAAmC,IAA/B0X,EAAazP,OAAOzP,OAAc,OAAOkf,EAC7C,GAAI1X,IAAMA,EAAEvG,aACR,IAAIoe,EAAK7X,EAAElG,UACf,IAAIge,EAAK,GACL/O,EAAK,IAAIpQ,EAAS,EAAG,GACrBof,EAAgB,EAAV5c,KAAKgO,GACX6O,EAASJ,EAAM,EACfK,EAAS9c,KAAK2E,IAAI8X,GAAOzc,KAAKgO,GAC9B+O,GAAK,IAAItf,GAAWiC,gBAAgB,EAAG4N,EAAKD,GAAIvN,OAAO0c,GACvDQ,GAAK,IAAIvf,GAAWiC,gBAAgB,EAAG4N,EAAKD,GAAIvN,OAAO0c,EAAMC,GAEjED,GAAO5O,EAAGrK,aAAaqK,EAAG9K,UAAUia,IAAOH,GAAOA,EAClDH,EAAM7O,EAAG9K,UAAUia,GAAIxZ,aAAaqK,EAAG9K,UAAUka,IACjDP,GAAOK,EAASF,EAAM5c,KAAK2E,IAAI8X,GAAOzc,KAAK2E,IAAI8X,KAASI,GAAU,EAAI,GAGtE,IAFA,IAEgB1f,EAAGH,EAFfigB,GAAK,IAAIxf,GAAWqC,OAAO+B,GAAKrD,SAASue,GAEpClgB,EAAI,EAASA,EAAI0f,EAAazP,OAAOzP,OAAQR,IAClDM,EAAIof,EAAazP,OAAOjQ,GACxBG,EAAI4Q,EAAG9K,UAAUma,GAAI1Z,aAAa/F,EAASwF,WAAWrF,EAAG,EAAOR,EAAE2F,UAAU4Z,GAAMvf,IAC9Esf,GAAO,GACPzf,GAAKA,EAAI,EAAI4f,GAAOA,IACXH,GACLE,EAAGxX,KAAKhI,IAEZH,GAAKA,EAAI,EAAI4f,GAAOA,IACXH,GACLE,EAAGxX,KAAKhI,GAIpB,OADAof,EAAazP,OAAS6P,EACfJ,CACX,CAQA,SAASW,EAAkBC,EAASC,GAChC,GAAuB,IAAnBD,EAAQ9f,QAAmC,IAAnB+f,EAAQ/f,OAQpC,IANA,IAKIyI,EALAuX,EAAO,SAAUlgB,EAAGsN,GAAiD,OAAxCtN,EAAIsN,EAAElL,IAAGpC,EAAIsN,EAAElL,GAAOpC,EAAIsN,EAAEhL,IAAGtC,EAAIsN,EAAEhL,GAAUtC,CAAG,EAC/E0F,EAAMsa,EAAQ3S,OAAO6S,EAAM,GAG3BxU,EAAc,KAFlBhG,EAAMua,EAAQ5S,OAAO6S,EAAMxa,IAChB,MAC0B7C,KAAKsd,MAEjCzgB,EAAI,EAAGA,EAAIsgB,EAAQ9f,QAAS,CACjC,IAAKyI,EAAI,EAAGA,EAAIsX,EAAQ/f,OAAQyI,IAC5B,GAAIqX,EAAQtgB,GAAG8F,aAAaya,EAAQtX,KAAO+C,EAAa,CACpDsU,EAAQrG,OAAOja,EAAG,GAClB,KACJ,CAEAiJ,GAAKsX,EAAQ/f,QACbR,GACR,CACJ,CAEA,IAAI0gB,EAAwB,CAWxBC,mBAAoB,SAAUC,EAAM/Q,EAAOqQ,EAAIC,GAK3C,IAJA,IAEIU,EACAC,EACKC,EAJLrY,EAAS,IAAIqH,EACbiR,EAAaJ,EAAKhO,OAAO,GAGb5S,EAAI,EAAGA,EAAIghB,EAAWxgB,OAAQR,IAC1C+gB,EAAQnR,EAAUoR,EAAWhhB,GAAI6P,EAAOqQ,EAAIC,GACvCU,IACDA,EAASE,GACTD,IACAT,EAAkBS,EAAU7Q,OAAQ8Q,EAAM9Q,QAC1CvH,EAAO0H,aAAa0Q,EAAU7Q,SAElC6Q,EAAYC,EAKhB,OAHID,GACApY,EAAO0H,aAAa0Q,EAAU7Q,QAE3BvH,CACX,EAaAuY,oBAAqB,SAAUC,EAAOrR,EAAOqQ,EAAIC,EAAIgB,GACjD,IAIIJ,EAAO/gB,EAJPgT,EAASN,EAAmBK,KAC5BqO,EAAcF,EAAMtO,OAAO,GAC3BsG,EAAK,IAAIxG,EAAmBM,EAAOG,KAAM,CAAC,EAAG,IAC7CzK,EAAS,IAAIqH,EAEbsR,EAAgB,SAAUC,EAAIC,GAC9BrI,EAAGtG,OAAO,GAAKwO,EAAYE,GAC3BpI,EAAGtG,OAAO,GAAKwO,EAAYG,GAE3BlB,GADAU,EAAQnR,EAAUsJ,EAAIrJ,EAAOqQ,EAAIC,IACTlQ,OAAQ,CAACmR,EAAYG,KAC7C7Y,EAAO0H,aAAa2Q,EAAM9Q,OAC9B,EACA,IAAKjQ,EAAI,EAAGA,EAAIohB,EAAY5gB,OAAS,EAAGR,IACpCqhB,EAAcrhB,EAAGA,EAAI,GAKzB,YAHsB,IAAXmhB,GAA0BA,GAAUD,EAAMrO,OAASG,EAAOI,MAAQ8N,EAAMrO,OAASG,EAAOQ,UAC/F6N,EAAcD,EAAY5gB,OAAS,EAAG,GAEnCkI,CACX,EAYA8Y,kBAAmB,SAAUC,EAAK5R,EAAOqQ,EAAIC,GACzCD,EAAKA,GAAMtf,EAASY,SACpB2e,EAAKA,GAAMvf,EAASY,SACpB,IAAIqK,EAAK4V,EAAI7O,OAAO,GAChB8O,EAAMD,EAAI7O,OAAO,GACjB+O,EAAMF,EAAI7O,OAAO,GACjBgP,EAAOH,EAAI7O,OAAO,GAClB+M,EAAM8B,EAAI7O,OAAO,GACjBiP,EAAOJ,EAAI7O,OAAO,GAatB,OAVIsN,EAAGze,cAAyB,IAATmgB,IAInB1B,EAAKA,EAAGve,SAASf,EAASY,SAASW,UAAU0J,EAAGnJ,EAAGmJ,EAAGjJ,GAAGK,OAAO2e,IAChE/V,EAAK,IAAInL,EAAQ,EAAG,GACpBkhB,EAAO,GAGLnC,EARI7P,EAAU8C,EAAmBmC,WAAWhJ,EAAI6V,EAAKC,GAAM9R,EAAOqQ,EAAIC,GAQ5CtU,EAAI6V,EAAKC,EAAKC,EAAMjC,EAAKkC,EAAM3B,EAEnE,EAmBA4B,wBAAyB,SAAUjW,EAAI6V,EAAKC,EAAK/V,EAAImW,EAAKC,GACtD,IAgBIhiB,EAhBAG,EAAI,CACJwhB,EAAMA,EAAK,EAAGD,EAAMA,GAAM,EAAIC,EAAMA,EAAM9V,EAAGnJ,GAAI,EAAIgf,EAAMA,EAAM7V,EAAGjJ,EACpE+e,EAAMA,EAAM9V,EAAGnJ,EAAImJ,EAAGnJ,EAAIgf,EAAMA,EAAM7V,EAAGjJ,EAAIiJ,EAAGjJ,EAAI8e,EAAMA,EAAMC,EAAMA,GAEtE9gB,EAAI,CACJmhB,EAAMA,EAAK,EAAGD,EAAMA,GAAM,EAAIC,EAAMA,EAAMpW,EAAGlJ,GAAI,EAAIqf,EAAMA,EAAMnW,EAAGhJ,EACpEof,EAAMA,EAAMpW,EAAGlJ,EAAIkJ,EAAGlJ,EAAIqf,EAAMA,EAAMnW,EAAGhJ,EAAIgJ,EAAGhJ,EAAImf,EAAMA,EAAMC,EAAMA,GAGtEC,EAAQxD,EAAOte,EAAGU,GAClBsa,EAAS8G,EAAMhX,WACfiX,EAAU,KACVC,GAAShiB,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAM+hB,EACxDE,GAASvhB,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMqhB,EACxDxZ,EAAS,IAAIqH,EAIbsS,EAAO,SAAUC,EAAKvc,EAAKC,GAAO,OAAO7C,KAAK6C,IAAID,EAAK5C,KAAK4C,IAAIC,EAAKsc,GAAO,EAChF,IAAKtiB,EAAI,EAAIA,EAAImb,EAAO3a,OAAQR,IAC5Bmb,EAAOnb,GAAKqiB,EAAKlH,EAAOnb,GAAI6L,EAAGjJ,EAAI+e,EAAK9V,EAAGjJ,EAAI+e,GAC/CxG,EAAOnb,GAAKqiB,EAAKlH,EAAOnb,GAAI4L,EAAGhJ,EAAIof,EAAKpW,EAAGhJ,EAAIof,GAInD7G,EAAOtO,MAAK,SAAU1M,EAAGU,GAAK,OAAOV,EAAIU,CAAG,IAG5C,IAFA,IAAI0hB,EAAc,GAET3f,EAAI,EAAGA,EAAIuY,EAAO3a,OAAQoC,IAAK,CACpC,IAAI4f,EAAQ,IAAIxb,EACZ7G,EAAE,GACFA,EAAE,GAAKgb,EAAOvY,GAAKzC,EAAE,GACrBA,EAAE,GAAKgb,EAAOvY,IAAMzC,EAAE,GAAKgb,EAAOvY,GAAKzC,EAAE,KAEzCuM,EAAO,MACPvJ,KAAK2E,IAAI0a,EAAMna,MAAM,IAAM,GAAKqE,EAAOvJ,KAAK2E,IAAI0a,EAAMna,MAAM,MAC5Dma,EAAMna,MAAM,GAAK,GACrB,IAAI6S,EAASsH,EAAMvX,WAEnBsX,EAAYja,KAAK,GACjB,IAAK,IAAI5F,EAAI,EAAGA,EAAIwY,EAAO1a,OAAQkC,IAAK,CACpC,IAAI+f,GACCtiB,EAAE,GAAK+a,EAAOxY,GAAKvC,EAAE,GAAKgb,EAAOvY,GAAKzC,EAAE,IAAM+a,EAAOxY,IACrDvC,EAAE,GAAKgb,EAAOvY,GAAKzC,EAAE,IAAMgb,EAAOvY,GAAKzC,EAAE,GAC1CgD,KAAK2E,IAAI2a,GAAQN,IACjBM,GACK5hB,EAAE,GAAKqa,EAAOxY,GAAK7B,EAAE,GAAKsa,EAAOvY,GAAK/B,EAAE,IAAMqa,EAAOxY,IACrD7B,EAAE,GAAKsa,EAAOvY,GAAK/B,EAAE,IAAMsa,EAAOvY,GAAK/B,EAAE,GAC1CsC,KAAK2E,IAAI2a,GAAQL,IACjB1Z,EAAOwH,YAAY,IAAIxP,EAAQwa,EAAOxY,GAAIyY,EAAOvY,KACjD2f,EAAY3f,IAAM,GAG9B,CACJ,CAEA,GAAI8F,EAAOuH,OAAOzP,QAAU,EACxB,OAAOkI,EAGX,IAAIga,EAAMha,EAAOuH,OACjB,GAAkB,GAAdyS,EAAIliB,QACJkiB,EAAMA,EAAIzI,OAAO,EAAG,IAChBA,OAAO,EAAG,QAEb,GAAkB,GAAdyI,EAAIliB,QACTkiB,EAAMA,EAAIzI,OAAO,EAAG,IAChBA,OAAO,EAAG,GACdyI,EAAIzI,OAAOsI,EAAYI,QAAQ,GAAI,QAElC,GAAkB,GAAdD,EAAIliB,OACTkiB,EAAIzI,OAAO,EAAG,GAEVsI,EAAYI,QAAQ,IAAM,EACtBD,EAAI,GAAG5c,aAAa4c,EAAI,IAAMA,EAAI,GAAG5c,aAAa4c,EAAI,IACtDA,EAAIzI,OAAO,EAAG,GAGdyI,EAAIzI,OAAO,EAAG,GAGbsI,EAAY,IAAMA,EAAY,IACnCG,EAAIzI,OAAO,EAAG,QAGjB,GAAkB,GAAdyI,EAAIliB,QAEa,GAAjB2a,EAAO3a,QACS,GAAjB2a,EAAO3a,SAAkC,GAAlB+hB,EAAY,IAA6B,GAAlBA,EAAY,IAA6B,GAAlBA,EAAY,IAA6B,GAAlBA,EAAY,MAExGG,EAAIzI,OAAO,EAAG,QAGjB,IAAkB,GAAdyI,EAAIliB,QAA6B,GAAdkiB,EAAIliB,UAC5BR,EAAIuiB,EAAYI,QAAQ,KACf,EAAG,CACU,GAAdD,EAAIliB,SACJR,GAAQ,GACZ,IACI2I,EAAIE,EAAI+Z,EADRC,EAAK7iB,GAAKA,EAAI,GAAK,EAAI,GAE3B2I,EAAK+Z,EAAI1iB,GAAG8F,aAAa4c,EAAI1iB,EAAI,IACjC6I,EAAK6Z,EAAI1iB,GAAG8F,aAAa4c,EAAIG,IAC7BD,EAAKF,EAAI1iB,EAAI,GAAG8F,aAAa4c,EAAIG,IAC7Bla,EAAKE,GAAMF,EAAKia,EAChBF,EAAIzI,OAAOja,EAAG,GAGd0iB,EAAIzI,OAAO4I,EAAI,EAEvB,CAGJ,IACI7W,EAAciW,EAAMhW,oBAExB,IADAD,GAAe,IAAM7I,KAAKsd,MACrBzgB,EAAI,EAAGA,EAAI0iB,EAAIliB,OAAS,GACrBkiB,EAAI1iB,GAAG8F,aAAa4c,EAAI1iB,EAAI,IAAMgM,EAClC0W,EAAIzI,OAAOja,EAAI,EAAG,GAGtBA,IAIJ,OADA0I,EAAOuH,OAASyS,EACTha,CACX,EAeAoa,qBAAsB,SAAShiB,EAAG0P,EAAIC,EAAI7L,EAAIE,GAC1C,IAAI4D,EACAqa,EAAS,IAAIpiB,EAASiE,EAAGlC,EAAGkC,EAAGhC,GAC/BogB,EAASriB,EAASwF,WAAWvB,EAAIE,GACjCtC,EAAS,IAAI7B,EAASG,EAAE4B,EAAG5B,EAAE8B,GAC7BiF,EAASkb,EAAOtd,SAASjD,GACzBygB,EAAS,IAAItiB,EAAUqiB,EAAItgB,GAAG8N,EAAGA,GAAMwS,EAAIpgB,GAAG6N,EAAGA,IACjDyS,EAAS,IAAIviB,EAAUkH,EAAKnF,GAAG8N,EAAGA,GAAK3I,EAAKjF,GAAG6N,EAAGA,IAElDtQ,EAAI6iB,EAAIzc,IAAI0c,GACZpiB,EAAImiB,EAAIzc,IAAI2c,GAEZniB,EAAIF,EAAEA,EAAIV,GADVW,EAAI+G,EAAKtB,IAAI2c,GAAS,GAGtBxW,EAAO,MACPV,EAAc,GAAK7I,KAAK6C,IAAI7C,KAAK2E,IAAI3H,GAAIgD,KAAK2E,IAAIjH,GAAIsC,KAAK2E,IAAIhH,IAAM4L,EAKzE,GAJIvJ,KAAK2E,IAAI/G,GAAKiL,IACdjL,EAAI,GAGHA,EAAI,EACL2H,EAAS,IAAIqH,EAAa,gBACvB,GAAKhP,EAAI,EAAI,CAChB,IAAIwK,EAAOpI,KAAKiB,KAAKrD,GACjBoiB,IAAStiB,EAAI0K,GAAQpL,EACrBijB,IAASviB,EAAI0K,GAAQpL,EAEzBijB,EAAOA,EAAM,EAAKA,EAAM1W,EAAQ0W,EAAM,EAAKA,EAAM1W,EAAO0W,IACxDD,EAAOA,EAAM,EAAKA,EAAMzW,EAAQyW,EAAM,EAAKA,EAAMzW,EAAOyW,GAE5C,GAAK,EAAIA,KAASC,EAAM,GAAK,EAAIA,GAErC1a,EAAS,IAAIqH,EADXoT,EAAM,GAAKC,EAAM,GAAOD,EAAM,GAAKC,EAAM,EACjB,UAEA,WAE9B1a,EAAS,IAAIqH,EACR,GAAKoT,GAAOA,GAAO,GACpBza,EAAOwH,YAAatL,EAAGgB,KAAKd,EAAIqe,IAC/B,GAAKC,GAAOA,GAAO,GACpB1a,EAAOwH,YAAatL,EAAGgB,KAAKd,EAAIse,IAE5C,KAAO,CACH,IAAItjB,GAAKe,EAAEV,EACN,GAAKL,GAAKA,GAAK,GAChB4I,EAAS,IAAIqH,GACNG,YAAatL,EAAGgB,KAAKd,EAAIhF,IAEhC4I,EAAS,IAAIqH,EAAa,UAElC,CAEA,OAAOrH,CACX,EAYA2a,kBAAmB,SAASze,EAAIE,EAAIsV,EAAIC,GACpC,IAAI3R,EACA4a,GAAQjJ,EAAG3X,EAAI0X,EAAG1X,IAAMkC,EAAGhC,EAAIwX,EAAGxX,IAAMyX,EAAGzX,EAAIwX,EAAGxX,IAAMgC,EAAGlC,EAAI0X,EAAG1X,GAClE6gB,GAAQze,EAAGpC,EAAIkC,EAAGlC,IAAMkC,EAAGhC,EAAIwX,EAAGxX,IAAMkC,EAAGlC,EAAIgC,EAAGhC,IAAMgC,EAAGlC,EAAI0X,EAAG1X,GAClE8gB,GAAQnJ,EAAGzX,EAAIwX,EAAGxX,IAAMkC,EAAGpC,EAAIkC,EAAGlC,IAAM2X,EAAG3X,EAAI0X,EAAG1X,IAAMoC,EAAGlC,EAAIgC,EAAGhC,GAEtE,GAAa,IAAR4gB,EAAY,CACb,IAAIC,EAAKH,EAAOE,EACZE,EAAKH,EAAOC,EAEX,GAAKC,GAAMA,GAAM,GAAK,GAAKC,GAAMA,GAAM,GACxChb,EAAS,IAAIqH,GACNE,OAAO3H,KACV,IAAI5H,EACAkE,EAAGlC,EAAI+gB,GAAM3e,EAAGpC,EAAIkC,EAAGlC,GACvBkC,EAAGhC,EAAI6gB,GAAM3e,EAAGlC,EAAIgC,EAAGhC,KAI/B8F,EAAS,IAAIqH,CAErB,MAEQrH,EAAS,IAAIqH,EADH,IAATuT,GAAuB,IAATC,EACW,aAEA,YAIlC,OAAO7a,CACX,EAYAib,gBAAiB,SAAS/e,EAAIE,EAAIsV,EAAIC,GAClC,IAAI3R,EAEA4a,GAAQjJ,EAAG3X,EAAI0X,EAAG1X,IAAMkC,EAAGhC,EAAIwX,EAAGxX,IAAMyX,EAAGzX,EAAIwX,EAAGxX,IAAMgC,EAAGlC,EAAI0X,EAAG1X,GAClE6gB,GAAQze,EAAGpC,EAAIkC,EAAGlC,IAAMkC,EAAGhC,EAAIwX,EAAGxX,IAAMkC,EAAGlC,EAAIgC,EAAGhC,IAAMgC,EAAGlC,EAAI0X,EAAG1X,GAClE8gB,GAAQnJ,EAAGzX,EAAIwX,EAAGxX,IAAMkC,EAAGpC,EAAIkC,EAAGlC,IAAM2X,EAAG3X,EAAI0X,EAAG1X,IAAMoC,EAAGlC,EAAIgC,EAAGhC,GAEtE,GAAa,IAAR4gB,EAAY,CACb,IAAIC,EAAKH,EAAOE,GAEhB9a,EAAS,IAAIqH,GACNE,OAAO3H,KACV,IAAI5H,EACAkE,EAAGlC,EAAI+gB,GAAM3e,EAAGpC,EAAIkC,EAAGlC,GACvBkC,EAAGhC,EAAI6gB,GAAM3e,EAAGlC,EAAIgC,EAAGhC,IAGnC,MAEQ8F,EAAS,IAAIqH,EADH,IAATuT,GAAuB,IAATC,EACW,aAEA,YAIlC,OAAO7a,CACX,GAGAkb,EAAuB,CAAC,EAU5B,SAAShU,EAAUiU,EAAQC,EAAQ5D,EAAIC,GACnC,IAEIzX,EAGIqb,EALJC,EAAMH,EACNI,EAAMH,EAGV,GAAY,OAARE,GAAwB,OAARC,EAEhB,GAAIF,EAASH,EAAqBI,EAAInR,MAClCnK,EAASqb,EAAOC,EAAKC,EAAK/D,EAAIC,QAE7B,GAAI4D,EAASH,EAAqBK,EAAIpR,MACvCnK,EAASqb,EAAOE,EAAKD,EAAK7D,EAAID,OAE7B,CACD,IAAItN,EAEAsR,EAASC,EAASC,EAAOC,EAEzBL,EAAInR,OAASG,EAAOM,QACpB4Q,EAAU,CAACF,EAAIpR,OAAO,GAAIoR,EAAIpR,OAAO,GAAIoR,EAAIpR,OAAO,IACpDwR,EAAQpR,EAAOO,UAGf2Q,EAAUF,EAAIpR,OAAOnG,QACrB2X,EAAQJ,EAAInR,MAGZoR,EAAIpR,OAASG,EAAOM,QACpB6Q,EAAU,CAACF,EAAIrR,OAAO,GAAIqR,EAAIrR,OAAO,GAAIqR,EAAIrR,OAAO,IACpDyR,EAAQrR,EAAOO,UAGf4Q,EAAUF,EAAIrR,OAAOnG,QACrB4X,EAAQJ,EAAIpR,MAIhB,IACIyR,EADAC,EAAM,EAENC,EAAUtE,aAActf,GAAYuf,aAAcvf,EACtD,GAAI4jB,EACA,GAAIJ,IAAUpR,EAAOO,SAAW8Q,IAAUrR,EAAOO,QAAS,CACtD,IAAIkR,EAAKC,EACL7b,EACAgD,EAAKqY,EAAQ,GAAIxC,EAAMwC,EAAQ,GAAIvC,EAAMuC,EAAQ,GACjDtY,EAAKuY,EAAQ,GAAIpC,EAAMoC,EAAQ,GAAInC,EAAMmC,EAAQ,GAErDjE,EAAKA,EAAGve,SAASf,EAASY,SAASW,UAAU0J,EAAGnJ,EAAGmJ,EAAGjJ,GAAGC,gBAAgB6e,EAAM6C,EAAK5C,EAAM4C,IAC1F1Y,EAAK,IAAInL,EAAQ,EAAG,GACpBghB,EAAMC,EAAM4C,EAEZpE,EAAKA,EAAGxe,SAASf,EAASY,SAASW,UAAUyJ,EAAGlJ,EAAGkJ,EAAGhJ,GAAGC,gBAAgBkf,EAAKC,IAC9EpW,EAAK,IAAIlL,EAAQ,EAAG,GACpBqhB,EAAMC,EAAM,EAGZyC,GADA5b,EAAKqX,EAAGpe,UAAUH,SAASwe,GAAI9b,oBACtBa,SAASpD,UAAUH,SAASkH,EAAG5D,YAAYnD,WAGpDigB,GAFA2C,EAAM7b,EAAGvG,OAECnC,EACV6hB,EAAM0C,EAAI3jB,EACV8K,EAAKA,EAAG5F,UAAUwe,GAClBH,EAAMpE,EAAGve,SAAS8iB,EAAI3iB,WAEtBoiB,EAAQ,GAAKrY,EACbqY,EAAQ,GAAKxC,EACbwC,EAAQ,GAAKvC,EACbwC,EAAQ,GAAKvY,EACbuY,EAAQ,GAAKpC,EACboC,EAAQ,GAAKnC,CACjB,KACK,CACD,IA0BQ9V,EA1BJyY,EAAc,SAAU9R,EAAMD,EAAQ5K,GACtC,IAAI4c,EAAa,SAAU5kB,GACvB4S,EAAO5S,GAAK4S,EAAO5S,GAAGiG,UAAU+B,EACpC,EAEA,GAAI6K,IAASG,EAAOG,KAChByR,EAAW,GACXA,EAAW,QAEV,GAAI/R,IAASG,EAAOY,QACrBgR,EAAW,GACXA,EAAW,GACXA,EAAW,OAEV,IAAI/R,IAASG,EAAOa,QAOrB,MAAM,IAAIzT,MAAM,kBAAoByS,GANpC+R,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,EAIf,CACJ,EAEIP,IAAUrR,EAAOO,UAEjBrH,EAAMiY,EAASA,EAAUD,EAASA,EAAUhY,EAC5CA,EAAMmY,EAAOA,EAAQD,EAAOA,EAAQlY,EACpCA,EAAMiU,EAAIA,EAAKD,EAAIA,EAAKhU,GAGxBkY,IAAUpR,EAAOO,SACb1H,EAAKqY,EAAQ,GAAIxC,EAAMwC,EAAQ,GAAIvC,EAAMuC,EAAQ,GAErDhE,EAAKA,EAAGve,SAASf,EAASY,SAASW,UAAU0J,EAAGnJ,EAAGmJ,EAAGjJ,GAAGC,gBAAgB6e,EAAM6C,EAAK5C,EAAM4C,IAC1F1Y,EAAK,IAAInL,EAAQ,EAAG,GACpBghB,EAAMC,EAAM4C,EAGZI,EAAYN,EAAOF,EADnBO,EAAMxE,EAAGpe,UAAUH,SAASwe,IAG5BmE,EAAMpE,EAENgE,EAAQ,GAAKrY,EACbqY,EAAQ,GAAKxC,EACbwC,EAAQ,GAAKvC,IAGbgD,EAAYP,EAAOF,EAAShE,GAC5ByE,EAAYN,EAAOF,EAAShE,GAC5BmE,EAAM1jB,EAASY,SAEvB,CAaJ,GAVI4iB,EAAQC,GACRN,EAAS,YAAcK,EAAQC,EAC/BzR,EAASsR,EAAQzW,OAAO0W,KAExBJ,EAAS,YAAcM,EAAQD,EAC/BxR,EAASuR,EAAQ1W,OAAOyW,IAG5Bxb,EAASgY,EAAsBqD,GAAQc,MAAM,KAAMjS,GAE/C4R,EACA,IAAK,IAAIxkB,EAAI,EAAGA,EAAI0I,EAAOuH,OAAOzP,OAAQR,IACtC0I,EAAOuH,OAAOjQ,GAAK0I,EAAOuH,OAAOjQ,GAAGiG,UAAUqe,EAG1D,MAEA5b,EAAS,IAAIqH,EAGjB,OAAOrH,CACX,CAEA,IAAI,IAAIoc,KAhKRlB,EAAqB5Q,EAAOU,MAAQgN,EAAsBC,mBAC1DiD,EAAqB5Q,EAAOS,UAAYiN,EAAsBO,oBAC9D2C,EAAqB5Q,EAAOQ,SAAWkN,EAAsBO,oBAC7D2C,EAAqB5Q,EAAOI,MAAQsN,EAAsBO,oBAC1D2C,EAAqB5Q,EAAOK,WAAaqN,EAAsBC,mBAC/DiD,EAAqB5Q,EAAOW,KAAO+M,EAAsBc,kBA2J1ChD,EACRA,EAA4BuG,eAAeD,KAC1CpE,EAAsBoE,GAAOtG,EAA4BsG,IAIjErlB,EAAOC,QAAUkQ,CAEjB,EAAE,CAAC,iBAAiB,EAAE,uBAAuB,GAAG,qBAAqB,GAAG,aAAa,EAAE,iBAAiB,KAAK,CAAC,EAAE,CAAC,GA9vImQ,CA8vI/P,inBC7vIjHoV,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB9jB,IAAjB+jB,EACH,OAAOA,EAAazlB,QAGrB,IAAID,EAASulB,EAAyBE,GAAY,CAGjDxlB,QAAS,CAAC,GAOX,OAHA0lB,EAAoBF,GAAUzlB,EAAQA,EAAOC,QAASulB,GAG/CxlB,EAAOC,OACf,CCtBAulB,EAAoBI,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOpkB,MAAQ,IAAIqkB,SAAS,cAAb,EAGhB,CAFE,MAAO3lB,GACR,GAAsB,iBAAX4lB,OAAqB,OAAOA,MACxC,CACA,CAPuB,SCAxB,IAAIC,EACAR,EAAoBI,EAAEK,gBAAeD,EAAYR,EAAoBI,EAAEM,SAAW,IACtF,IAAIC,EAAWX,EAAoBI,EAAEO,SACrC,IAAKH,GAAaG,IACbA,EAASC,gBACZJ,EAAYG,EAASC,cAAcC,MAC/BL,GAAW,CACf,IAAIM,EAAUH,EAASI,qBAAqB,UACzCD,EAAQvlB,SAAQilB,EAAYM,EAAQA,EAAQvlB,OAAS,GAAGslB,IAC5D,CAID,IAAKL,EAAW,MAAM,IAAIrlB,MAAM,yDAChCqlB,EAAYA,EAAUQ,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpFhB,EAAoB3kB,EAAImlB,yBCfxB,MAAMS,EAEFC,+BACI,IAAIC,EAASllB,KAAKklB,OAAOrY,KAAI/F,GAAcA,EAAE2K,OAE7C,OADAyT,EAAO9d,KAAK4d,EAAUG,eACfD,CACX,CAEAD,iBAAiBG,GACb,OAAOJ,EAAUK,SAASC,IAAIF,EAClC,CAGAH,qBAAqBG,GACjB,OAAOJ,EAAUE,OAAOK,MAAMC,GACnBJ,GAAaI,EAAMC,UAAYL,GAAaI,EAAME,SAEjE,CAEAT,eAAeU,GACX,OAAO1jB,KAAK2jB,MAAMD,EAAeX,EAAUa,WAC/C,CAEAZ,oBAAoBU,GAChB,IAAIP,EAAYO,EAAeX,EAAUa,WAGzC,OAFIT,EAAY,IACZA,EAAYJ,EAAUa,WAAaT,GAChCA,CACX,CAEAH,gBAAgBU,GACZ,IAAIP,EAAYJ,EAAUc,aAAaH,GACvC,OAAIX,EAAUe,UAAUX,GACbJ,EAAUG,cACdH,EAAUgB,cAAcZ,GAAW3T,IAC9C,CAEAwT,mBAAmBO,GACf,OAAIA,IAAUR,EAAUG,cACb,IAAInlB,KAAKqlB,SAASY,UACtB,IAAIzf,MAAM,IAAI0f,QAAQrZ,KAAI/N,IAAeA,EAAI,GAAGqF,YAC3D,CAGA8gB,cAAcU,GACV,IAAIP,EAAYJ,EAAUc,aAAaH,GACvC,OAAIX,EAAUe,UAAUX,GACbJ,EAAUK,SAASc,IAAIf,IAC1BA,EAAYJ,EAAUgB,cAAcZ,GAAWK,SAAW,GAAGthB,UACzE,CAEA8gB,sBAAsBmB,EAAKZ,EAAOa,GAC9B,IAAIjB,EACJ,GAAII,IAAUR,EAAUG,cACpBC,EAAY,IAAIJ,EAAUK,SAASiB,WAAWf,MAAK,EAAEgB,EAAM9U,KAAUA,GAAQ2U,IAAK,OAEjF,CAEDhB,EADgBJ,EAAUE,OAAOK,MAAMze,GAAM0e,GAAS1e,EAAE2K,OAClCgU,SAAWe,SAASJ,GAAO,CACrD,CAEA,OADeC,EAAOrB,EAAUa,WACdT,CACtB,CACAH,mBAAmBU,GACf,IAAIU,EAAOrB,EAAUyB,QAAQd,GACzBP,EAAYJ,EAAUc,aAAaH,GACvC,GAAIX,EAAUe,UAAUX,GAAY,CAEhC,OADUJ,EAAUK,SAASc,IAAIf,GACpB,IAAMiB,CACvB,CACK,CACD,IAAIb,EAAQxlB,KAAKgmB,cAAcZ,GAE/B,OADUA,EAAYI,EAAMC,SAAW,EAC1B,KAAOD,EAAM/T,KAAO,IAAM4U,CAC3C,CACJ,EAGJrB,EAAUa,WAAa,IACvBb,EAAUG,cAAgB,SAE1BH,EAAUE,OAAS,CACf,CAAEO,SAAU,EAAGC,QAAS,GAAIjU,KAAM,WAClC,CAAEgU,SAAU,GAAIC,QAAS,GAAIjU,KAAM,UACnC,CAAEgU,SAAU,GAAIC,QAAS,GAAIjU,KAAM,YACnC,CAAEgU,SAAU,GAAIC,QAAS,IAAKjU,KAAM,WACpC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,WACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,UACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,UACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,QACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,UACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,UACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,WACrC,CAAEgU,SAAU,IAAKC,QAAS,IAAKjU,KAAM,WAGzCuT,EAAUK,SAAW,IAAIqB,IAAI,CACzB,CAAC,GAAI,aACL,CAAC,GAAI,gBACL,CAAC,IAAK,uBACN,CAAC,IAAK,uBACN,CAAC,IAAK,qBACN,CAAC,IAAK,gBACN,CAAC,IAAK,cACN,CAAC,IAAK,uBACN,CAAC,IAAK,uBACN,CAAC,IAAK,iBAEV,uBClGA,IAAIC,EAAY,KAEZT,EAAO,CAAC/N,OAAO,EAAOyO,MAAK,EAAOC,IAAI,EAAOC,MAAM,EAAOjnB,GAAE,EAAOZ,GAAE,EAAO8nB,KAAI,GAEhFC,EAAU,ICXC,MAGXC,IAAM,wDAGNC,KAAO,GAEPC,OAAS,GAETC,YAAc,GAEdC,QAAU,EACVC,QAAU,EAEVC,UAAY,IACZC,UAAY,GAGZC,aAAe,CACX,CAACC,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,GACzB,CAACD,MAAM,UAAWC,MAAO,IAI7BC,GAAKlG,GAAGmG,cAERC,IAAMpG,GAAGmG,cAETE,KAAOrG,GAAGqG,OAEVC,KAAOtG,GAAGuG,WAAWjoB,KAAK8nB,KACrBI,MAAM,IACNC,eAAe,KACfC,cAAc,GACnBC,WAAQnoB,EACRooB,KAAO5G,GAAG4G,OACLC,YAAY,CAAC,EAAGC,MAGrB7nB,cACIX,KAAK+nB,KACAU,MAAM/G,GAAGgH,gBACTlnB,GAAG3B,GAAcG,KAAK8nB,IAAIjoB,EAAE2B,KAC5BiT,GAAG,GACH/S,GAAG7B,GAAcA,EAAG,GAC7B,CAGA8oB,aAAaC,GACT,IAAoB9pB,EAAhBgI,EAAI8hB,EAAItpB,OACZ,KAAOwH,GACHhI,EAAImD,KAAK2jB,MAAM3jB,KAAK4mB,SAAW/hB,MAC9B8hB,EAAI9pB,GAAI8pB,EAAI9hB,IAAM,CAAC8hB,EAAI9hB,GAAI8hB,EAAI9pB,IAEpC,OAAO8pB,CACX,CAGAE,gBACI9oB,KAAKynB,aAAeznB,KAAK2oB,aAAa3oB,KAAKynB,aAC/C,CAGAsB,eACI,IAAIC,EAAQtH,GAAGuH,OAAO,kBAClBC,EAAQlpB,KAAKmnB,OAAOta,KAAKsc,GAASA,EAAKC,OAAOvc,KAAKwc,GAAUA,EAAMC,UAAQC,OAC1E5d,MAAK,CAAC1M,EAAEU,IAAMV,EAAIU,IACvBK,KAAKqnB,QAAU6B,EAAM,GACrBlpB,KAAKsnB,QAAU4B,EAAMA,EAAM5pB,OAAS,GACpCU,KAAK4nB,GAAG4B,OAAO,CAACxpB,KAAKqnB,QAAUrnB,KAAKunB,SAASvnB,KAAKsnB,UAC7Cre,MAAM,CAAC,EAAGwgB,OAAOT,EAAMU,KAAK,YACjC1pB,KAAK8nB,IAAI0B,OAAOxpB,KAAK4nB,GAAG4B,UACnBvgB,MAAM,CAAC,IAAIwgB,OAAO/H,GAAGuH,OAAO,eAAeU,OAAOC,aAAe5pB,KAAKwnB,WAC3E9F,GAAGuH,OAAO,eAAe1U,KAAK,cAAsBvU,KAAKqnB,UACzD3F,GAAGuH,OAAO,aAAa1U,KAAK,cAAsBvU,KAAKsnB,UACvD5F,GAAGuH,OAAO,OACL5pB,KAAKW,KAAKqoB,OACVhpB,KAAKW,KAAKqoB,MAAMwB,KAAM7pB,KAAK4nB,GAAG3e,QAAQ4D,KAAI5M,GAASA,EAAQwpB,OAAOT,EAAMU,KAAK,SAClFhI,GAAGuH,OAAO,SACL5pB,KAAKW,KAAKsoB,MACf5G,GAAGuH,OAAO,eACL5pB,KAAKW,KAAKgoB,KACnB,CAGA8B,SAASC,EAAMC,GACXhqB,KAAKqoB,MAAQ3G,GAAGuI,SACXC,OAAO,CAAC,CAACH,EAAKvoB,EAAE,GAAG,CAACuoB,EAAKvoB,EAAIuoB,EAAK1W,MAAM,MACxC8W,GAAG,QAASH,GAEjBtI,GAAGuH,OAAO,OACL5pB,KAAKW,KAAKqoB,OACVhpB,KAAKW,KAAKqoB,MAAMwB,KAAM7pB,KAAK4nB,GAAG3e,QAAQ4D,KAAI5M,GAASA,EAAQ8pB,EAAKvoB,IACzE,CAGA4oB,QAAQL,EAAMM,GACV,IAAIC,EAAW,CAAC,CAAC,EAAE,GAAG,CAACP,EAAK1W,MAAMqO,GAAGuH,OAAO,eAAeU,OAAOY,eAClEvqB,KAAKsoB,KACA4B,OAAOI,GACPE,gBAAgBF,GAChBH,GAAG,OAAQE,GAEhB3I,GAAGuH,OAAO,SACLS,KAAK,QAAShI,GAAGuH,OAAO,eAAeU,OAAOC,YAAc,KAC5DF,KAAK,SAAUhI,GAAGuH,OAAO,eAAeU,OAAOY,cAC/Cb,KAAK,YAAa,oBAClBrqB,KAAKW,KAAKsoB,KACnB,CAGAmC,oBAAoBV,GAChB,IAAIO,EAAW,CAAC,CAAC,EAAE,GAAG,CAACP,EAAK1W,MAAMqO,GAAGuH,OAAO,eAAeU,OAAOY,eAClEvqB,KAAKqoB,MAAM6B,OAAO,CAAC,CAACH,EAAKvoB,EAAE,GAAG,CAACuoB,EAAKvoB,EAAIuoB,EAAK1W,MAAM,MACnDqO,GAAGuH,OAAO,SACLS,KAAK,QAAShI,GAAGuH,OAAO,eAAeU,OAAOC,YAAc,KAC5DF,KAAK,SAAUhI,GAAGuH,OAAO,eAAeU,OAAOY,cACpDvqB,KAAKsoB,KACA4B,OAAOI,GACPE,gBAAgBF,GACrBtqB,KAAKgoB,KAAKG,cAA8D,IAA/CzG,GAAGuH,OAAO,eAAeU,OAAOY,aAC7D,CAGAG,mBACI,IAAI,IAAIhD,KAAS1nB,KAAKynB,aAClB,IAAKC,EAAMC,MAEP,OADAD,EAAMC,QACCD,EAAMA,MAGrB,IAAIiD,EAAMjJ,GAAGuH,OAAO,eAAeU,OAAO1pB,MAE1C,OADAD,KAAK4qB,SAASD,GACPA,CACX,CAGAC,SAASlD,GACL,IAAImD,EAAM7qB,KAAKynB,aAAaqD,WAAUpsB,GAAKA,EAAEgpB,QAAUA,KAC1C,IAATmD,GACA7qB,KAAKynB,aAAaoD,GAAKlD,OAC/B,CAGAoD,WAAWrD,GACP,IAAImD,EAAM7qB,KAAKynB,aAAaqD,WAAUpsB,GAAKA,EAAEgpB,QAAUA,KAC1C,IAATmD,IACA7qB,KAAKynB,aAAaoD,GAAKlD,QACnB3nB,KAAKynB,aAAaoD,GAAKlD,MAAQ,IAC/B3nB,KAAKynB,aAAaoD,GAAKlD,MAAQ,GAE3C,CAGAqD,YAAYC,EAAUC,GAClBlrB,KAAK+qB,WAAWE,GAChBjrB,KAAK4qB,SAASM,EAClB,CAGAC,YACQnrB,KAAKmnB,OAAO7nB,OAAS,IACrBU,KAAKmnB,OAAS,GACdnnB,KAAKynB,aAAa2D,SAAQC,GAAMA,EAAG1D,MAAQ,IAEnD,CAGA2D,eAAenC,GACX,GAAIA,EAAM,CACN,IAAI0B,EAAM7qB,KAAKmnB,OAAO2D,WAAUpsB,GAAKA,EAAE6sB,UAAYpC,IACnDnpB,KAAKmnB,OAAOpO,OAAO8R,EAAI,EAC3B,CACJ,GD7LAW,EAAQ,IEdG,MAEXC,UAAY,GAEZ9kB,KAAO,IAEP+kB,UAAY,GAEZ7mB,IAAM,EAENC,IAAM,EAEN6mB,OAAS,IAEThrB,YAAYqmB,GACRhnB,KAAKgnB,QAAUA,CACnB,CAGA4E,cAAcC,EAAQC,GAClB,OAAOA,EAAarK,QAAQoK,EAAOpf,QAAO,CAACsf,EAAMC,KAC7C,IAEIxe,EAFAye,EAAQH,EAAarK,QAAQsK,GAC7BG,EAAQJ,EAAarK,QAAQuK,GAQjC,OALIxe,GADW,IAAXye,IAA2B,IAAXC,EACVH,GACU,IAAXE,IAA2B,IAAXC,IAA2B,IAAXD,IAA2B,IAAXC,GACnC,IAAXD,EAAgBD,EAAOD,EAEvBE,EAAQC,EAASH,EAAOC,EAC5Bxe,CAAG,IAElB,CAGA2e,qBAEA,CAEAC,gBAEA,CAGAC,eAAelD,EAAMmD,EAAQC,EAAOC,EAAOC,EAAOrD,EAAQsD,GAEtD,IAAK,IAAIrD,KAASF,EAAKC,OAAQ,CAE3B,IAAIyC,EAASxC,EAAMsD,QAAQ9f,KAAKsc,GAASA,EAAK1X,OAE1Cqa,EAAeQ,EAAOzf,KAAKsc,GAASA,EAAK1X,OAEzCmb,EAAS5sB,KAAK4rB,cAAcC,EAAQC,GAEpCe,EAAQ,CACRC,GAAIzD,EAAMyD,GACVrb,KAAM4X,EAAM5X,KACZsb,KAAM1D,EAAM2D,YACZC,KAAM5D,EAAM4D,KAAKvN,KACjBiN,QAASd,EACTqB,IAAK/D,EAAK1X,KACV0b,MAAO9D,EAAMC,MACb5nB,OAAGxB,GAGP,GAAI2rB,EAAOuB,MAAK3uB,GAAKqtB,EAAarK,QAAQhjB,IAAM,IAAI,CAEhD,IAAI4uB,OAAoBntB,IAAdmpB,EAAMiE,IAAoBjE,EAAMiE,IAAMjE,EAAMC,MAAQ,EAE1DxH,EAAOwK,EAAOM,GAAQJ,MAAQA,GAAS,EAAI,EAa/C,GAXAC,EAAMrlB,KACF,CAAC5F,EAAG6nB,EAAMC,MAAQtpB,KAAKyrB,UAAW/pB,EAAG8qB,GACrC,CAAChrB,EAAG6nB,EAAMC,MAAO5nB,EAAG4qB,EAAOM,GAAQJ,MAAQ1K,EAAM9hB,KAAK0rB,WACtD,CAAClqB,EAAG6nB,EAAMC,MAAQ+D,EAAK3rB,EAAG4qB,EAAOM,GAAQJ,MAAQ1K,EAAM9hB,KAAK0rB,WAC5D,CAAClqB,EAAG6nB,EAAMC,MAAQ+D,EAAMrtB,KAAKyrB,UAAW/pB,EAAG8qB,IAE3CnD,EAAMC,MAAQtpB,KAAKyrB,UAAYzrB,KAAK8E,MACpC9E,KAAK8E,IAAMukB,EAAMC,MAAQtpB,KAAKyrB,WAC9BpC,EAAMC,MAAQtpB,KAAKyrB,UAAYzrB,KAAK6E,MACpC7E,KAAK6E,IAAMwkB,EAAMC,MAAQtpB,KAAKyrB,YAE5BI,EAAOuB,MAAK3uB,GAAK8tB,EAAM9K,QAAQhjB,IAAM,IAAK,CAC5C,IAAI8uB,EAASjB,EAAOM,GAAQJ,QAAmB,IAAT1K,EAAcA,EAAM9hB,KAAK0rB,UAAY,EAAI1rB,KAAK0rB,WAChFle,EAAMkf,EAAanH,MAAM8F,GAAOA,EAAG7pB,IAAMqrB,EAAMvD,OAAS+B,EAAG3pB,IAAM6rB,GAAUlC,EAAGyB,KAAOzD,EAAMyD,KAC/FD,EAAMnrB,EAAI6rB,OACErtB,IAARsN,EACAkf,EAAatlB,KAAK,CAAC5F,EAAE6nB,EAAMC,MAAO5nB,EAAE6rB,EAAQC,UAAU,CAACX,KAEvDrf,EAAIggB,UAAUpmB,KAAKylB,EAC3B,CACJ,MAGShB,EAAOuB,MAAK3uB,GAAK8tB,EAAM9K,QAAQhjB,IAAM,MACtCouB,EAAMnrB,EAAI8qB,EAAQxsB,KAAK0rB,UACvBtC,EAAOhiB,KAAKylB,GAGxB,CACJ,CAGAY,WAEI,IAAIrE,EAAS,GAETkD,EAAS,GAETE,EAAQ9K,GAAGuH,OAAO,eAAeU,OAAOY,aAAe,EAEvDmC,EAAe,GAEnB1sB,KAAKgnB,QAAQI,YAAc,GAE3B,IAAImF,EAAQvsB,KAAKgnB,QAAQG,OAAOta,KAAKsc,GAASA,EAAK1X,OAEnD,IAAK,IAAKoZ,EAAI1B,KAASnpB,KAAKgnB,QAAQG,OAAOb,UAAW,CAElDtmB,KAAK6E,IAAM7E,KAAKgnB,QAAQK,QAAUrnB,KAAKyrB,UACvCzrB,KAAK8E,IAAM9E,KAAKgnB,QAAQM,QAAUtnB,KAAKyrB,UAEvCc,EAAMxT,OAAOwT,EAAM9K,QAAQ0H,EAAK1X,MAAO,GAEvC+a,IAAY3B,EAAM,GAAO,EAAKA,GAAOA,GAAO7qB,KAAK2G,KAEhDkkB,EAAM,GAAO,EAAI7qB,KAAKgnB,QAAQI,YAAYhgB,KAAK+hB,EAAKoC,SAAWvrB,KAAKgnB,QAAQI,YAAYsG,QAAQvE,EAAKoC,SAEtG,IAAIkB,EAAQ,CAAC,CAACjrB,EAAGxB,KAAK6E,IAAM7E,KAAK2rB,OAAQjqB,EAAG8qB,IAE5CxsB,KAAKqsB,eAAelD,EAAMmD,EAAQC,EAAOC,EAAOC,EAAOrD,EAAQsD,GAE/DD,EAAMrlB,KAAK,CAAC5F,EAAGxB,KAAK8E,IAAM9E,KAAK2rB,OAAQjqB,EAAG8qB,IAE1CF,EAAOllB,KAAK,CAACqK,KAAM0X,EAAK1X,KAAM8Z,QAASpC,EAAKoC,QAASiB,MAAOA,EAAOC,MAAOA,EAAO/E,MAAOyB,EAAKzB,MAAOiG,QAAQxE,EAAKyE,UACrH,CACA,MAAO,CAACC,MAAOvB,EAAQlD,OAAQA,EAAQsD,aAAcA,EACzD,CAGAoB,YAAYnuB,GACRK,KAAKgnB,QAAQ+B,eACb,MAAMgF,EAAe/tB,KAAKgnB,QAAQG,OAAO7nB,OACzC,IAAI0uB,EAAO,IAAIxnB,MAAMunB,GAAc7H,QACnC8H,EAAOhuB,KAAKgnB,QAAQ2B,aAAaqF,GACjChuB,KAAKgnB,QAAQG,OAAS6G,EAAKnhB,KAAI/N,GAAKkB,KAAKgnB,QAAQG,OAAOroB,KACxDa,EAAEsuB,QAAQjuB,KAAKytB,WACnB,CAGAS,UAAUC,EAAUC,GAChB,IAAIxuB,EAAI,IAAI4G,MAAM4nB,GAAUC,KAAK,GAC7B7gB,EAAM,CAAC,IAAI2gB,IACXrvB,EAAI,EACR,KAAOA,EAAIsvB,GACHxuB,EAAEd,GAAKA,GACHA,EAAI,GAAM,GACTqvB,EAAS,GAAIA,EAASrvB,IAAM,CAACqvB,EAASrvB,GAAIqvB,EAAS,KAEnDA,EAASvuB,EAAEd,IAAKqvB,EAASrvB,IAAM,CAACqvB,EAASrvB,GAAIqvB,EAASvuB,EAAEd,KAC7D0O,EAAIpG,KAAK,IAAI+mB,IACbvuB,EAAEd,KACFA,EAAI,IAEJc,EAAEd,GAAK,EACPA,KAGR,OAAO0O,CACX,CAGA8gB,wBAAwBpH,GACpB,IAAI2G,EAAQ3G,EAAKra,KAAIsc,GAAQA,EAAKsD,QAC9B8B,EAAQ,GACRC,EAAS,EAEb,IAAK,IAAI1vB,EAAI,EAAGA,EAAI+uB,EAAMvuB,OAAQR,IAC9B,IAAK,IAAIiJ,EAAIjJ,EAAI,EAAGiJ,EAAI8lB,EAAMvuB,OAAQyI,IAClCwmB,EAAMnnB,KAAK,CAACtI,EAAEiJ,IAEtB,IAAK,IAAKjJ,EAAEiJ,KAAMwmB,EAAM,CAGpBC,GAFU,YAAgB,QAAY,OAAQ,CAAC3uB,EAAGG,KAAKgnB,QAAQe,KAAK8F,EAAM/uB,MACtE,QAAY,OAAQ,CAACe,EAAGG,KAAKgnB,QAAQe,KAAK8F,EAAM9lB,OACtCgH,OAAOzP,MACzB,CACA,OAAOkvB,CACX,CAGAC,gBAAgB9uB,GACZK,KAAKgnB,QAAQ+B,eACb,MAAMgF,EAAe/tB,KAAKgnB,QAAQG,OAAO7nB,OACnC0uB,EAAO,IAAIxnB,MAAMunB,GAAc7H,QAC/BwI,EAAe1uB,KAAKkuB,UAAUF,EAAMD,GAE1C,IAAIY,EAEJ,IAAK,IAAIC,KAAQF,EAAc,CAE3B1uB,KAAKgnB,QAAQG,OAASyH,EAAK/hB,KAAIpO,GAAKuB,KAAKgnB,QAAQG,OAAO1oB,KAExD,IAAIowB,EAAW7uB,KAAKytB,SAASztB,KAAKgnB,QAAQG,QAEtCqH,EAASxuB,KAAKsuB,wBAAwBO,EAAShB,aAGlC3tB,IAAbyuB,GAA0BA,EAASH,OAASA,KAC5CG,EAAW,CAACH,OAAQA,EAAQI,KAAMA,EAAMphB,IAAKqhB,GACrD,CAEA7uB,KAAKgnB,QAAQG,OAASwH,EAASC,KAAK/hB,KAAIpO,GAAKuB,KAAKgnB,QAAQG,OAAO1oB,KAEjEkB,EAAEsuB,QAAQU,EAASnhB,IACvB,CAIAshB,SAASC,EAAYxC,GAEjB,IAAIyC,EAAQ,GAaZ,OAXAD,EAAW3D,SAAS/B,IAChB,IAAIsD,EAAUtD,EAAMsD,QAAQ9f,KAAKsc,GAAQA,EAAK1X,OAE9Ckb,EAAQvB,SAAU6D,IACdtC,EAAQvB,SAAU8D,IACVD,IAAWC,IAAqC,IAA3B3C,EAAM9K,QAAQwN,KAA6C,IAA3B1C,EAAM9K,QAAQyN,IACnEF,EAAM5nB,KAAK,CAAC,OAASmlB,EAAM9K,QAAQwN,GAAS,OAAS1C,EAAM9K,QAAQyN,IACvE,GACH,GACJ,IAEEF,CACX,CAGAG,UAAUC,GACN,IAAIhG,EAASgG,EAAOviB,KAAIpO,GAAKA,EAAE2qB,SAAQG,OAGvC,OAFAH,EAASA,EAAOiG,QAAO,CAACpvB,EAAOuX,EAAO8X,IAAS9X,IAAU8X,EAAKxE,WACzDlsB,GAAMA,EAAE2wB,QAAUtvB,EAAMsvB,OAAS3wB,EAAEkuB,KAAO7sB,EAAM6sB,OAC9C1D,CACX,CAGAoG,mBAAmBjD,GAEf,IAAIkD,EAAW,GAEXV,EAAa/uB,KAAKmvB,UAAUnvB,KAAKgnB,QAAQG,QAO7C,OALAnnB,KAAKgnB,QAAQG,OAAOiE,SAASjC,GAASsG,EAASroB,KAAK,CAAC,IAAOpH,KAAKgnB,QAAQG,OAAO1F,QAAQ0H,GAAO,KAAQ3iB,MAAM+lB,EAAMjtB,OAAS,GAAG+uB,KAAK,OAExHruB,KAAK8uB,SAASC,EAAYxC,GAEhCnB,SAAQjC,IAASsG,EAAStG,EAAK8F,QAAQS,KAAKvG,EAAK+F,UAAWO,EAAStG,EAAK+F,QAAQQ,KAAKnD,EAAMjtB,SAAO,IACnGmwB,CACX,CAGAE,eAAehwB,GAEXK,KAAKgnB,QAAQ+B,eAGb,MAAMwD,EAAQvsB,KAAKgnB,QAAQG,OAAOta,KAAKsc,GAASA,EAAK1X,OAErD,IAAIge,EAAWzvB,KAAKwvB,mBAAmBjD,GAEvCkD,EAAS9jB,MAAK,CAAC1M,EAAEU,KACb,GAAIV,EAAEywB,KAAKnD,EAAMjtB,QAAUK,EAAE+vB,KAAKnD,EAAMjtB,QACpC,OAAO,EACN,GAAIL,EAAEywB,KAAKnD,EAAMjtB,UAAYK,EAAE+vB,KAAKnD,EAAMjtB,QAM3C,OAAQ,EALR,IAAK,IAAIurB,EAAM,EAAGA,EAAM0B,EAAMjtB,OAAQurB,IAClC,GAAI5rB,EAAEywB,KAAK7E,KAASlrB,EAAE+vB,KAAK7E,IAAQ4E,EAAShO,QAAQxiB,KAAO4rB,GAAO4E,EAAShO,QAAQ9hB,KAAOkrB,EACtF,OAAO5rB,EAAEywB,KAAK7E,GAAOlrB,EAAE+vB,KAAK7E,EAG5B,IAGhB,MAAMW,EAAQiE,EAAS5iB,KAAMsc,GAASA,EAAK0B,MAC3C7qB,KAAKgnB,QAAQG,OAASqE,EAAM3e,KAAI/N,GAAKkB,KAAKgnB,QAAQG,OAAOroB,KAEzDa,EAAEsuB,QAAQjuB,KAAKytB,WACnB,CAGAmC,aAAa/qB,EAAKC,GACd,OAAO7C,KAAK4mB,UAAY/jB,EAAMD,EAAM,GAAKA,CAC7C,CAIAgrB,UAAY,CAACC,EAAKC,EAAWC,KACzB,IAAIC,EAAO,KACPD,IACAC,EAAOH,EAAII,UAAU,SAChBhJ,KAAK8I,GAAWG,QAChBC,OAAO,QACPC,QAAQ,QAAQ,GAChB3G,KAAK,MAAM7pB,GAAKkwB,EAAUlwB,EAAEovB,QAAQztB,IACpCkoB,KAAK,MAAM7pB,GAAKkwB,EAAUlwB,EAAEovB,QAAQvtB,IACpCgoB,KAAK,MAAM7pB,GAAKkwB,EAAUlwB,EAAEqvB,QAAQ1tB,IACpCkoB,KAAK,MAAM7pB,GAAKkwB,EAAUlwB,EAAEqvB,QAAQxtB,IACpC4uB,MAAM,SAAU,SAWzB,MAAO,CARMR,EAAII,UAAU,SACtBhJ,KAAK6I,GAAWI,QAChBC,OAAO,UACPC,QAAQ,QAAQ,GAChB3G,KAAK,MAAM7pB,GAAKA,EAAE2B,IAClBkoB,KAAK,MAAM7pB,GAAKA,EAAE6B,IAClBgoB,KAAK,IAAK,MAEDuG,EAAK,EAQvBM,YAAY5wB,GAERK,KAAKgnB,QAAQ+B,eAEb,MAAMwD,EAAQvsB,KAAKgnB,QAAQG,OAAOta,KAAKsc,GAASA,EAAK1X,OAErD,IAAI+e,EAAQ,GAEZjE,EAAMnB,SAAQjC,GAAQqH,EAAMppB,KAAK,CAAC,GAAK+hB,EAAK3R,MAAO,EAAK,IAAK,EAAIxX,KAAK4vB,aAAa,IAAI,SAEvF,IAAIH,EAAWzvB,KAAKwvB,mBAAmBjD,GAEnCkE,EAAQ,GACZ,IAAK,IAAI3xB,EAAI,EAAGA,EAAIytB,EAAMjtB,OAAQR,IAC9B,IAAK,IAAIiJ,EAAIjJ,EAAI,EAAGiJ,EAAIwkB,EAAMjtB,OAAQyI,IAC9B0nB,EAAS3wB,GAAG4wB,KAAK3nB,IACjB0oB,EAAMrpB,KAAK,CAAC6nB,OAAQnwB,EAAGowB,OAAQnnB,EAAG2oB,OAAQjB,EAAS3wB,GAAG4wB,KAAK3nB,KAIvE,IAAI4oB,EAAcjP,GAAGmG,cAChB2B,OAAO9H,GAAGwI,OAAOuG,GAAS5wB,GAAeA,EAAE6wB,UAC3CznB,MAAM,CAAC,GAAI,IAEhByY,GAAGkP,kBAAkBJ,MAAMA,GACtBK,MAAM,OAAOnP,GAAGoP,UAAUL,GAAOM,UAAUryB,GAAMiyB,EAAYjyB,EAAEgyB,UAASxlB,SAAS,IACjF2lB,MAAM,IAAKnP,GAAGsP,OAAO,MACrBH,MAAM,UAAWnP,GAAGuP,eAAeC,OAAO,KAC1CL,MAAM,SAAUnP,GAAGyP,gBAAgBJ,SAAS,IAC5C5G,GAAG,OAAO,KAEPqG,EAAM7kB,MAAK,CAAC1M,EAAEU,IAAMV,EAAEyC,EAAI/B,EAAE+B,IAE5B,MAAM8pB,EAAQgF,EAAM3jB,KAAIsc,GAAQA,EAAK3R,QAErCxX,KAAKgnB,QAAQG,OAASqE,EAAM3e,KAAI/N,GAAKkB,KAAKgnB,QAAQG,OAAOroB,KAEzDa,EAAEsuB,QAAQjuB,KAAKytB,WAAW,GAEtC,GF7VkBzG,GAElBoK,EAAQ,IGdG,MAEXC,cAAgB,GAEhB1wB,YAAYqmB,EAASwE,GACjBxrB,KAAKgnB,QAAUA,EACfhnB,KAAKwrB,MAAQA,EACbxrB,KAAKsxB,OAAS5M,SAAS6M,cAAc,OACrCvxB,KAAKwxB,QAAU9M,SAAS6M,cAAc,OACtCvxB,KAAKyxB,OAAS/M,SAAS6M,cAAc,OACrCvxB,KAAK0xB,WAAahN,SAAS6M,cAAc,OACzCvxB,KAAK2xB,OAASjN,SAAS6M,cAAc,OACrCvxB,KAAK4xB,IAAMlN,SAAS6M,cAAc,OAGlCjN,OAAOuN,iBAAiB,UAAU,KAC9B,IAAI7mB,EAAM0W,GAAGuH,OAAO,gBACpBje,EAAI8mB,OAAO9mB,EAAI+mB,mBACf/xB,KAAKgyB,eACDhL,EAAQG,OAAO7nB,OAAS,IACxBU,KAAKgnB,QAAQyD,oBAAoBzqB,KAAKiyB,kBACtCjyB,KAAKgnB,QAAQ+B,eACbrH,GAAGuH,OAAO,eAAeS,KAAK,YAAa,eAAehI,GAAGuH,OAAO,eAAeU,OAAOY,aAAe,QACzGvqB,KAAKiuB,QAAQjuB,KAAKwrB,MAAMiC,aAE5BztB,KAAKkyB,aAAa,IAItBlyB,KAAKmyB,WAELzN,SAAS0N,KAAKhC,OAAOpwB,KAAK4xB,KAE1B5xB,KAAKkyB,cAELlyB,KAAKqyB,SAAW5I,OAAO/H,GAAGuH,OAAO,kBAAkBS,KAAK,MACxD1pB,KAAKsyB,SAAW7I,OAAO/H,GAAGuH,OAAO,kBAAkBS,KAAK,SAC5D,CAGAuI,iBACI,IAAIjnB,EAAM0W,GAAGuH,OAAO,+BAGpB,OAFAjpB,KAAKqyB,SAAW5I,OAAOze,EAAI0e,KAAK,MAChC1pB,KAAKsyB,SAAW7I,OAAOze,EAAI0e,KAAK,UACzB,CAACloB,EAAEioB,OAAOze,EAAI0e,KAAK,MAAOrW,MAAOoW,OAAOze,EAAI0e,KAAK,UAC5D,CAKAyI,WAEIzQ,GAAGuH,OAAOjpB,KAAK4xB,KAAKlI,KAAK,KAAM,OAE/B1pB,KAAKuyB,cACLvyB,KAAK4xB,IAAIxB,OAAOpwB,KAAKsxB,QAErBtxB,KAAKgyB,eACLhyB,KAAK4xB,IAAIxB,OAAOpwB,KAAKwxB,SAErBxxB,KAAKwyB,YACLxyB,KAAK4xB,IAAIxB,OAAOpwB,KAAKyxB,QAErBzxB,KAAKyyB,aACLzyB,KAAK4xB,IAAIxB,OAAOpwB,KAAK0xB,YAErB1xB,KAAK0yB,cACL1yB,KAAK4xB,IAAIxB,OAAOpwB,KAAK2xB,OACzB,CAGAY,cACI7Q,GAAGuH,OAAOjpB,KAAKsxB,QAAQ5H,KAAK,KAAM,UACpBhI,GAAGuH,OAAOjpB,KAAKsxB,QAAQlB,OAAO,OACtC1G,KAAK,QAAS,SACf0G,OAAO,MACP7b,KAAK,sBACV,MAAMkc,EAAQ/O,GAAGuH,OAAOjpB,KAAKsxB,QAAQlB,OAAO,OAC5CK,EAAM/G,KAAK,QAAS,SAGpB+G,EAAML,OAAO,KACR1G,KAAK,OAAQ,eACb0G,OAAO,OACH1G,KAAK,MAAO,EAAQ,MAC7B+G,EAAML,OAAO,KACR1G,KAAK,OAAQ,sCACb0G,OAAO,OACH1G,KAAK,MAAO,EAAQ,MAC7B+G,EAAML,OAAO,KACR1G,KAAK,OAAQ,2BACb0G,OAAO,OACH1G,KAAK,MAAO,EAAQ,KACjC,CAGAsI,eACItQ,GAAGuH,OAAOjpB,KAAKwxB,SAAS9H,KAAK,QAAS,WACtC,IAAIiJ,EAAY3yB,KAAK4yB,YAAYC,SAAS,cAAsB,GAAI,GAAI,eAAe,EACnFC,EAAU9yB,KAAK4yB,YAAYC,SAAS,cAAsB,SAAU,GAAI,eAAe,EAC3F,MAAME,EAAc,IAAOzO,OAAO0O,WAC5BC,EAAa,IAAO3O,OAAO0O,WAE3BE,GAAa5O,OAAO0O,WAAaC,GAAY,EAG7CnD,EAAMpO,GAAGuH,OAAOjpB,KAAKwxB,SACtBpB,OAAO,OACP1G,KAAK,QAAS,eACnBoG,EAAIM,OAAO,QACN1G,KAAK,KAAM,cACXA,KAAK,IAAK,IAAGwJ,EAAYP,IACzBjJ,KAAK,IAAK,OACVnV,KAAK,cAAsB,IAChCub,EAAIM,OAAO,QACN1G,KAAK,KAAM,iBACXA,KAAK,IAAK,GAAGqJ,KACbrJ,KAAK,IAAI,KACTA,KAAK,SAAU,MACfA,KAAK,QAAS,GAAGuJ,KACtBnD,EAAIM,OAAO,QACN1G,KAAK,KAAM,YACXA,KAAK,IAAK,IAAGqJ,EAAcE,EAAaC,EAAYJ,IACpDpJ,KAAK,IAAK,OACVnV,KAAK,cAAsB,UAChCub,EAAIM,OAAO,KACN1G,KAAK,KAAM,KACpB,CAGA8I,YACI9Q,GAAGuH,OAAOjpB,KAAKyxB,QACV/H,KAAK,QAAS,UACnB,MAAMoG,EAAMpO,GAAGuH,OAAOjpB,KAAKyxB,QACtBrB,OAAO,OACP1G,KAAK,QAAS,cACdA,KAAK,SAAU,QACfA,KAAK,QAAS,QACnBoG,EAAIM,OAAO,QACN1G,KAAK,KAAM,QAChBoG,EAAIM,OAAO,KACN1G,KAAK,KAAM,cACXA,KAAK,YAAa,oBACvB,MAAMyJ,EAAOrD,EAAIM,OAAO,KAAK1G,KAAK,YAAa,kBAC/C,IAAI1e,EAAMmoB,EAAK/C,OAAO,KAAK1G,KAAK,KAAM,aACtC1e,EAAMA,EAAIolB,OAAO,KAAK1G,KAAK,KAAM,gBACjC1e,EAAIolB,OAAO,KAAK1G,KAAK,KAAM,SAC3ByJ,EAAK/C,OAAO,QACP1G,KAAK,KAAM,aACXA,KAAK,IAAK,KACVA,KAAK,IAAK,SACVA,KAAK,SAAU,QACfA,KAAK,QAAS,OACnByJ,EAAK/C,OAAO,SACP1G,KAAK,KAAM,YACXA,KAAK,IAAK,MACVA,KAAK,IAAK,KACVA,KAAK,QAAS,OACdA,KAAK,SAAU,OACfA,KAAK,OAAQ,EAAQ,MAC1ByJ,EAAK/C,OAAO,KACP1G,KAAK,KAAM,WACXA,KAAK,YAAa,qBAEvB1pB,KAAKozB,cAActD,EAAK,EAAG,MAAO,EAAQ,KAAkB,GAAI,GAAI,SAAU,SAAU,IACxF9vB,KAAKozB,cAActD,EAAK,IAAK,SAAU,EAAQ,IAAqB,GAAI,IAAK,OAAQ,MAAO,IAChG,CAGAsD,cAAcC,EAAGC,EAAQC,EAASC,EAAKC,EAAUC,EAAMC,EAAOC,EAAOC,GACjE,IAAIC,EAAST,EAAGjD,OAAO,KAClB1G,KAAK,KAAM6J,GAChBO,EAAO1D,OAAO,QACT1G,KAAK,QAAQ,OACbA,KAAK,SAAU,OACfA,KAAK,IAAK4J,GACV5J,KAAK,IAAK,KACfoK,EAAO1D,OAAO,SACT1G,KAAK,OAAQ8J,GACb9J,KAAK,QAAS+J,GACd/J,KAAK,IAAK,KACVA,KAAK,IAAKgK,GACfI,EAAO1D,OAAO,QACT7b,KAAKof,GACLjK,KAAK,IAAK,MACVA,KAAK,IAAKmK,GACfC,EAAO1D,OAAO,QACT7b,KAAKqf,GACLlK,KAAK,IAAK,MACVA,KAAK,IAAKmK,EACnB,CAGAE,eAAeV,EAAIW,EAAMzf,GACrB8e,EAAGjD,OAAO,UACL1G,KAAK,QAASsK,GACdzf,KAAKA,EACd,CAGAke,aACI,MAAMwB,EAAUvS,GAAGuH,OAAOjpB,KAAK0xB,YAAYhI,KAAK,KAAM,cAAc0G,OAAO,OAAO1G,KAAK,QAAS,WAChG,IAAI1e,EAAMipB,EAAQ7D,OAAO,OACpB1G,KAAK,KAAM,WAChB1pB,KAAK+zB,eAAe/oB,EAAK,QAAS,KAGlCA,EAFaipB,EAAQ7D,OAAO,OACvB1G,KAAK,QAAS,QACR0G,OAAO,OACb1G,KAAK,KAAM,aAChB1e,EAAIolB,OAAO,KAAK7b,KAAK,4BACrB,IAAI2f,EAAOlpB,EAAIolB,OAAO,OAAO1G,KAAK,QAAS,YAC3CwK,EAAK9D,OAAO,SACP1G,KAAK,QAAS,gBACdA,KAAK,OAAQ,QACbA,KAAK,QAAS,IACdA,KAAK,cAAe,gBACzBwK,EAAK9D,OAAO,MACP1G,KAAK,KAAM,WACX4G,MAAM,aAAc,UACzBtlB,EAAIolB,OAAO,UACN1G,KAAK,KAAM,eACXnV,KAAK,cACVvJ,EAAIolB,OAAO,UACN1G,KAAK,KAAM,eACXnV,KAAK,sBACVvJ,EAAIolB,OAAO,UACN1G,KAAK,KAAM,aACXnV,KAAK,qBACVvJ,EAAIolB,OAAO,UACN1G,KAAK,KAAM,SACXnV,KAAK,iBACVvJ,EAAIolB,OAAO,UACN1G,KAAK,KAAM,gBACXnV,KAAK,iBACd,CAGAme,cACI,MAAMnM,EAAO,IAAI4N,KACjBzS,GAAGuH,OAAOjpB,KAAK2xB,QAAQjI,KAAK,KAAK,UACjChI,GAAGuH,OAAOjpB,KAAK2xB,QAAQvB,OAAO,KACzB7b,KAAK,UAAUgS,EAAK6N,mBACpBhE,OAAO,KACP1G,KAAK,OAAQ,gBACbnV,KAAK,QACd,CAGA2d,cACI,IAAIxwB,EAAIggB,GAAGuH,OAAOjpB,KAAKyxB,QAAQ9H,OAAOY,aAClCZ,EAAOjI,GAAGuH,OAAO,QACrBU,EAAKD,KAAK,YAAa,eAAehoB,EAAIioB,EAAKA,OAAO0K,WAAWC,WAAmB,OAAEr0B,UACtF0pB,EAAOjI,GAAGuH,OAAO,WACjBU,EAAKD,KAAK,YAAa,eAAehoB,EAAIioB,EAAKA,OAAO0K,WAAWC,WAAmB,OAAEr0B,SAC1F,CAKAs0B,OAAOpQ,EAAG+I,EAAKS,EAASnsB,EAAGE,EAAGkI,EAAG3C,EAAGutB,GAChC,MAAMC,EAAStQ,EAAEiM,OAAO,SACnB1G,KAAK,QAASwD,GACdxD,KAAK,OAAQiE,GACbjE,KAAK,IAAIloB,GACTkoB,KAAK,IAAIhoB,GACTgoB,KAAK,SAAU9f,GACf8f,KAAK,QAASziB,QACJ/G,IAAXs0B,GACAC,EAAO/K,KAAK,YAAa8K,EACjC,CAGAE,QAAQvL,EAAMsD,EAAOS,EAAKxF,GACtByB,EAAKsD,MAAMA,GACN/C,KAAK,QAASwD,GACdxD,KAAK,SAAUhC,GACfgC,KAAK,IAAK1pB,KAAKgnB,QAAQe,KAChC,CAGA4M,UAAUC,EAAM1N,GACZ,IAAI2N,EAAwB,OAAhBD,EAAKjL,OAAkBiL,EAAKjL,OAAOoI,kBAAoB,KAC/DjzB,EAAI,EACR,KAAQA,EAAIooB,EAAK5nB,OAAQR,IACP,OAAV+1B,GACA70B,KAAK00B,QAAQhT,GAAGuH,OAAO4L,GAAQ3N,EAAKpoB,GAAG2tB,MAAOvF,EAAKpoB,GAAGysB,QAASrE,EAAKpoB,GAAG4oB,OACvEmN,EAAQA,EAAMC,mBACd90B,KAAK00B,QAAQhT,GAAGuH,OAAO4L,GAAQ,CAAC3N,EAAKpoB,GAAG2tB,MAAM,GAAIvF,EAAKpoB,GAAG2tB,MAAMvF,EAAKpoB,GAAG2tB,MAAMntB,OAAS,IACnF4nB,EAAKpoB,GAAGysB,QAAU,YAAarE,EAAKpoB,GAAG4oB,OAC3CmN,EAAQA,EAAMC,qBAEd90B,KAAK00B,QAAQE,EAAKxE,OAAO,QAASlJ,EAAKpoB,GAAG2tB,MAAOvF,EAAKpoB,GAAGysB,QAASrE,EAAKpoB,GAAG4oB,OAC1E1nB,KAAK00B,QAAQE,EAAKxE,OAAO,QAAS,CAAClJ,EAAKpoB,GAAG2tB,MAAM,GAAIvF,EAAKpoB,GAAG2tB,MAAMvF,EAAKpoB,GAAG2tB,MAAMntB,OAAS,IACtF4nB,EAAKpoB,GAAGysB,QAAU,YAAarE,EAAKpoB,GAAG4oB,QAGnD,GAAI5oB,IAAMooB,EAAK5nB,QAAUu1B,EAGrB,IADAA,EAAQA,EAAME,uBACPH,EAAKjL,OAAOqL,mBAAqBH,GACpCD,EAAKjL,OAAOsL,YAAYL,EAAKjL,OAAOqL,iBAEhD,CAGAE,YAAYN,EAAM1N,GACd,IAAI2N,EAAwB,OAAhBD,EAAKjL,OAAkBiL,EAAKjL,OAAOoI,kBAAoB,KAC/DjzB,EAAI,EACR,KAAQA,EAAIooB,EAAK5nB,OAAQR,IACrB,GAAc,OAAV+1B,EAAgB,CAChB,IAAI7pB,EAAM0W,GAAGuH,OAAO4L,GACpB7pB,EAAI0e,KAAK,QAASxC,EAAKpoB,GAAGysB,SACrB7B,KAAK,YAAa,eAAexC,EAAKpoB,GAAG0tB,UAC9CxhB,EAAIie,OAAO,SAASS,KAAK,OAAQ1pB,KAAKgnB,QAAQC,IAAMC,EAAKpoB,GAAG6uB,SAC5D3iB,EAAIie,OAAO,QAAQ1U,KAAK2S,EAAKpoB,GAAG2S,MAChCzG,EAAIie,OAAO,gBAAgBS,KAAK,OAAQxC,EAAKpoB,GAAG4oB,OAC5C5oB,EAAI,EAAIooB,EAAK5nB,SACbu1B,EAAQA,EAAMC,mBACtB,MACI90B,KAAKm1B,UAAUjO,EAAKpoB,GAAG2S,KAAMyV,EAAKpoB,GAAGysB,QAASrE,EAAKpoB,GAAG0tB,MAAOtF,EAAKpoB,GAAG6uB,QAASzG,EAAKpoB,GAAG4oB,OAE9F,GAAI5oB,IAAMooB,EAAK5nB,QAAUu1B,EACrB,KAAOD,EAAKjL,OAAOqL,mBAAqBH,GACpCD,EAAKjL,OAAOsL,YAAYL,EAAKjL,OAAOqL,iBAChD,CAGAG,UAAU1jB,EAAM8Z,EAAS7pB,EAAGge,EAAMgI,GAC9B,MACM0N,EADQ1T,GAAGuH,OAAO,YACDmH,OAAO,KACzB1G,KAAK,QAAS,GAAG6B,KACjB7B,KAAK,YAAa,eAAehoB,MACtC0zB,EAAShF,OAAO,QACX1G,KAAK,QAAS,cACdA,KAAK,IAAK,OACVA,KAAK,IAAK,OACVA,KAAK,QAAS,OACdA,KAAK,SAAU,OACpB0L,EAAShF,OAAO,QACX1G,KAAK,IAAK,OACVA,KAAK,IAAK,KACVnV,KAAK9C,GAEVzR,KAAKu0B,OAAOa,EAAU,OAAQp1B,KAAKgnB,QAAQC,IAAMvH,EAAM,MAAO,KAAM,MAAO,OAC3E1f,KAAKu0B,OAAOa,EAAU,cAAe,EAAQ,KAAwB,MAAO,IAAK,KAAM,MACvFp1B,KAAKu0B,OAAOa,EAAU,gBAAiB,EAAQ,KAAwB,KAAM,MAAO,KAAM,KAAM,eAChGp1B,KAAKu0B,OAAOa,EAAU,SAAU,EAAQ,KAAoB,OAAQ,KAAM,KAAM,KAAM,eAEtFA,EAAShF,OAAO,UACX1G,KAAK,QAAS,wBACdA,KAAK,OAAOhC,GACZgC,KAAK,KAAM,OACXA,KAAK,KAAM,MACXA,KAAK,IAAK,MACVA,KAAK,SAAU,SACfA,KAAK,eAAgB,OAG1BhI,GAAGuH,OAAOjpB,KAAKyxB,QACVrB,OAAO,SACP1G,KAAK,OAAQ,SACbA,KAAK,QAAS,eAAe6B,IACtC,CAGA8J,UAAUtL,GACN,IAAIuL,EAAQ5T,GAAGuH,OAAOvE,SAAS6M,cAAc,QAC7C+D,EAAM5L,KAAK,KAAM,WACZ4G,MAAM,WAAY,YAClBA,MAAM,UAAW,GACtB,IAAItlB,EAAMsqB,EAAMlF,OAAO,OAClB1G,KAAK,QAAS,QAMnB,GALA1e,EAAIolB,OAAO,MAAM7b,KAAKwV,EAAKtY,MAC3BzG,EAAIolB,OAAO,KACN1G,KAAK,QAAS,aACdnV,KAAK,cAAsBwV,EAAKoD,QACrCniB,EAAIolB,OAAO,KAAK7b,KAAKwV,EAAKgD,MACtBhD,EAAK4C,QAAQrtB,OAAS,EAAG,CACzB0L,EAAMsqB,EAAMlF,OAAO,OACd1G,KAAK,QAAS,SACnB1e,EAAIolB,OAAO,MACN7b,KAAK,4BACVvJ,EAAMA,EAAIolB,OAAO,MACjB,IAAK,IAAItxB,EAAI,EAAGA,EAAIirB,EAAK4C,QAAQrtB,OAAQR,IACrCkM,EAAIolB,OAAO,MAAM7b,KAAKwV,EAAK4C,QAAQ7tB,GAC3C,CACA,OAAOw2B,CACX,CAGAC,aAAapM,EAAME,GACfA,EAAMK,KAAK,QAAS1pB,KAAKw1B,SAASrM,EAAK+D,MAClCxD,KAAK,OAAQ1pB,KAAKgnB,QAAQC,IAAMkC,EAAK8D,MACrCvD,KAAK,IAAIP,EAAKznB,GACdgoB,KAAK,SAAUP,EAAKgE,OACpBzD,KAAK,IAAK1pB,KAAKgnB,QAAQc,IAAIqB,EAAKgE,QAChCzD,KAAK,SAAU1pB,KAAKqxB,eACpB3H,KAAK,QAAS1pB,KAAKqxB,eACnB3H,KAAK,YAAa,cAAgB1pB,KAAKqxB,cAAgB,EAAI,OAChE,MAAMtE,EAAO/sB,KAAKq1B,UAAUlM,GAC5BsM,MAAMpM,EAAMM,OAAQ,CAChBsK,QAASlH,EAAKpD,OAAO+L,UACrBC,WAAW,EACXC,MAAO,UACPC,UAAW,OACXC,SAAU,CAAC,IAAI,MAEvB,CAGAC,kBAAkB5M,GAEdzH,GAAGuH,OAAO,gBAAgBmH,OAAO,UAC5B1G,KAAK,QAAS,aAAa1pB,KAAKw1B,SAASrM,EAAK+D,QAC9CxD,KAAK,IAAK,KACVA,KAAK,KAAM,GAAG1pB,KAAKgnB,QAAQY,GAAGuB,EAAKgE,OAASntB,KAAKqyB,YACjD3I,KAAK,KAAM,QACXA,KAAK,OAAQhI,GAAGuH,OAAO,WAAWjpB,KAAKw1B,SAASrM,EAAK+D,QAAQxD,KAAK,UAC3E,CAGAsM,YAAYC,EAAU7M,GAClB,IAAK,IAAID,KAAQC,EAEbppB,KAAKu1B,aAAapM,EAAM8M,EAAS7F,OAAO,UACxCpwB,KAAK+1B,kBAAkB5M,EAE/B,CAGA+M,WAAWD,EAAUz0B,EAAGE,EAAGsV,GACvB,IAAImN,EAAI8R,EAAS7F,OAAO,KACnB1G,KAAK,QAAS,SACdS,GAAG,aAActqB,IACd,MAAMmL,EAAM0W,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYlN,OAAO,QAC5CjS,EAAIhM,EAAI0e,KAAK,UACnB1e,EAAI0e,KAAK,QAAU,GAAF1S,GACjB0K,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYlN,OAAO,gBAAgBS,KAAK,UAAW,QACtEhI,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYjG,UAAU,aAAaM,QAAQpF,SAAQvrB,GAAK6hB,GAAGuH,OAAOppB,GAAG6pB,KAAK,UAAW,YAAW,IAEtHS,GAAG,YAAatqB,IACb6hB,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYlN,OAAO,QAAQS,KAAK,QAAS1pB,KAAKqxB,eACjE3P,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYlN,OAAO,gBAAgBS,KAAK,UAAW,WACtEhI,GAAGuH,OAAOppB,EAAEqvB,OAAOiH,YAAYjG,UAAU,aAAaM,QAAQpF,SAAQvrB,GAAK6hB,GAAGuH,OAAOppB,GAAG6pB,KAAK,UAAW,SAAQ,IAiBxH,OAfAvF,EAAEiM,OAAO,QACJ1G,KAAK,IAAKloB,GACVkoB,KAAK,SAAUloB,GACfkoB,KAAK,IAAKhoB,GACVgoB,KAAK,QAAS1pB,KAAKqxB,eACnB3H,KAAK,OAAQ,gBACbA,KAAK,SAAU1S,GACf0S,KAAK,YAAa,cAAgB1pB,KAAKqxB,cAAgB,EAAI,OAChElN,EAAEiM,OAAO,SACJ1G,KAAK,OAAQ,EAAQ,MACrBA,KAAK,QAAS,eACdA,KAAK,IAAKloB,GACVkoB,KAAK,SAAUloB,GACfkoB,KAAK,IAAKhoB,GACVgoB,KAAK,YAAa,cAAgB1pB,KAAKqxB,cAAgB,EAAI,OACzDlN,CACX,CAGAiS,kBAAkBH,EAAU7M,GACxB,IAAK,IAAID,KAAQC,EAAQ,CACrB,GAA8B,IAA1BD,EAAKqE,UAAUluB,OACfU,KAAKu1B,aAAapM,EAAKqE,UAAU,GAAIyI,EAAS7F,OAAO,cACpD,CAGD,IAAIiG,EAAQr2B,KAAKk2B,WAAWD,EAAU9M,EAAKqE,UAAU,GAAGhsB,EAAE2nB,EAAKqE,UAAU,GAAG9rB,EAAEynB,EAAKqE,UAAUluB,QAE7F,IAAK,IAAKurB,EAAKxB,KAAUF,EAAKqE,UAAUlH,UACpC+C,EAAM8D,MAAQ9D,EAAM8D,MAAQtC,EAAM7qB,KAAKqxB,cACvCrxB,KAAKu1B,aAAalM,EAAOgN,EAAMjG,OAAO,SAE9C,CACApwB,KAAK+1B,kBAAkB5M,EAAKqE,UAAU,GAC1C,CACJ,CAGAS,QAAQzgB,GACJxN,KAAK20B,UAAUjT,GAAGuH,OAAO,UAAWzb,EAAIqgB,OACxC7tB,KAAKk1B,YAAYxT,GAAGuH,OAAO,YAAazb,EAAIqgB,OAC5C,IAAIyI,EAAY5U,GAAGuH,OAAO,iBAC1BvH,GAAGwO,UAAU,wBAAwB4B,SACrCpQ,GAAGwO,UAAU,uBAAuB4B,SACpCpQ,GAAGwO,UAAU,2BAA2B4B,SACxC9xB,KAAKg2B,YAAYM,EAAW9oB,EAAI4b,QAChCppB,KAAKo2B,kBAAkBE,EAAW9oB,EAAIkf,aAC1C,CAOA6J,oBAAoBC,GAChB,IAAI,IAAIrN,KAAQqN,EACZ9U,GAAGwO,UAAU/G,GAAM2I,QAE3B,CAGA2E,cACI,IAAI,IAAItN,IAAQ,CAAC,uBAAwB,sBAAsB,0BAA0B,cACrF,aAAc,gBACdzH,GAAGwO,UAAU/G,GAAM2I,QAE3B,CAOA4E,kBACIhV,GAAGuH,OAAO,cAAciH,UAAU,SAASM,QAAQpF,SAAQ,CAACvrB,EAAEf,KAC1D,MAAM0C,EAAIioB,OAAO/H,GAAGuH,OAAOppB,GAAG6pB,KAAK,WACnChI,GAAGuH,OAAOppB,GAAG6pB,KAAK,IAAK,GAAG1pB,KAAKgnB,QAAQc,IAAItmB,KAAK,GAExD,CAGAm1B,cAAcC,GACV,IAAIp1B,EAAIioB,OAAO/H,GAAGuH,OAAOjpB,MAAM0pB,KAAK,WACpChI,GAAGuH,OAAOjpB,MAAM0pB,KAAK,IAAK,GAAG1pB,KAAKgnB,QAAQc,IAAItmB,MAC9CA,EAAIkgB,GAAGuH,OAAOjpB,MAAMipB,OAAO,eAAeS,KAAK,UAC/ChI,GAAGuH,OAAOjpB,MAAMipB,OAAO,eAAeS,KAAK,IAAK,GAAG1pB,KAAKgnB,QAAQc,IAAItmB,KACxE,CAGAg0B,SAAStI,GACL,OAAOA,EAAIlb,MAAM,KAAK5N,KAAK,IAAIyyB,WAAW,IAAK,GACnD,CAMAC,SAAS5H,EAAQoB,EAAOrwB,GACpByhB,GAAGuH,OAAOiG,GAAQoB,MAAMA,EAAOrwB,EACnC,CAGA82B,SAAS7H,EAAQoB,GACb,OAAO5O,GAAGuH,OAAOiG,GAAQoB,MAAMA,EACnC,CAGA0G,UAAU9H,EAAQ+H,EAAQh3B,GACtByhB,GAAGuH,OAAOiG,GAAQxF,KAAKuN,EAAQh3B,EACnC,CAGAi3B,UAAUhI,EAAQjvB,GACd,OAAOyhB,GAAGuH,OAAOiG,GAAQxF,KAAKzpB,EAClC,CAGAk3B,YAAYjI,EAAQkI,EAAQC,GACxB3V,GAAGuH,OAAOiG,GAAQ/E,GAAGiN,EAAQC,EACjC,CAGAC,WAAWpI,GACP,OAAOxN,GAAGuH,OAAOiG,EACrB,CAGAqI,eAAerI,GACX,OAAOxN,GAAGwO,UAAUhB,EACxB,CAMA0D,YAAc,WACV,IACIgE,EADSlS,SAAS6M,cAAc,UACnBiG,WAAW,MAc5B,MAAO,CACH3E,SANJ,SAAkBte,EAAMkjB,EAAUC,GAE9B,OADAd,EAAIe,KAAOF,EAAW,MAAQC,EACvBd,EAAIgB,YAAYrjB,GAAMlB,KACjC,EAKH,CAnBa,IHtjBI2T,EAASwE,GAE3BqM,EAAO,IIlBI,MACXl3B,YAAYqmB,GACRhnB,KAAKgnB,QAAUA,CACnB,CAGA8Q,WAAa,CAACrmB,KAAM,GAAIqb,IAAK,GAG7BiL,eAAetmB,EAAMqb,EAAIkL,GACrBh4B,KAAK83B,WAAWrmB,KAAOA,EACvBzR,KAAK83B,WAAWhL,GAAKrD,OAAOqD,EAEhC,CAGAmL,eAAev5B,EAAGw5B,GAEdx5B,EAAIA,EAAEwwB,OACNxN,GAAGwO,UAAU,uBAAuBM,QAAQpF,SAASC,IAA0C,cAA9BA,EAAGiJ,WAAW6D,MAAMl4B,QAAuBorB,EAAGiJ,WAAW6D,MAAMl4B,MAAQ,GAAE,IAC1Ii4B,EAAIH,eAAer5B,EAAE05B,YAAa15B,EAAE41B,WAAW+D,IAAIp4B,MAAOvB,EAAE41B,WAAW0D,IAAI/3B,OAC3EvB,EAAE41B,WAAkB,MAAEr0B,MAAQ,YAC9ByhB,GAAGuH,OAAO,iBAAiBU,OAAO1pB,MAAQvB,EAAE05B,YAC5C1W,GAAGuH,OAAO,YAAYqH,MAAM,aAAc,SAC9C,CAGAgI,aAAa1D,EAAM1N,GAEf,IAAI2N,EAAQD,EAAKjL,OAAOoI,kBACpBjzB,EAAI,EAER,KAAQA,EAAIooB,EAAK5nB,OAAQR,IAEjB+1B,GACAnT,GAAGuH,OAAO4L,GAAOnL,KAAK,MAAOxC,EAAKpoB,GAAGguB,IACrCpL,GAAGuH,OAAO4L,GAAOnL,KAAK,MAAOxC,EAAKpoB,GAAGy5B,SAASzL,IAC9CpL,GAAGuH,OAAO4L,GAAOtgB,KAAK2S,EAAKpoB,GAAG2S,MAC1B3S,EAAI,EAAIooB,EAAK5nB,SACbu1B,EAAQA,EAAMC,qBAElBF,EAAKxE,OAAO,MACP1G,KAAK,MAAOxC,EAAKpoB,GAAGguB,IACpBpD,KAAK,MAAOxC,EAAKpoB,GAAGy5B,SAASzL,IAC7BpD,KAAK,QAAS,IACdS,GAAG,SAAUzrB,IAAOsB,KAAKi4B,eAAev5B,EAAGsB,KAAI,IAC/CuU,KAAK2S,EAAKpoB,GAAG2S,MAI1B,GAAI3S,IAAMooB,EAAK5nB,QAAUu1B,EACrB,KAAOD,EAAKjL,OAAOqL,mBAAqBH,GACpCD,EAAKjL,OAAOsL,YAAYL,EAAKjL,OAAOqL,kBAE5C,GAAoB,IAAhB9N,EAAK5nB,OACL,KAAOs1B,EAAKjL,OAAOqL,kBACfJ,EAAKjL,OAAOsL,YAAYL,EAAKjL,OAAOqL,iBAChD,CAGAwD,gBAAgBC,EAAWvR,GAEvB,IAAIwR,QAAaC,MAAM34B,KAAKgnB,QAAQC,IAAM,yBAAyBwR,KAEnEvR,QAAawR,EAAKE,OAElB,IAAK,MAAMzP,KAAQjC,EACVlnB,KAAKgnB,QAAQE,KAAKkG,MAAK/B,GAAMA,EAAG5Z,OAAS0X,EAAK1X,QAC/CzR,KAAKgnB,QAAQE,KAAK9f,KAAK,CACnBqK,KAAM0X,EAAK1X,KACX8Z,QAASpC,EAAK1X,KAAKO,MAAM,KAAK5N,KAAK,IAAIyyB,WAAW,IAAK,IACvD/J,GAAG3D,EAAK2D,GACRyL,SAAS,CAACzL,GAAI3D,EAAKoP,SAASzL,GAAIG,KAAM9D,EAAKoP,SAAStL,MACpDA,KAAM9D,EAAK8D,KAAO9D,EAAK8D,KAAKvN,UAAOxf,EACnCkpB,YAAOlpB,GAGvB,CAGAs4B,mBAEI,MAAM5D,EAAOlT,GAAGuH,OAAO,YAGjBwP,EAAY/W,GAAGuH,OAAO,iBAAiBU,OAAO1pB,MAEpD,GAAkB,KAAdw4B,EAAkB,CAElB/W,GAAGuH,OAAO,YAAYqH,MAAM,aAAc,WAG1C,IAAIpJ,EAAOlnB,KAAKgnB,QAAQE,KAAKmI,QAAOlG,GAAQA,EAAK1X,KAAKonB,SAASJ,KAE1DvR,EAAK5nB,eACAU,KAAK84B,UAAUL,EAAWvR,GAEhCA,EAAOlnB,KAAKgnB,QAAQE,KAAKmI,QAAOlG,GAAQA,EAAK1X,KAAKonB,SAASJ,MAG/Dz4B,KAAKs4B,aAAa1D,EAAM1N,EAC5B,MAGIxF,GAAGuH,OAAO,YAAYqH,MAAM,aAAc,UAC1C5O,GAAGwO,UAAU,YAAY6I,MAAK,SAAUl5B,EAAEf,GAAI4iB,GAAGuH,OAAOjpB,MAAM0pB,KAAY,MAAI,EAAG,IAEjF1pB,KAAK+3B,eAAe,IAAK,GAAI,EAErC,CAGAS,qBAEI,IAAInN,EAAKrrB,KAAKgnB,QAAQE,KAAK4D,WAAUpsB,GAAKA,EAAEouB,KAAO9sB,KAAK83B,WAAWhL,KAC/D3D,EAAOnpB,KAAKgnB,QAAQE,KAAKmE,GAG7B,IAAY,IAARA,EAAW,CAEX,QAAoBnrB,IAAhBipB,EAAKC,OAAqB,CAC1B,IAAIsP,QAAaC,MAAM34B,KAAKgnB,QAAQC,IAAM,wBAAwBjnB,KAAK83B,WAAWhL,MAClF3D,EAAKC,aAAesP,EAAKE,MAC7B,CAE2B,IAAvBzP,EAAKC,OAAO9pB,aACmDY,IAA/DF,KAAKgnB,QAAQG,OAAO5B,MAAK7mB,GAAKA,EAAEouB,KAAO9sB,KAAK83B,WAAWhL,MAGvD9sB,KAAKgnB,QAAQG,OAAO/f,KAAK,CACrBqK,KAAKzR,KAAK83B,WAAWrmB,KACrB8Z,QAASpC,EAAKoC,QACduB,GAAG9sB,KAAK83B,WAAWhL,GACnB1D,OAAOD,EAAKC,OACZ1B,MAAO1nB,KAAKgnB,QAAQ0D,mBACpBkD,cAAwB1tB,IAAdipB,EAAK8D,KAAqB9D,EAAK8D,UACb/sB,IAAvBipB,EAAKoP,SAAStL,KAAqB9D,EAAKoP,SAAStL,KAAKvN,KAAO,2BAG9E,CAEJ,CAGAsZ,aAAavnB,GACT,MAAM2X,EAAS1H,GAAGuH,OAAOxX,GACzB,KAAO2X,EAAOO,OAAOoI,mBACjB3I,EAAOO,OAAOsL,YAAY7L,EAAOO,OAAOqL,iBAChD,CAEAiE,cAAcxnB,EAAMyV,GAChB,MAAMkC,EAAS1H,GAAGuH,OAAO,iBACzBG,EAAOgH,OAAO,MAAM7b,KAAK9C,EAAO,qBAAuByV,EAAK5nB,QAC5D,IAAK,MAAM6pB,KAAQjC,EAAM,CACrB,MAAM0N,EAAOxL,EAAOgH,OAAO,MAC3BwE,EAAKxE,OAAO,MAAM7b,KAAK,OAAS4U,EAAS,IACzCyL,EAAKxE,OAAO,MAAM7b,KAAK,UAAY4U,EAAW,MAC9CyL,EAAKxE,OAAO,MAAM7b,KAAK,UAAY4U,EAAkB,aACrDyL,EAAKxE,OAAO,MAAM7b,KAAK,YAAc4U,EAAY,OACjDyL,EAAKxE,OAAO,MAAM7b,KAAK,cAAgB4U,EAAW,KAAQ,KAC9D,CACAC,EAAOgH,OAAO,KAClB,CAEAoI,uBAEIx4B,KAAKg5B,aAAa,iBAGlB,IAAIN,QAAaC,MAAM34B,KAAKgnB,QAAQC,IAAM,wBAAwB6Q,WAAWhL,MACzE5F,QAAawR,EAAKE,OAEtB54B,KAAKi5B,cAAcj5B,KAAK83B,WAAWrmB,KAAMyV,EAC7C,GJ3JyBF,GAEzBkS,EAAQ9H,EAAMkG,WAAW,eACzB6B,GAAc,EAqClB,SAASC,IACDpS,EAAQG,OAAO7nB,OAAS,GACxB+5B,IACAjI,EAAMmG,eAAe,kBAAkB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAG,QAASiO,KAC7FlI,EAAMmG,eAAe,gBAAgB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAG,QAASkO,KAC3FnI,EAAMmG,eAAe,kBAAkB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAG,QAASmO,KAC7FpI,EAAMmG,eAAe,oBAAoB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAG,QAASoO,KAC/FrI,EAAMmG,eAAe,gBAAgB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAI,QAASqO,KAC5FtI,EAAMmG,eAAe,gBAAgB/G,QAAQpF,SAASC,GAAO+F,EAAM+F,YAAY9L,EAAI,QAASL,MAG5FoG,EAAMqF,aAEd,CAGA+B,eAAemB,UAEL9B,EAAK+B,eAEXR,GACJ,CASA,SAASK,EAAepQ,GACpB,IAAIwQ,EAAYxQ,EAAM6F,OAAO4K,cAAcC,UAAUC,QACrDhT,EAAQsE,eAAeuO,GACvBzI,EAAMmF,oBAAoB,CAAC,gBAAgBsD,MACvClT,GAAWoT,UAAUC,UAAYH,GACjCI,IACJb,GACJ,CAGA,SAASM,EAAUrQ,GACf,IAAIkC,EAAUlC,EAAM6F,OAAOiH,WAAW7B,WAAkB,MAAEr0B,MAEtDi6B,EAAS9I,EAAMkG,WAAW,gBAAgB/L,KAC9C2O,EAAOxQ,KAAK,QAASL,EAAM6F,OAAOoF,WAAiB,KAAEr0B,OAErDi6B,EAAOvQ,OAAOwQ,OAClB,CAGA,SAASnP,EAAY3B,GAEjB,IAAI6B,EAAW7B,EAAM6F,OAAOjvB,MAExBsrB,EAAUlC,EAAM6F,OAAOkL,UAAU/Q,EAAM6F,OAAOkL,UAAU96B,OAAS,GAErE0nB,EAAQgE,YAAY3B,EAAM6F,OAAOmL,aAAcnP,GAE/C7B,EAAM6F,OAAOmL,aAAenP,EAC5B,IAAIL,EAAM7D,EAAQG,OAAO2D,WAAUjrB,GAAKA,EAAE4R,OAAS8Z,IACnDvE,EAAQG,OAAO0D,GAAKnD,MAAQwD,EAC5BkG,EAAMmG,eAAe,iBAAiBhM,KAAWiF,QAAQpF,SAASvrB,IAAOuxB,EAAM4F,UAAUn3B,EAAE,OAAQqrB,EAAQ,IAC3GkG,EAAMmG,eAAe,WAAWhM,KAAWiF,QAAQpF,SAASvrB,IAAOuxB,EAAM4F,UAAUn3B,EAAE,SAAUqrB,EAAQ,IACvGkG,EAAM4F,UAAU,aAAazL,iBAAuB,OAAOL,EAC/D,CAGA,SAASoP,IACLnB,GAAc,EACdD,EAAM5I,MAAM,UAAU,UAC1B,CAGA,SAASiK,IACLnJ,EAAMkG,WAAW,2BAA2B3N,OAAO1pB,MAAQ,GAC3Dk5B,GAAc,EACdD,EAAM5I,MAAM,UAAU,OAC1B,CAGA,SAASkK,IACLpJ,EAAM0F,SAAS,aAAa,aAAc,WAC1C1F,EAAM0F,SAAS,eAAe,aAAc,WAC5C1F,EAAM0F,SAAS,eAAe,aAAc,UAChD,CA8CA,SAASwC,EAAWjQ,GAEhB,MAAMoR,EAAUrJ,EAAMkG,WAAW,aACf,OAAd3Q,GACA8T,EAAQnK,MAAM,UAAW,WAC7B3J,EAAYyK,EAAMkG,WAAWt3B,KAAKm2B,YAAYxM,OAC9C,MAAM+Q,EAAKjR,OAAO9C,EAAU5hB,UAAUi1B,QAAQW,cAAc31B,OAAOjG,GACnE07B,EAAQ/Q,KAAK,IAAK,IAAGgR,EAAK,IAC9B,CAEA,SAAST,IACLtT,EAAY,KACZyK,EAAM0F,SAAS,YAAY,UAAU,OACzC,CAGA,SAAS8D,EAAW/P,EAAKgQ,GACrB,IAAIC,EAAU9T,EAAQI,YAAYyD,GAC9BkQ,EAAQ/T,EAAQI,YAAYyT,GAC5BG,EAAMrU,EAAYA,EAAUoT,UAAUC,aAAU95B,EAChD+6B,EAAYjU,EAAQG,OAAO2D,WAAUpsB,GAAKA,EAAE6sB,UAAYuP,IACxDI,EAAUlU,EAAQG,OAAO2D,WAAUpsB,GAAKA,EAAE6sB,UAAYwP,KAEzD/T,EAAQG,OAAO8T,GAAYjU,EAAQG,OAAO+T,IAAY,CAAClU,EAAQG,OAAO+T,GAAUlU,EAAQG,OAAO8T,KAC/FjU,EAAQI,YAAYyD,GAAM7D,EAAQI,YAAYyT,IAAa,CAAC7T,EAAQI,YAAYyT,GAAW7T,EAAQI,YAAYyD,IAEhHuG,EAAMnD,QAAQzC,EAAMiC,YAChBuN,IAAQF,GACRK,EAAgBL,GAChBE,IAAQD,GACRI,EAAgBJ,EACxB,CAGA,SAASxB,IACL,IAAI1O,EAAM7D,EAAQI,YAAY0D,WAAUpsB,GAAKA,IAAMsB,KAAKm2B,WAAW4D,UAAUC,UACjE,IAARnP,GACA+P,EAAW/P,EAAKA,EAAM,EAC9B,CAGA,SAAS2O,IACL,IAAI3O,EAAM7D,EAAQI,YAAY0D,WAAUpsB,GAAKA,IAAMsB,KAAKm2B,WAAW4D,UAAUC,UACzEnP,IAAQ7D,EAAQG,OAAO7nB,OAAS,GAChCs7B,EAAW/P,EAAKA,EAAM,EAC9B,CAGA,SAASsQ,EAAgBnH,GACH,OAAdrN,GACAyK,EAAMkG,WAAW,aAAatD,WAAcoH,SAAS,QAC7D,CAsBA5C,eAAea,IACX,IAAIgC,EAAS1U,GAAWoT,UAAUC,QAClCxO,EAAMmE,eAAeyB,GAClBiK,GACCC,EAAgBD,EACxB,CAyBA,SAASC,EAAgBpO,GACrBkE,EAAMkG,WAAW,aAAapK,WAAakO,SAAS,QACxD,CA7QAhK,EAAM+F,YAAY,gBACb,SAAUz4B,IACG,WAAVA,EAAEklB,KAA8B,YAAVllB,EAAEklB,KAA+B,cAAVllB,EAAEklB,KAClC,cAAVllB,EAAEklB,KAAiC,eAAVllB,EAAEklB,KAAkC,UAAVllB,EAAEklB,KACxDiU,EAAK0D,YAAY,IAIzBnK,EAAM+F,YAAY,YAAY,SA4V9B,SAAuBz4B,GAEnB,GADAA,EAAE88B,iBACqD,KAAnDpK,EAAMkG,WAAW,iBAAiB3N,OAAO1pB,QAC9B,YAAVvB,EAAEklB,KAA+B,cAAVllB,EAAEklB,KAAiC,UAAVllB,EAAEklB,KAAkB,CACrE,MAAMgR,EAAOxD,EAAMkG,WAAW,YAAY3N,OAC1C,IAAIqR,EAAM5J,EAAMkG,WAAW,uBAAuB3N,OAEpC,YAAVjrB,EAAEklB,MAEGoX,GAIDA,EAAI1G,WAAkB,MAAEr0B,MAAQ,GAC5B+6B,EAAIjG,uBACJiG,EAAIjG,uBAAuBT,WAAkB,MAAEr0B,MAAQ,YAEvD20B,EAAKI,iBAAiBV,WAAkB,MAAEr0B,MAAQ,aAPtD20B,EAAKI,iBAAiBV,WAAkB,MAAEr0B,MAAQ,YAStD+6B,EAAM5J,EAAMkG,WAAW,uBAAuB3N,OAC9CqR,EAAIS,gBAAe,IAET,cAAV/8B,EAAEklB,MAEGoX,GAIDA,EAAI1G,WAAkB,MAAEr0B,MAAQ,GAC5B+6B,EAAIlG,mBACJkG,EAAIlG,mBAAmBR,WAAkB,MAAEr0B,MAAQ,YAEnD20B,EAAK7C,kBAAkBuC,WAAkB,MAAEr0B,MAAQ,aAPvD20B,EAAK7C,kBAAkBuC,WAAkB,MAAEr0B,MAAQ,YASvD+6B,EAAM5J,EAAMkG,WAAW,uBAAuB3N,OAC9CqR,EAAIS,gBAAe,IAET,UAAV/8B,EAAEklB,MAEFwN,EAAMkG,WAAW0D,GAAKI,SAAS,SAC/BhK,EAAM0F,SAAS,WAAW,aAAc,UAEhD,CACJ,IAtYA1F,EAAM+F,YAAY,cAAc,SAAUz4B,IACxB,WAAVA,EAAEklB,KACFwN,EAAM0F,SAAS,WAAW,aAAc,SAC5C,IAIJ1F,EAAM+F,YAAY,OAAO,SAAQ,KAC7BmD,IACAE,GAAS,IAIbpJ,EAAM+F,YAAY,OAAQ,WA0P1B,SAA6Bz4B,GACX,UAAVA,EAAEklB,MACFsC,EAAK/N,OAAQ,GACH,YAAVzZ,EAAEklB,MACFsC,EAAKU,MAAO,GACF,YAAVloB,EAAEklB,MACFsC,EAAKW,IAAK,GACA,cAAVnoB,EAAEklB,MACFsC,EAAKY,MAAO,GACF,MAAVpoB,EAAEklB,MACFsC,EAAKjnB,GAAI,GACC,MAAVP,EAAEklB,MACFsC,EAAKrmB,GAAI,GACC,WAAVnB,EAAEklB,MACFsC,EAAKa,KAAM,GAEXb,EAAKa,KAAOoS,GAA2D,WAA5C/H,EAAM2F,SAAS,WAAW,cACrDwD,IAEKrU,EAAKa,KAAqB,OAAdJ,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,eACjEkD,IAEA/T,EAAK/N,OAAS+N,EAAKW,IAAoB,OAAdF,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBACzEr4B,EAAE88B,iBACFpK,EAAMkG,WAAW3Q,GAAWsC,OAAO,OAAOmS,SAAS,UAEnDlV,EAAK/N,OAAS+N,EAAKY,MAAsB,OAAdH,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBAC3Er4B,EAAE88B,iBACFpK,EAAMkG,WAAW3Q,GAAWsC,OAAO,SAASmS,SAAS,UAErDlV,EAAKU,MAAQV,EAAKjnB,IAClBP,EAAE88B,iBACFlB,IACAE,KAEJ,GAAItU,EAAKW,KAAOX,EAAK/N,OAAuB,OAAdwO,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBAC1Er4B,EAAE88B,iBACExU,EAAQI,YAAY9nB,QAAQ,CAC5B,MAAM07B,EAAMhU,EAAQI,YAAY0D,WAAUpsB,GAAKA,IAAMioB,EAAUoT,UAAUC,UAAW,GACvE,IAATgB,GACA5J,EAAMkG,WAAW,aAAatQ,EAAQI,YAAY4T,YAAcI,SAAS,QACjF,CAEJ,GAAIlV,EAAKW,KAAOX,EAAK/N,OAAuB,OAAdwO,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBAC1Er4B,EAAE88B,iBACExU,EAAQI,YAAY9nB,QAAQ,CAC5B,MAAM07B,EAAMhU,EAAQI,YAAY9nB,OAAS,EACzC8xB,EAAMkG,WAAW,aAAatQ,EAAQI,YAAY4T,YAAcI,SAAS,QAC7E,CAEJ,GAAIlV,EAAKY,OAASZ,EAAK/N,OAAuB,OAAdwO,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBAC5Er4B,EAAE88B,iBACExU,EAAQI,YAAY9nB,QAAQ,CAC5B,MAAM07B,EAAMhU,EAAQI,YAAY0D,WAAUpsB,GAAKA,IAAMioB,EAAUoT,UAAUC,UAAW,EAChFgB,IAAQhU,EAAQI,YAAY9nB,QAC5B8xB,EAAMkG,WAAW,aAAatQ,EAAQI,YAAY4T,YAAcI,SAAS,QACjF,CAEAlV,EAAKY,OAASZ,EAAK/N,OAAuB,OAAdwO,GAAkE,WAA5CyK,EAAM2F,SAAS,WAAW,gBAC5Er4B,EAAE88B,iBACExU,EAAQI,YAAY9nB,QACpB8xB,EAAMkG,WAAW,aAAatQ,EAAQI,YAAY,YAAYgU,SAAS,SAGnF,IAzTAhK,EAAM+F,YAAY,OAAQ,SA2T1B,SAA2Bz4B,GACT,UAAVA,EAAEklB,MACFsC,EAAK/N,OAAQ,GACH,YAAVzZ,EAAEklB,MACFsC,EAAKU,MAAO,GACF,YAAVloB,EAAEklB,MACFsC,EAAKW,IAAK,GACA,cAAVnoB,EAAEklB,MACFsC,EAAKY,MAAO,GACF,MAAVpoB,EAAEklB,MACFsC,EAAKjnB,GAAI,GACC,MAAVP,EAAEklB,MACFsC,EAAKrmB,GAAI,GACC,WAAVnB,EAAEklB,MACFsC,EAAKa,KAAM,EACnB,IAxUAqK,EAAM+F,YAAY,kBAAkB,QAASoD,GAC7CnJ,EAAM+F,YAAY,eAAe,QAASwC,GAC1CvI,EAAM+F,YAAY,aAAa,QAASkC,GACxCjI,EAAM+F,YAAY,SAAS,SAyN3BqB,iBACI,IAAI6C,EAAS1U,GAAWoT,UAAUC,QAClCxO,EAAM+E,YAAYa,GACdiK,GACAC,EAAgBD,EACxB,IA7NAjK,EAAM+F,YAAY,gBAAgB,SAwMlCqB,iBACI,IAAI6C,EAAS1U,GAAWoT,UAAUC,QAClCxO,EAAMsC,YAAYsD,GACdiK,GACAC,EAAgBD,EACxB,IA5MAjK,EAAM+F,YAAY,eAAgB,SA+NlCqB,iBACI,MAAMkD,EAAM,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAC3BnP,EAAQ,CAAC,WAAY,UAAW,YAAa,gBAAiB,UAAW,UAAW,UAAW,WACrG,IAAK,IAAIztB,EAAI,EAAGA,EAAIytB,EAAMjtB,OAAQR,IAC9B+4B,EAAKC,WAAWhL,GAAK4O,EAAI58B,GACzB+4B,EAAKC,WAAWrmB,KAAO8a,EAAMztB,SACvB+4B,EAAKiB,UAAUvM,EAAMztB,GAAG,UACxB66B,IAEV9B,EAAKC,WAAWhL,IAAM,EACtB+K,EAAKC,WAAWrmB,KAAO,EAC3B,IAzOA2f,EAAM+F,YAAY,UAAW,SA2B7B,WACI/F,EAAMqF,cACNzP,EAAQmE,WACZ,IAqVA,IAAIpB,EAAOqH,EAAMa,iBACjBjL,EAAQ8B,gBAER9B,EAAQ8C,SAASC,GA5RjB,SAAiBV,GACb,GAAIA,EAAMsS,aAA0C,SAA3BtS,EAAMsS,YAAYhqB,KAAiB,OAE5D,IAAIxP,EAAIknB,EAAM1C,WAAaK,EAAQY,GAAG3e,QAEtC9G,EAAIA,EAAE0K,KAAI5M,GAASA,EAAQmxB,EAAMiB,WACjCrL,EAAQc,IAAI0B,OAAOrnB,EAAE0K,IAAIma,EAAQY,GAAGgU,OAAQ5U,EAAQY,KAEpD,IAAI,IAAIiN,KAASzD,EAAMkG,WAAW,UAAU3N,OAAOkS,SAC/CzK,EAAMkG,WAAWzC,GAAOnL,KAAK,IAAK1C,EAAQe,MAE9CqJ,EAAMsF,kBACNtF,EAAMkG,WAAW,eAAej4B,KAAK2nB,EAAQgB,MAC7CoJ,EAAMkG,WAAW,SAASj4B,KAAK2nB,EAAQsB,KAAKvjB,UACxC2c,GAAGoa,aACF16B,MAAOgwB,EAAc,UAAMjvB,EAAE,GAAOA,EAAE,KACtClB,WAAWkB,EAAE,GAAI,GAClB,KACAknB,EACR,IA0QArC,EAAQoD,QAAQL,GAxQhB,SAAgBV,GACZ,GAAIA,EAAMsS,aAA0C,UAA3BtS,EAAMsS,YAAYhqB,KAAkB,OAE7D,IAAI/S,EAAIyqB,EAAMtkB,UAEdiiB,EAAQc,IAAI0B,OAAO5qB,EAAEm9B,SAAS/U,EAAQY,IAAI4B,UAE1C,IAAI,IAAIqL,KAASzD,EAAMkG,WAAW,UAAU3N,OAAOkS,SAC/CzK,EAAMkG,WAAWzC,GAAOnL,KAAK,IAAK1C,EAAQe,MAE9C,GAAIsB,EAAMsS,YAAa,CACnB,IAAIK,EAAM5K,EAAMkG,WAAWlG,EAAMkG,WAAW,cAAc3N,OAAOwM,YAC7Dz0B,EAAI+nB,OAAOuS,EAAIrS,OAAO5kB,UAAUi1B,QAAQW,cAAc31B,OAAOjG,GACjEi9B,EAAItS,KAAK,YAAa,eAAehoB,EAAI2nB,EAAMsS,YAAYM,aAC/D,CAEA7K,EAAMsF,kBACNtF,EAAMkG,WAAW,eAAej4B,KAAK2nB,EAAQgB,MAC7CoJ,EAAMkG,WAAW,OAAOj4B,KAAK2nB,EAAQqB,MAAMwB,KAAM7C,EAAQY,GAAG3e,QAAQ4D,IAAIjO,EAAEs9B,QAASt9B,GAAGiO,KAAI5M,GAASA,EAAQmxB,EAAMiB,WAAWhJ,EAChI,IAuPArC,EAAQgB,KAAKmU,YAAYt8B,GAAc,cAAsBA,KAC7DmnB,EAAQyD,oBAAoBV,GAC5BqH,EAAMkG,WAAW,eAAe5N,KAAK,YAAa,eAAe0H,EAAMkG,WAAW,eAAe3N,OAAOY,aAAe","sources":["webpack://asterion_timeviz/./intersections.js","webpack://asterion_timeviz/webpack/bootstrap","webpack://asterion_timeviz/webpack/runtime/global","webpack://asterion_timeviz/webpack/runtime/publicPath","webpack://asterion_timeviz/./currentVer/DateUtils.js","webpack://asterion_timeviz/./index.js","webpack://asterion_timeviz/./context.js","webpack://asterion_timeviz/./order.js","webpack://asterion_timeviz/./build.js","webpack://asterion_timeviz/./communication.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.intersection = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n// expose classes\r\n\r\nexports.Point2D = require('./lib/Point2D');\r\nexports.Vector2D = require('./lib/Vector2D');\r\nexports.Matrix2D = require('./lib/Matrix2D');\r\n\r\n},{\"./lib/Matrix2D\":2,\"./lib/Point2D\":3,\"./lib/Vector2D\":4}],2:[function(require,module,exports){\r\n/**\r\n *   Matrix2D.js\r\n *\r\n *   copyright 2001-2002, 2013 Kevin Lindsey\r\n */\r\n\r\n/**\r\n *  Matrix2D\r\n *\r\n *  [a c e]\r\n *  [b d f]\r\n *  [0 0 1]\r\n *\r\n *  @param {Number} a\r\n *  @param {Number} b\r\n *  @param {Number} c\r\n *  @param {Number} d\r\n *  @param {Number} e\r\n *  @param {Number} f\r\n *  @returns {Matrix2D}\r\n */\r\nfunction Matrix2D(a, b, c, d, e, f) {\r\n    Object.defineProperties(this, {\r\n        \"a\": {\r\n            value: (a !== undefined) ? a : 1,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"b\": {\r\n            value: (b !== undefined) ? b : 0,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"c\": {\r\n            value: (c !== undefined) ? c : 0,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"d\": {\r\n            value: (d !== undefined) ? d : 1,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"e\": {\r\n            value: (e !== undefined) ? e : 0,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"f\": {\r\n            value: (f !== undefined) ? f : 0,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n *  Identity matrix\r\n *\r\n *  @returns {Matrix2D}\r\n */\r\n// TODO: consider using Object#defineProperty to make this read-only\r\nMatrix2D.IDENTITY = new Matrix2D(1, 0, 0, 1, 0, 0);\r\nMatrix2D.IDENTITY.isIdentity = function () { return true; };\r\n\r\n/**\r\n *  multiply\r\n *\r\n *  @pararm {Matrix2D} that\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.multiply = function (that) {\r\n    if (this.isIdentity()) {\r\n        return that;\r\n    }\r\n\r\n    if (that.isIdentity()) {\r\n        return this;\r\n    }\r\n\r\n    return new this.constructor(\r\n        this.a * that.a + this.c * that.b,\r\n        this.b * that.a + this.d * that.b,\r\n        this.a * that.c + this.c * that.d,\r\n        this.b * that.c + this.d * that.d,\r\n        this.a * that.e + this.c * that.f + this.e,\r\n        this.b * that.e + this.d * that.f + this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  inverse\r\n *\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.inverse = function () {\r\n    if (this.isIdentity()) {\r\n        return this;\r\n    }\r\n\r\n    var det1 = this.a * this.d - this.b * this.c;\r\n\r\n    if ( det1 === 0.0 ) {\r\n        throw(\"Matrix is not invertible\");\r\n    }\r\n\r\n    var idet = 1.0 / det1;\r\n    var det2 = this.f * this.c - this.e * this.d;\r\n    var det3 = this.e * this.b - this.f * this.a;\r\n\r\n    return new this.constructor(\r\n        this.d * idet,\r\n       -this.b * idet,\r\n       -this.c * idet,\r\n        this.a * idet,\r\n          det2 * idet,\r\n          det3 * idet\r\n    );\r\n};\r\n\r\n/**\r\n *  translate\r\n *\r\n *  @param {Number} tx\r\n *  @param {Number} ty\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.translate = function(tx, ty) {\r\n    return new this.constructor(\r\n        this.a,\r\n        this.b,\r\n        this.c,\r\n        this.d,\r\n        this.a * tx + this.c * ty + this.e,\r\n        this.b * tx + this.d * ty + this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  scale\r\n *\r\n *  @param {Number} scale\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.scale = function(scale) {\r\n    return new this.constructor(\r\n        this.a * scale,\r\n        this.b * scale,\r\n        this.c * scale,\r\n        this.d * scale,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  scaleAt\r\n *\r\n *  @param {Number} scale\r\n *  @param {Point2D} center\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.scaleAt = function(scale, center) {\r\n    var dx = center.x - scale * center.x;\r\n    var dy = center.y - scale * center.y;\r\n\r\n    return new this.constructor(\r\n        this.a * scale,\r\n        this.b * scale,\r\n        this.c * scale,\r\n        this.d * scale,\r\n        this.a * dx + this.c * dy + this.e,\r\n        this.b * dx + this.d * dy + this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  scaleNonUniform\r\n *\r\n *  @param {Number} scaleX\r\n *  @param {Number} scaleY\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.scaleNonUniform = function(scaleX, scaleY) {\r\n    return new this.constructor(\r\n        this.a * scaleX,\r\n        this.b * scaleX,\r\n        this.c * scaleY,\r\n        this.d * scaleY,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  scaleNonUniformAt\r\n *\r\n *  @param {Number} scaleX\r\n *  @param {Number} scaleY\r\n *  @param {Point2D} center\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.scaleNonUniformAt = function(scaleX, scaleY, center) {\r\n    var dx = center.x - scaleX * center.x;\r\n    var dy = center.y - scaleY * center.y;\r\n\r\n    return new this.constructor(\r\n        this.a * scaleX,\r\n        this.b * scaleX,\r\n        this.c * scaleY,\r\n        this.d * scaleY,\r\n        this.a * dx + this.c * dy + this.e,\r\n        this.b * dx + this.d * dy + this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  rotate\r\n *\r\n *  @param {Number} radians\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.rotate = function(radians) {\r\n    var c = Math.cos(radians);\r\n    var s = Math.sin(radians);\r\n\r\n    return new this.constructor(\r\n        this.a *  c + this.c * s,\r\n        this.b *  c + this.d * s,\r\n        this.a * -s + this.c * c,\r\n        this.b * -s + this.d * c,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  rotateAt\r\n *\r\n *  @param {Number} radians\r\n *  @param {Point2D} center\r\n *  @result {Matrix2D}\r\n */\r\nMatrix2D.prototype.rotateAt = function(radians, center) {\r\n    var c = Math.cos(radians);\r\n    var s = Math.sin(radians);\r\n    var t1 = -center.x + center.x * c - center.y * s;\r\n    var t2 = -center.y + center.y * c + center.x * s;\r\n\r\n    return new this.constructor(\r\n        this.a *  c + this.c * s,\r\n        this.b *  c + this.d * s,\r\n        this.a * -s + this.c * c,\r\n        this.b * -s + this.d * c,\r\n        this.a * t1 + this.c * t2 + this.e,\r\n        this.b * t1 + this.d * t2 + this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  rotateFromVector\r\n *\r\n *  @param {Vector2D}\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.rotateFromVector = function(vector) {\r\n    var unit = vector.unit();\r\n    var c = unit.x; // cos\r\n    var s = unit.y; // sin\r\n\r\n    return new this.constructor(\r\n        this.a *  c + this.c * s,\r\n        this.b *  c + this.d * s,\r\n        this.a * -s + this.c * c,\r\n        this.b * -s + this.d * c,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  flipX\r\n *\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.flipX = function() {\r\n    return new this.constructor(\r\n        -this.a,\r\n        -this.b,\r\n         this.c,\r\n         this.d,\r\n         this.e,\r\n         this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  flipY\r\n *\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.flipY = function() {\r\n    return new this.constructor(\r\n         this.a,\r\n         this.b,\r\n        -this.c,\r\n        -this.d,\r\n         this.e,\r\n         this.f\r\n    );\r\n};\r\n\r\n/**\r\n *  skewX\r\n *\r\n *  @pararm {Number} radians\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.skewX = function(radians) {\r\n    var t = Math.tan(radians);\r\n\r\n    return new this.constructor(\r\n        this.a,\r\n        this.b,\r\n        this.a * t + this.c,\r\n        this.b * t + this.d,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n// TODO: skewXAt\r\n\r\n/**\r\n *  skewY\r\n *\r\n *  @pararm {Number} radians\r\n *  @returns {Matrix2D}\r\n */\r\nMatrix2D.prototype.skewY = function(radians) {\r\n    var t = Math.tan(radians);\r\n\r\n    return new this.constructor(\r\n        this.a + this.c * t,\r\n        this.b + this.d * t,\r\n        this.c,\r\n        this.d,\r\n        this.e,\r\n        this.f\r\n    );\r\n};\r\n\r\n// TODO: skewYAt\r\n\r\n/**\r\n *  isIdentity\r\n *\r\n *  @returns {Boolean}\r\n */\r\nMatrix2D.prototype.isIdentity = function() {\r\n    return (\r\n        this.a === 1.0 &&\r\n        this.b === 0.0 &&\r\n        this.c === 0.0 &&\r\n        this.d === 1.0 &&\r\n        this.e === 0.0 &&\r\n        this.f === 0.0\r\n    );\r\n};\r\n\r\n/**\r\n *  isInvertible\r\n *\r\n *  @returns {Boolean}\r\n */\r\nMatrix2D.prototype.isInvertible = function() {\r\n    return this.a * this.d - this.b * this.c !== 0.0;\r\n};\r\n\r\n/**\r\n *  getScale\r\n *\r\n *  @returns {{ scaleX: Number, scaleY: Number }}\r\n */\r\nMatrix2D.prototype.getScale = function() {\r\n    return {\r\n        scaleX: Math.sqrt(this.a * this.a + this.c * this.c),\r\n        scaleY: Math.sqrt(this.b * this.b + this.d * this.d)\r\n    };\r\n};\r\n\r\n/**\r\n *  getDecomposition\r\n *\r\n *  Calculates matrix Singular Value Decomposition\r\n *\r\n *  The resulting matrices, translation, rotation, scale, and rotation0, return\r\n *  this matrix when they are muliplied together in the listed order\r\n *\r\n *  @see Jim Blinn's article {@link http://dx.doi.org/10.1109/38.486688}\r\n *  @see {@link http://math.stackexchange.com/questions/861674/decompose-a-2d-arbitrary-transform-into-only-scaling-and-rotation}\r\n *\r\n *  @returns {{ translation: Matrix2D, rotation: Matrix2D, scale: Matrix2D, rotation0: Matrix2D }}\r\n */\r\nMatrix2D.prototype.getDecomposition = function () {\r\n    var E      = (this.a + this.d) * 0.5;\r\n    var F      = (this.a - this.d) * 0.5;\r\n    var G      = (this.b + this.c) * 0.5;\r\n    var H      = (this.b - this.c) * 0.5;\r\n\r\n    var Q      = Math.sqrt(E * E + H * H);\r\n    var R      = Math.sqrt(F * F + G * G);\r\n    var scaleX = Q + R;\r\n    var scaleY = Q - R;\r\n\r\n    var a1     = Math.atan2(G, F);\r\n    var a2     = Math.atan2(H, E);\r\n    var theta  = (a2 - a1) * 0.5;\r\n    var phi    = (a2 + a1) * 0.5;\r\n\r\n    // TODO: Add static methods to generate translation, rotation, etc.\r\n    // matrices directly\r\n\r\n    return {\r\n        translation: new this.constructor(1, 0, 0, 1, this.e, this.f),\r\n        rotation:    this.constructor.IDENTITY.rotate(phi),\r\n        scale:       new this.constructor(scaleX, 0, 0, scaleY, 0, 0),\r\n        rotation0:   this.constructor.IDENTITY.rotate(theta)\r\n    };\r\n};\r\n\r\n/**\r\n *  equals\r\n *\r\n *  @param {Matrix2D} that\r\n *  @returns {Boolean}\r\n */\r\nMatrix2D.prototype.equals = function(that) {\r\n    return (\r\n        this.a === that.a &&\r\n        this.b === that.b &&\r\n        this.c === that.c &&\r\n        this.d === that.d &&\r\n        this.e === that.e &&\r\n        this.f === that.f\r\n    );\r\n};\r\n\r\n/**\r\n *  toString\r\n *\r\n *  @returns {String}\r\n */\r\nMatrix2D.prototype.toString = function() {\r\n    return \"matrix(\" + [this.a, this.b, this.c, this.d, this.e, this.f].join(\",\") + \")\";\r\n};\r\n\r\nif (typeof module !== \"undefined\") {\r\n    module.exports = Matrix2D;\r\n}\r\n\r\n},{}],3:[function(require,module,exports){\r\n/**\r\n *\r\n *   Point2D.js\r\n *\r\n *   copyright 2001-2002, 2013 Kevin Lindsey\r\n *\r\n */\r\n\r\n/**\r\n *  Point2D\r\n *\r\n *  @param {Number} x\r\n *  @param {Number} y\r\n *  @returns {Point2D}\r\n */\r\nfunction Point2D(x, y) {\r\n    Object.defineProperties(this, {\r\n        \"x\": {\r\n            value: x,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"y\": {\r\n            value: y,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        }\r\n    });\r\n    // this.x = x;\r\n    // this.y = y;\r\n}\r\n\r\n/**\r\n *  clone\r\n *\r\n *  @returns {Point2D}\r\n */\r\nPoint2D.prototype.clone = function() {\r\n    return new this.constructor(this.x, this.y);\r\n};\r\n\r\n/**\r\n *  add\r\n *\r\n *  @param {Point2D|Vector2D} that\r\n *  @returns {Point2D}\r\n */\r\nPoint2D.prototype.add = function(that) {\r\n    return new this.constructor(this.x+that.x, this.y+that.y);\r\n};\r\n\r\n/**\r\n *  subtract\r\n *\r\n *  @param { Vector2D | Point2D } that\r\n *  @returns {Point2D}\r\n */\r\nPoint2D.prototype.subtract = function(that) {\r\n    return new this.constructor(this.x-that.x, this.y-that.y);\r\n};\r\n\r\n/**\r\n *  multiply\r\n *\r\n *  @param {Number} scalar\r\n *  @returns {Point2D}\r\n */\r\nPoint2D.prototype.multiply = function(scalar) {\r\n    return new this.constructor(this.x*scalar, this.y*scalar);\r\n};\r\n\r\n/**\r\n *  divide\r\n *\r\n *  @param {Number} scalar\r\n *  @returns {Point2D}\r\n */\r\nPoint2D.prototype.divide = function(scalar) {\r\n    return new this.constructor(this.x/scalar, this.y/scalar);\r\n};\r\n\r\n/**\r\n *  equals\r\n *\r\n *  @param {Point2D} that\r\n *  @returns {Boolean}\r\n */\r\nPoint2D.prototype.equals = function(that) {\r\n    return ( this.x === that.x && this.y === that.y );\r\n};\r\n\r\n// utility methods\r\n\r\n/**\r\n *  lerp\r\n *\r\n *  @param { Vector2D | Point2D } that\r\n *  @param {Number} t\r\n @  @returns {Point2D}\r\n */\r\nPoint2D.prototype.lerp = function(that, t) {\r\n    var omt = 1.0 - t;\r\n\r\n    return new this.constructor(\r\n        this.x * omt + that.x * t,\r\n        this.y * omt + that.y * t\r\n    );\r\n};\r\n\r\n/**\r\n *  distanceFrom\r\n *\r\n *  @param {Point2D} that\r\n *  @returns {Number}\r\n */\r\nPoint2D.prototype.distanceFrom = function(that) {\r\n    var dx = this.x - that.x;\r\n    var dy = this.y - that.y;\r\n\r\n    return Math.sqrt(dx*dx + dy*dy);\r\n};\r\n\r\n/**\r\n *  min\r\n *\r\n *  @param {Point2D} that\r\n *  @returns {Number}\r\n */\r\nPoint2D.prototype.min = function(that) {\r\n    return new this.constructor(\r\n        Math.min( this.x, that.x ),\r\n        Math.min( this.y, that.y )\r\n    );\r\n};\r\n\r\n/**\r\n *  max\r\n *\r\n *  @param {Point2D} that\r\n *  @returns {Number}\r\n */\r\nPoint2D.prototype.max = function(that) {\r\n    return new this.constructor(\r\n        Math.max( this.x, that.x ),\r\n        Math.max( this.y, that.y )\r\n    );\r\n};\r\n\r\n/**\r\n *  transform\r\n *\r\n *  @param {Matrix2D}\r\n *  @result {Point2D}\r\n */\r\nPoint2D.prototype.transform = function(matrix) {\r\n    return new this.constructor(\r\n        matrix.a * this.x + matrix.c * this.y + matrix.e,\r\n        matrix.b * this.x + matrix.d * this.y + matrix.f\r\n    );\r\n};\r\n\r\n/**\r\n *  toString\r\n *\r\n *  @returns {String}\r\n */\r\nPoint2D.prototype.toString = function() {\r\n    return \"point(\" + this.x + \",\" + this.y + \")\";\r\n};\r\n\r\nif (typeof module !== \"undefined\") {\r\n    module.exports = Point2D;\r\n}\r\n\r\n},{}],4:[function(require,module,exports){\r\n/**\r\n *\r\n *   Vector2D.js\r\n *\r\n *   copyright 2001-2002, 2013 Kevin Lindsey\r\n *\r\n */\r\n\r\n/**\r\n *  Vector2D\r\n *\r\n *  @param {Number} x\r\n *  @param {Number} y\r\n *  @returns {Vector2D}\r\n */\r\nfunction Vector2D(x, y) {\r\n    Object.defineProperties(this, {\r\n        \"x\": {\r\n            value: x,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        },\r\n        \"y\": {\r\n            value: y,\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        }\r\n    });\r\n    // this.x = x;\r\n    // this.y = y;\r\n}\r\n\r\n/**\r\n *  fromPoints\r\n *\r\n *  @param {Point2D} p1\r\n *  @param {Point2D} p2\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.fromPoints = function(p1, p2) {\r\n    return new Vector2D(\r\n        p2.x - p1.x,\r\n        p2.y - p1.y\r\n    );\r\n};\r\n\r\n/**\r\n *  length\r\n *\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.length = function() {\r\n    return Math.sqrt(this.x*this.x + this.y*this.y);\r\n};\r\n\r\n/**\r\n *  magnitude\r\n *\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.magnitude = function() {\r\n    return this.x*this.x + this.y*this.y;\r\n};\r\n\r\n/**\r\n *  dot\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.dot = function(that) {\r\n    return this.x*that.x + this.y*that.y;\r\n};\r\n\r\n/**\r\n *  cross\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.cross = function(that) {\r\n    return this.x*that.y - this.y*that.x;\r\n};\r\n\r\n/**\r\n *  determinant\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.determinant = function(that) {\r\n    return this.x*that.y - this.y*that.x;\r\n};\r\n\r\n/**\r\n *  unit\r\n *\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.unit = function() {\r\n    return this.divide( this.length() );\r\n};\r\n\r\n/**\r\n *  add\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.add = function(that) {\r\n    return new this.constructor(this.x + that.x, this.y + that.y);\r\n};\r\n\r\n/**\r\n *  subtract\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.subtract = function(that) {\r\n    return new this.constructor(this.x - that.x, this.y - that.y);\r\n};\r\n\r\n/**\r\n *  multiply\r\n *\r\n *  @param {Number} scalar\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.multiply = function(scalar) {\r\n    return new this.constructor(this.x * scalar, this.y * scalar);\r\n};\r\n\r\n/**\r\n *  divide\r\n *\r\n *  @param {Number} scalar\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.divide = function(scalar) {\r\n    return new this.constructor(this.x / scalar, this.y / scalar);\r\n};\r\n\r\n/**\r\n *  angleBetween\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Number}\r\n */\r\nVector2D.prototype.angleBetween = function(that) {\r\n    var cos = this.dot(that) / (this.length() * that.length());\r\n    cos = Math.max(-1, Math.min(cos, 1));\r\n    var radians = Math.acos(cos);\r\n\r\n    return (this.cross(that) < 0.0) ? -radians : radians;\r\n};\r\n\r\n/**\r\n *  Find a vector is that is perpendicular to this vector\r\n *\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.perp = function() {\r\n    return new this.constructor(-this.y, this.x);\r\n};\r\n\r\n/**\r\n *  Find the component of the specified vector that is perpendicular to\r\n *  this vector\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.perpendicular = function(that) {\r\n    return this.subtract(this.project(that));\r\n};\r\n\r\n/**\r\n *  project\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.project = function(that) {\r\n    var percent = this.dot(that) / that.dot(that);\r\n\r\n    return that.multiply(percent);\r\n};\r\n\r\n/**\r\n *  transform\r\n *\r\n *  @param {Matrix2D}\r\n *  @returns {Vector2D}\r\n */\r\nVector2D.prototype.transform = function(matrix) {\r\n    return new this.constructor(\r\n        matrix.a * this.x + matrix.c * this.y,\r\n        matrix.b * this.x + matrix.d * this.y\r\n    );\r\n};\r\n\r\n/**\r\n *  equals\r\n *\r\n *  @param {Vector2D} that\r\n *  @returns {Boolean}\r\n */\r\nVector2D.prototype.equals = function(that) {\r\n    return (\r\n        this.x === that.x &&\r\n        this.y === that.y\r\n    );\r\n};\r\n\r\n/**\r\n *  toString\r\n *\r\n *  @returns {String}\r\n */\r\nVector2D.prototype.toString = function() {\r\n    return \"vector(\" + this.x + \",\" + this.y + \")\";\r\n};\r\n\r\nif (typeof module !== \"undefined\") {\r\n    module.exports = Vector2D;\r\n}\r\n\r\n},{}],5:[function(require,module,exports){\r\n// expose classes\r\n\r\nexports.Polynomial = require('./lib/Polynomial');\r\nexports.SqrtPolynomial = require('./lib/SqrtPolynomial');\r\n\r\n},{\"./lib/Polynomial\":6,\"./lib/SqrtPolynomial\":7}],6:[function(require,module,exports){\r\n/**\r\n *\r\n *   Polynomial.js\r\n *\r\n *   copyright 2002, 2013 Kevin Lindsey\r\n * \r\n *   contribution {@link http://github.com/Quazistax/kld-polynomial}\r\n *       @copyright 2015 Robert Benko (Quazistax) <quazistax@gmail.com>\r\n *       @license MIT\r\n */\r\n\r\nPolynomial.TOLERANCE = 1e-6;\r\nPolynomial.ACCURACY  = 15;\r\n\r\n\r\n/**\r\n *  interpolate\r\n *\r\n *  @param {Array<Number>} xs\r\n *  @param {Array<Number>} ys\r\n *  @param {Number} n\r\n *  @param {Number} offset\r\n *  @param {Number} x\r\n *\r\n *  @returns {y:Number, dy:Number}\r\n */\r\nPolynomial.interpolate = function(xs, ys, n, offset, x) {\r\n    if ( xs.constructor !== Array || ys.constructor !== Array )\r\n        throw new Error(\"Polynomial.interpolate: xs and ys must be arrays\");\r\n    if ( isNaN(n) || isNaN(offset) || isNaN(x) )\r\n        throw new Error(\"Polynomial.interpolate: n, offset, and x must be numbers\");\r\n\r\n    var y  = 0;\r\n    var dy = 0;\r\n    var c = new Array(n);\r\n    var d = new Array(n);\r\n    var ns = 0;\r\n    var result;\r\n\r\n    var diff = Math.abs(x - xs[offset]);\r\n    for ( var i = 0; i < n; i++ ) {\r\n        var dift = Math.abs(x - xs[offset+i]);\r\n\r\n        if ( dift < diff ) {\r\n            ns = i;\r\n            diff = dift;\r\n        }\r\n        c[i] = d[i] = ys[offset+i];\r\n    }\r\n    y = ys[offset+ns];\r\n    ns--;\r\n\r\n    for ( var m = 1; m < n; m++ ) {\r\n        for ( var i = 0; i < n-m; i++ ) {\r\n            var ho = xs[offset+i] - x;\r\n            var hp = xs[offset+i+m] - x;\r\n            var w = c[i+1]-d[i];\r\n            var den = ho - hp;\r\n\r\n            if ( den == 0.0 ) {\r\n                result = { y: 0, dy: 0};\r\n                break;\r\n            }\r\n\r\n            den = w / den;\r\n            d[i] = hp*den;\r\n            c[i] = ho*den;\r\n        }\r\n        dy = (2*(ns+1) < (n-m)) ? c[ns+1] : d[ns--];\r\n        y += dy;\r\n    }\r\n\r\n    return { y: y, dy: dy };\r\n};\r\n\r\n\r\n/**\r\n *  Polynomial\r\n *\r\n *  @returns {Polynomial}\r\n */\r\nfunction Polynomial() {\r\n    this.init( arguments );\r\n}\r\n\r\n\r\n/**\r\n *  init\r\n */\r\nPolynomial.prototype.init = function(coefs) {\r\n    this.coefs = new Array();\r\n\r\n    for ( var i = coefs.length - 1; i >= 0; i-- )\r\n        this.coefs.push( coefs[i] );\r\n\r\n    this._variable = \"t\";\r\n    this._s = 0;\r\n};\r\n\r\n\r\n/**\r\n *  eval\r\n */\r\nPolynomial.prototype.eval = function(x) {\r\n    if ( isNaN(x) )\r\n        throw new Error(\"Polynomial.eval: parameter must be a number\");\r\n\r\n    var result = 0;\r\n\r\n    for ( var i = this.coefs.length - 1; i >= 0; i-- )\r\n        result = result * x + this.coefs[i];\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  add\r\n */\r\nPolynomial.prototype.add = function(that) {\r\n    var result = new Polynomial();\r\n    var d1 = this.getDegree();\r\n    var d2 = that.getDegree();\r\n    var dmax = Math.max(d1,d2);\r\n\r\n    for ( var i = 0; i <= dmax; i++ ) {\r\n        var v1 = (i <= d1) ? this.coefs[i] : 0;\r\n        var v2 = (i <= d2) ? that.coefs[i] : 0;\r\n\r\n        result.coefs[i] = v1 + v2;\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  multiply\r\n */\r\nPolynomial.prototype.multiply = function(that) {\r\n    var result = new Polynomial();\r\n\r\n    for ( var i = 0; i <= this.getDegree() + that.getDegree(); i++ )\r\n        result.coefs.push(0);\r\n\r\n    for ( var i = 0; i <= this.getDegree(); i++ )\r\n        for ( var j = 0; j <= that.getDegree(); j++ )\r\n            result.coefs[i+j] += this.coefs[i] * that.coefs[j];\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  divide_scalar\r\n */\r\nPolynomial.prototype.divide_scalar = function(scalar) {\r\n    for ( var i = 0; i < this.coefs.length; i++ )\r\n        this.coefs[i] /= scalar;\r\n};\r\n\r\n\r\n/**\r\n *  simplify\r\n */\r\nPolynomial.prototype.simplify = function() {\r\n    var TOLERANCE = 1e-15;\r\n    for ( var i = this.getDegree(); i >= 0; i-- ) {\r\n        if ( Math.abs( this.coefs[i] ) <= TOLERANCE )\r\n            this.coefs.pop();\r\n        else\r\n            break;\r\n    }\r\n};\r\n\r\n\r\n/**\r\n *  bisection\r\n */\r\nPolynomial.prototype.bisection = function(min, max) {\r\n    var minValue = this.eval(min);\r\n    var maxValue = this.eval(max);\r\n    var result;\r\n\r\n    if ( Math.abs(minValue) <= Polynomial.TOLERANCE )\r\n        result = min;\r\n    else if ( Math.abs(maxValue) <= Polynomial.TOLERANCE )\r\n        result = max;\r\n    else if ( minValue * maxValue <= 0 ) {\r\n        var tmp1  = Math.log(max - min);\r\n        var tmp2  = Math.LN10 * Polynomial.ACCURACY;\r\n        var iters = Math.ceil( (tmp1+tmp2) / Math.LN2 );\r\n\r\n        for ( var i = 0; i < iters; i++ ) {\r\n            result = 0.5 * (min + max);\r\n            var value = this.eval(result);\r\n\r\n            if ( Math.abs(value) <= Polynomial.TOLERANCE ) {\r\n                break;\r\n            }\r\n\r\n            if ( value * minValue < 0 ) {\r\n                max = result;\r\n                maxValue = value;\r\n            } else {\r\n                min = result;\r\n                minValue = value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  toString\r\n */\r\nPolynomial.prototype.toString = function() {\r\n    var coefs = new Array();\r\n    var signs = new Array();\r\n\r\n    for ( var i = this.coefs.length - 1; i >= 0; i-- ) {\r\n        var value = Math.round(this.coefs[i]*1000)/1000;\r\n        //var value = this.coefs[i];\r\n\r\n        if ( value != 0 ) {\r\n            var sign = ( value < 0 ) ? \" - \" : \" + \";\r\n\r\n            value = Math.abs(value);\r\n            if ( i > 0 )\r\n                if ( value == 1 )\r\n                    value = this._variable;\r\n                else\r\n                    value += this._variable;\r\n            if ( i > 1 ) value += \"^\" + i;\r\n\r\n            signs.push( sign );\r\n            coefs.push( value );\r\n        }\r\n    }\r\n\r\n    signs[0] = ( signs[0] == \" + \" ) ? \"\" : \"-\";\r\n\r\n    var result = \"\";\r\n    for ( var i = 0; i < coefs.length; i++ )\r\n        result += signs[i] + coefs[i];\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  trapezoid\r\n *  Based on trapzd in \"Numerical Recipes in C\", page 137\r\n */\r\nPolynomial.prototype.trapezoid = function(min, max, n) {\r\n    if ( isNaN(min) || isNaN(max) || isNaN(n) )\r\n        throw new Error(\"Polynomial.trapezoid: parameters must be numbers\");\r\n\r\n    var range = max - min;\r\n    var TOLERANCE = 1e-7;\r\n\r\n    if ( n == 1 ) {\r\n        var minValue = this.eval(min);\r\n        var maxValue = this.eval(max);\r\n        this._s = 0.5*range*( minValue + maxValue );\r\n    } else {\r\n        var it = 1 << (n-2);\r\n        var delta = range / it;\r\n        var x = min + 0.5*delta;\r\n        var sum = 0;\r\n\r\n        for ( var i = 0; i < it; i++ ) {\r\n            sum += this.eval(x);\r\n            x += delta;\r\n        }\r\n        this._s = 0.5*(this._s + range*sum/it);\r\n    }\r\n\r\n    if ( isNaN(this._s) )\r\n        throw new Error(\"Polynomial.trapezoid: this._s is NaN\");\r\n\r\n    return this._s;\r\n};\r\n\r\n\r\n/**\r\n *  simpson\r\n *  Based on trapzd in \"Numerical Recipes in C\", page 139\r\n */\r\nPolynomial.prototype.simpson = function(min, max) {\r\n    if ( isNaN(min) || isNaN(max) )\r\n        throw new Error(\"Polynomial.simpson: parameters must be numbers\");\r\n\r\n    var range = max - min;\r\n    var st = 0.5 * range * ( this.eval(min) + this.eval(max) );\r\n    var t = st;\r\n    var s = 4.0*st/3.0;\r\n    var os = s;\r\n    var ost = st;\r\n    var TOLERANCE = 1e-7;\r\n\r\n    var it = 1;\r\n    for ( var n = 2; n <= 20; n++ ) {\r\n        var delta = range / it;\r\n        var x     = min + 0.5*delta;\r\n        var sum   = 0;\r\n\r\n        for ( var i = 1; i <= it; i++ ) {\r\n            sum += this.eval(x);\r\n            x += delta;\r\n        }\r\n\r\n        t = 0.5 * (t + range * sum / it);\r\n        st = t;\r\n        s = (4.0*st - ost)/3.0;\r\n\r\n        if ( Math.abs(s-os) < TOLERANCE*Math.abs(os) )\r\n            break;\r\n\r\n        os = s;\r\n        ost = st;\r\n        it <<= 1;\r\n    }\r\n\r\n    return s;\r\n};\r\n\r\n\r\n/**\r\n *  romberg\r\n */\r\nPolynomial.prototype.romberg = function(min, max) {\r\n    if ( isNaN(min) || isNaN(max) )\r\n        throw new Error(\"Polynomial.romberg: parameters must be numbers\");\r\n\r\n    var MAX = 20;\r\n    var K = 3;\r\n    var TOLERANCE = 1e-6;\r\n    var s = new Array(MAX+1);\r\n    var h = new Array(MAX+1);\r\n    var result = { y: 0, dy: 0 };\r\n\r\n    h[0] = 1.0;\r\n    for ( var j = 1; j <= MAX; j++ ) {\r\n        s[j-1] = this.trapezoid(min, max, j);\r\n        if ( j >= K ) {\r\n            result = Polynomial.interpolate(h, s, K, j-K, 0.0);\r\n            if ( Math.abs(result.dy) <= TOLERANCE*result.y) break;\r\n        }\r\n        s[j] = s[j-1];\r\n        h[j] = 0.25 * h[j-1];\r\n    }\r\n\r\n    return result.y;\r\n};\r\n\r\n// getters and setters\r\n\r\n/**\r\n *  get degree\r\n */\r\nPolynomial.prototype.getDegree = function() {\r\n    return this.coefs.length - 1;\r\n};\r\n\r\n\r\n/**\r\n *  getDerivative\r\n */\r\nPolynomial.prototype.getDerivative = function() {\r\n    var derivative = new Polynomial();\r\n\r\n    for ( var i = 1; i < this.coefs.length; i++ ) {\r\n        derivative.coefs.push(i*this.coefs[i]);\r\n    }\r\n\r\n    return derivative;\r\n};\r\n\r\n\r\n/**\r\n *  getRoots\r\n */\r\nPolynomial.prototype.getRoots = function() {\r\n    var result;\r\n\r\n    this.simplify();\r\n    switch ( this.getDegree() ) {\r\n        case 0: result = new Array();              break;\r\n        case 1: result = this.getLinearRoot();     break;\r\n        case 2: result = this.getQuadraticRoots(); break;\r\n        case 3: result = this.getCubicRoots();     break;\r\n        case 4: result = this.getQuarticRoots();   break;\r\n        default:\r\n            result = new Array();\r\n            // should try Newton's method and/or bisection\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  getRootsInInterval\r\n */\r\nPolynomial.prototype.getRootsInInterval = function(min, max) {\r\n    var roots = new Array();\r\n    var root;\r\n\r\n    if ( this.getDegree() == 1 ) {\r\n        root = this.bisection(min, max);\r\n        if ( root != null ) roots.push(root);\r\n    } else {\r\n        // get roots of derivative\r\n        var deriv  = this.getDerivative();\r\n        var droots = deriv.getRootsInInterval(min, max);\r\n\r\n        if ( droots.length > 0 ) {\r\n            // find root on [min, droots[0]]\r\n            root = this.bisection(min, droots[0]);\r\n            if ( root != null ) roots.push(root);\r\n\r\n            // find root on [droots[i],droots[i+1]] for 0 <= i <= count-2\r\n            for (var i = 0; i <= droots.length-2; i++ ) {\r\n                root = this.bisection(droots[i], droots[i+1]);\r\n                if ( root != null ) roots.push(root);\r\n            }\r\n\r\n            // find root on [droots[count-1],xmax]\r\n            root = this.bisection(droots[droots.length-1], max);\r\n            if ( root != null ) roots.push(root);\r\n        } else {\r\n            // polynomial is monotone on [min,max], has at most one root\r\n            root = this.bisection(min, max);\r\n            if ( root != null ) roots.push(root);\r\n        }\r\n    }\r\n\r\n    return roots;\r\n};\r\n\r\n\r\n/**\r\n *  getLinearRoot\r\n */\r\nPolynomial.prototype.getLinearRoot = function() {\r\n    var result = new Array();\r\n    var a = this.coefs[1];\r\n\r\n    if ( a != 0 )\r\n        result.push( -this.coefs[0] / a );\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  getQuadraticRoots\r\n */\r\nPolynomial.prototype.getQuadraticRoots = function() {\r\n    var results = new Array();\r\n\r\n    if ( this.getDegree() == 2 ) {\r\n        var a = this.coefs[2];\r\n        var b = this.coefs[1] / a;\r\n        var c = this.coefs[0] / a;\r\n        var d = b*b - 4*c;\r\n\r\n        if ( d > 0 ) {\r\n            var e = Math.sqrt(d);\r\n\r\n            results.push( 0.5 * (-b + e) );\r\n            results.push( 0.5 * (-b - e) );\r\n        } else if ( d == 0 ) {\r\n            // really two roots with same value, but we only return one\r\n            results.push( 0.5 * -b );\r\n        }\r\n    }\r\n\r\n    return results;\r\n};\r\n\r\n\r\n/**\r\n *  getCubicRoots\r\n *\r\n *  This code is based on MgcPolynomial.cpp written by David Eberly.  His\r\n *  code along with many other excellent examples are avaiable at his site:\r\n *  http://www.geometrictools.com\r\n */\r\nPolynomial.prototype.getCubicRoots = function() {\r\n    var results = new Array();\r\n\r\n    if ( this.getDegree() == 3 ) {\r\n        var c3 = this.coefs[3];\r\n        var c2 = this.coefs[2] / c3;\r\n        var c1 = this.coefs[1] / c3;\r\n        var c0 = this.coefs[0] / c3;\r\n\r\n        var a       = (3*c1 - c2*c2) / 3;\r\n        var b       = (2*c2*c2*c2 - 9*c1*c2 + 27*c0) / 27;\r\n        var offset  = c2 / 3;\r\n        var discrim = b*b/4 + a*a*a/27;\r\n        var halfB   = b / 2;\r\n\r\n        var ZEROepsilon = this.zeroErrorEstimate();\r\n        if (Math.abs(discrim) <= ZEROepsilon) discrim = 0;\r\n\r\n        if ( discrim > 0 ) {\r\n            var e = Math.sqrt(discrim);\r\n            var tmp;\r\n            var root;\r\n\r\n            tmp = -halfB + e;\r\n            if ( tmp >= 0 )\r\n                root = Math.pow(tmp, 1/3);\r\n            else\r\n                root = -Math.pow(-tmp, 1/3);\r\n\r\n            tmp = -halfB - e;\r\n            if ( tmp >= 0 )\r\n                root += Math.pow(tmp, 1/3);\r\n            else\r\n                root -= Math.pow(-tmp, 1/3);\r\n\r\n            results.push( root - offset );\r\n        } else if ( discrim < 0 ) {\r\n            var distance = Math.sqrt(-a/3);\r\n            var angle    = Math.atan2( Math.sqrt(-discrim), -halfB) / 3;\r\n            var cos      = Math.cos(angle);\r\n            var sin      = Math.sin(angle);\r\n            var sqrt3    = Math.sqrt(3);\r\n\r\n            results.push( 2*distance*cos - offset );\r\n            results.push( -distance * (cos + sqrt3 * sin) - offset);\r\n            results.push( -distance * (cos - sqrt3 * sin) - offset);\r\n        } else {\r\n            var tmp;\r\n\r\n            if ( halfB >= 0 )\r\n                tmp = -Math.pow(halfB, 1/3);\r\n            else\r\n                tmp = Math.pow(-halfB, 1/3);\r\n\r\n            results.push( 2*tmp - offset );\r\n            // really should return next root twice, but we return only one\r\n            results.push( -tmp - offset );\r\n        }\r\n    }\r\n\r\n    return results;\r\n};\r\n\r\n/**\r\n    Sign of a number (+1, -1, +0, -0).\r\n */\r\nvar sign = function (x) {\r\n    return typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? x : NaN : NaN;\r\n};\r\n\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Calculates roots of quartic polynomial. <br/>\r\n    First, derivative roots are found, then used to split quartic polynomial \r\n    into segments, each containing one root of quartic polynomial.\r\n    Segments are then passed to newton's method to find roots.\r\n\r\n    @returns {Array<Number>} roots\r\n*/\r\nPolynomial.prototype.getQuarticRoots = function () {\r\n    var results = [];\r\n\r\n    var n = this.getDegree();\r\n    if (n == 4) {\r\n\r\n        var poly = new Polynomial();\r\n        poly.coefs = this.coefs.slice();\r\n        poly.divide_scalar(poly.coefs[n]);\r\n        var ERRF = 1e-15;\r\n        if (Math.abs(poly.coefs[0]) < 10 * ERRF * Math.abs(poly.coefs[3]))\r\n            poly.coefs[0] = 0;\r\n        var poly_d = poly.getDerivative();\r\n        var derrt = poly_d.getRoots().sort(function (a, b) { return a - b; });\r\n        var dery = [];\r\n        var nr = derrt.length - 1;\r\n        var i;\r\n        var rb = this.bounds();\r\n        maxabsX = Math.max(Math.abs(rb.minX), Math.abs(rb.maxX));\r\n        var ZEROepsilon = this.zeroErrorEstimate(maxabsX);\r\n        \r\n        for (i = 0; i <= nr; i++) {\r\n            dery.push(poly.eval(derrt[i]));\r\n        }\r\n\r\n        for (i = 0; i <= nr; i++) {\r\n            if (Math.abs(dery[i]) < ZEROepsilon)\r\n                dery[i] = 0;\r\n        }\r\n\r\n        i = 0;\r\n        var dx = Math.max(0.1 * (rb.maxX - rb.minX) / n, ERRF);\r\n        var guesses = [];\r\n        var minmax = [];\r\n        if (nr > -1) {\r\n            if (dery[0] != 0) {\r\n                if (sign(dery[0]) != sign(poly.eval(derrt[0] - dx) - dery[0])) {\r\n                    guesses.push(derrt[0] - dx);\r\n                    minmax.push([rb.minX, derrt[0]]);\r\n                }\r\n            }\r\n            else {\r\n                results.push(derrt[0], derrt[0]);\r\n                i++;\r\n            }\r\n\r\n            for (; i < nr; i++) {\r\n                if (dery[i + 1] == 0) {\r\n                    results.push(derrt[i + 1], derrt[i + 1]);\r\n                    i++;\r\n                }\r\n                else if (sign(dery[i]) != sign(dery[i + 1])) {\r\n                    guesses.push((derrt[i] + derrt[i + 1]) / 2);\r\n                    minmax.push([derrt[i], derrt[i + 1]]);\r\n                }\r\n            }\r\n            if (dery[nr] != 0 && sign(dery[nr]) != sign(poly.eval(derrt[nr] + dx) - dery[nr])) {\r\n                guesses.push(derrt[nr] + dx);\r\n                minmax.push([derrt[nr], rb.maxX]);\r\n            }\r\n        }\r\n\r\n        var f = function (x) { return poly.eval(x); };\r\n        var df = function (x) { return poly_d.eval(x); };\r\n        if (guesses.length > 0) {\r\n            for (i = 0; i < guesses.length; i++) {\r\n                guesses[i] = Polynomial.newton_secant_bisection(guesses[i], f, df, 32, minmax[i][0], minmax[i][1]);\r\n            }\r\n        }\r\n\r\n        results = results.concat(guesses);\r\n    }\r\n    return results;\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Estimate what is the maximum polynomial evaluation error value under which polynomial evaluation could be in fact 0.\r\n    \r\n    @returns {Number} \r\n*/\r\nPolynomial.prototype.zeroErrorEstimate = function (maxabsX) {\r\n    var poly = this;\r\n    var ERRF = 1e-15;\r\n    if (typeof maxabsX === 'undefined') {\r\n        var rb = poly.bounds();\r\n        maxabsX = Math.max(Math.abs(rb.minX), Math.abs(rb.maxX));\r\n    }\r\n    if (maxabsX < 0.001) {\r\n        return 2*Math.abs(poly.eval(ERRF));\r\n    }\r\n    var n = poly.coefs.length - 1;\r\n    var an = poly.coefs[n];\r\n    return 10 * ERRF * poly.coefs.reduce(function (m, v, i) {\r\n        var nm = v / an * Math.pow(maxabsX, i);\r\n        return nm > m ? nm : m;\r\n    }, 0);\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Calculates upper Real roots bounds. <br/>\r\n    Real roots are in interval [negX, posX]. Determined by Fujiwara method.\r\n    @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\r\n\r\n    @returns {{ negX: Number, posX: Number }}\r\n*/\r\nPolynomial.prototype.bounds_UpperReal_Fujiwara = function () {\r\n    var a = this.coefs;\r\n    var n = a.length - 1;\r\n    var an = a[n];\r\n    if (an != 1) {\r\n        a = this.coefs.map(function (v) { return v / an; });\r\n    }\r\n    var b = a.map(function (v, i) { return (i < n) ? Math.pow(Math.abs((i == 0) ? v / 2 : v), 1 / (n - i)) : v; });\r\n\r\n    var coefSelectionFunc;\r\n    var find2Max = function (acc, bi, i) {\r\n        if (coefSelectionFunc(i)) {\r\n            if (acc.max < bi) {\r\n                acc.nearmax = acc.max;\r\n                acc.max = bi;\r\n            }\r\n            else if (acc.nearmax < bi) {\r\n                acc.nearmax = bi;\r\n            }\r\n        }\r\n        return acc;\r\n    };\r\n\r\n    coefSelectionFunc = function (i) { return i < n && a[i] < 0; };\r\n    var max_nearmax_pos = b.reduce(find2Max, { max: 0, nearmax: 0 });\r\n\r\n    coefSelectionFunc = function (i) { return i < n && ((n % 2 == i % 2) ? a[i] < 0 : a[i] > 0); };\r\n    var max_nearmax_neg = b.reduce(find2Max, { max: 0, nearmax: 0 });\r\n\r\n    return {\r\n        negX: -2 * max_nearmax_neg.max,\r\n        posX: 2 * max_nearmax_pos.max\r\n    };\r\n};\r\n\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/** \r\n    Calculates lower Real roots bounds. <br/>\r\n    There are no Real roots in interval <negX, posX>. Determined by Fujiwara method.\r\n    @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\r\n\r\n    @returns {{ negX: Number, posX: Number }}\r\n*/\r\nPolynomial.prototype.bounds_LowerReal_Fujiwara = function () {\r\n    var poly = new Polynomial();\r\n    poly.coefs = this.coefs.slice().reverse();\r\n    var res = poly.bounds_UpperReal_Fujiwara();\r\n    res.negX = 1 / res.negX;\r\n    res.posX = 1 / res.posX;\r\n    return res;\r\n};\r\n\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/** \r\n    Calculates left and right Real roots bounds. <br/>\r\n    Real roots are in interval [minX, maxX]. Combines Fujiwara lower and upper bounds to get minimal interval.\r\n    @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\r\n\r\n    @returns {{ minX: Number, maxX: Number }}\r\n*/\r\nPolynomial.prototype.bounds = function () {\r\n    var urb = this.bounds_UpperReal_Fujiwara();\r\n    var rb = { minX: urb.negX, maxX: urb.posX };\r\n    if (urb.negX === 0 && urb.posX === 0)\r\n        return rb;\r\n    if (urb.negX === 0) {\r\n        rb.minX = this.bounds_LowerReal_Fujiwara().posX;\r\n    }\r\n    else if (urb.posX === 0) {\r\n        rb.maxX = this.bounds_LowerReal_Fujiwara().negX;\r\n    }\r\n    if (rb.minX > rb.maxX) {\r\n        //console.log('Polynomial.prototype.bounds: poly has no real roots? or floating point error?');\r\n        rb.minX = rb.maxX = 0;\r\n    }\r\n    return rb;\r\n    // TODO: if sure that there are no complex roots \r\n    // (maybe by using Sturm's theorem) use:\r\n    //return this.bounds_Real_Laguerre();\r\n};\r\n\r\n\r\n/////////////////////////////////////////////////////////////////// \r\n/**\r\n    Newton's (Newton-Raphson) method for finding Real roots on univariate function. <br/>\r\n    When using bounds, algorithm falls back to secant if newton goes out of range.\r\n    Bisection is fallback for secant when determined secant is not efficient enough.\r\n    @see {@link http://en.wikipedia.org/wiki/Newton%27s_method}\r\n    @see {@link http://en.wikipedia.org/wiki/Secant_method}\r\n    @see {@link http://en.wikipedia.org/wiki/Bisection_method}\r\n\r\n    @param {Number} x0 - Inital root guess\r\n    @param {function(x)} f - Function which root we are trying to find\r\n    @param {function(x)} df - Derivative of function f\r\n    @param {Number} max_iterations - Maximum number of algorithm iterations\r\n    @param {Number} [min_x] - Left bound value\r\n    @param {Number} [max_x] - Right bound value\r\n    @returns {Number} - root\r\n*/\r\nPolynomial.newton_secant_bisection = function (x0, f, df, max_iterations, min, max) {\r\n    var x, prev_dfx = 0, dfx, prev_x_ef_correction = 0, x_correction, x_new;\r\n    var v, y_atmin, y_atmax;\r\n    x = x0;\r\n    var ACCURACY = 14;\r\n    var min_correction_factor = Math.pow(10, -ACCURACY);\r\n    var isBounded = (typeof min === 'number' && typeof max === 'number');\r\n    if (isBounded) {\r\n        if (min > max)\r\n            throw new Error(\"newton root finding: min must be greater than max\");\r\n        y_atmin = f(min);\r\n        y_atmax = f(max);\r\n        if (sign(y_atmin) ==  sign(y_atmax))\r\n            throw new Error(\"newton root finding: y values of bounds must be of opposite sign\");\r\n    }\r\n\r\n    var isEnoughCorrection = function () {\r\n        // stop if correction is too small\r\n        // or if correction is in simple loop\r\n        return (Math.abs(x_correction) <= min_correction_factor * Math.abs(x))\r\n            || (prev_x_ef_correction == (x - x_correction) - x);\r\n    };\r\n\r\n    var i;\r\n    //var stepMethod;\r\n    //var details = [];\r\n    for (i = 0; i < max_iterations; i++) {\r\n        dfx = df(x);\r\n        if (dfx == 0) {\r\n            if (prev_dfx == 0) {\r\n                // error\r\n                throw new Error(\"newton root finding: df(x) is zero\");\r\n                //return null;\r\n            }\r\n            else {\r\n                // use previous derivation value\r\n                dfx = prev_dfx;\r\n            }\r\n            // or move x a little?\r\n            //dfx = df(x != 0 ? x + x * 1e-15 : 1e-15);\r\n        }\r\n        //stepMethod = 'newton';\r\n        prev_dfx = dfx;\r\n        y = f(x);\r\n        x_correction = y / dfx;\r\n        x_new = x - x_correction;\r\n        if (isEnoughCorrection()) {\r\n            break;\r\n        }\r\n\r\n        if (isBounded) {\r\n            if (sign(y) == sign(y_atmax)) {\r\n                max = x;\r\n                y_atmax = y;\r\n            }\r\n            else if (sign(y) == sign(y_atmin)) {\r\n                min = x;\r\n                y_atmin = y;\r\n            }\r\n            else {\r\n                x = x_new;\r\n                //console.log(\"newton root finding: sign(y) not matched.\");\r\n                break;\r\n            }\r\n\r\n            if ((x_new < min) || (x_new > max)) {\r\n                if (sign(y_atmin) == sign(y_atmax)) {\r\n                    break;\r\n                }\r\n\r\n                var RATIO_LIMIT = 50;\r\n                var AIMED_BISECT_OFFSET = 0.25; // [0, 0.5)\r\n                var dy = y_atmax - y_atmin;\r\n                var dx = max - min;\r\n\r\n                if (dy == 0) {\r\n                    //stepMethod = 'bisect';\r\n                    x_correction = x - (min + dx * 0.5);\r\n                }\r\n                else if (Math.abs(dy / Math.min(y_atmin, y_atmax)) > RATIO_LIMIT) {\r\n                    //stepMethod = 'aimed bisect';\r\n                    x_correction = x - (min + dx * (0.5 + (Math.abs(y_atmin) < Math.abs(y_atmax) ? -AIMED_BISECT_OFFSET : AIMED_BISECT_OFFSET)));\r\n                }\r\n                else {\r\n                    //stepMethod = 'secant'; \r\n                    x_correction = x - (min - y_atmin / dy * dx);\r\n                }\r\n                x_new = x - x_correction;\r\n\r\n                if (isEnoughCorrection()) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        //details.push([stepMethod, i, x, x_new, x_correction, min, max, y]);\r\n        prev_x_ef_correction = x - x_new;\r\n        x = x_new;\r\n    }\r\n    //details.push([stepMethod, i, x, x_new, x_correction, min, max, y]);\r\n    //console.log(details.join('\\r\\n'));\r\n    //if (i == max_iterations)\r\n    //    console.log('newt: steps=' + ((i==max_iterations)? i:(i + 1)));\r\n    return x;\r\n};\r\n\r\nif (typeof module !== \"undefined\") {\r\n    module.exports = Polynomial;\r\n}\r\n\r\n},{}],7:[function(require,module,exports){\r\n/**\r\n *\r\n *   SqrtPolynomial.js\r\n *\r\n *   copyright 2003, 2013 Kevin Lindsey\r\n *\r\n */\r\n\r\nif (typeof module !== \"undefined\") {\r\n    var Polynomial = require(\"./Polynomial\");\r\n}\r\n\r\n/**\r\n *   class variables\r\n */\r\nSqrtPolynomial.VERSION = 1.0;\r\n\r\n// setup inheritance\r\nSqrtPolynomial.prototype             = new Polynomial();\r\nSqrtPolynomial.prototype.constructor = SqrtPolynomial;\r\nSqrtPolynomial.superclass            = Polynomial.prototype;\r\n\r\n\r\n/**\r\n *  SqrtPolynomial\r\n */\r\nfunction SqrtPolynomial() {\r\n    this.init( arguments );\r\n}\r\n\r\n\r\n/**\r\n *  eval\r\n *\r\n *  @param {Number} x\r\n *  @returns {Number}\r\n */\r\nSqrtPolynomial.prototype.eval = function(x) {\r\n    var TOLERANCE = 1e-7;\r\n    var result = SqrtPolynomial.superclass.eval.call(this, x);\r\n\r\n    // NOTE: May need to change the following.  I added these to capture\r\n    // some really small negative values that were being generated by one\r\n    // of my Bezier arcLength functions\r\n    if ( Math.abs(result) < TOLERANCE ) result = 0;\r\n    if ( result < 0 )\r\n        throw new Error(\"SqrtPolynomial.eval: cannot take square root of negative number\");\r\n\r\n    return Math.sqrt(result);\r\n};\r\n\r\nSqrtPolynomial.prototype.toString = function() {\r\n    var result = SqrtPolynomial.superclass.toString.call(this);\r\n\r\n    return \"sqrt(\" + result + \")\";\r\n};\r\n\r\nif (typeof module !== \"undefined\") {\r\n    module.exports = SqrtPolynomial;\r\n}\r\n\r\n},{\"./Polynomial\":6}],8:[function(require,module,exports){\r\n// expose module classes\r\n\r\nexports.intersect = require('./lib/intersect');\r\nexports.shape = require('./lib/IntersectionParams').newShape;\r\n},{\"./lib/IntersectionParams\":10,\"./lib/intersect\":12}],9:[function(require,module,exports){\r\n/**\r\n *  Intersection\r\n */\r\nfunction Intersection(status) {\r\n    this.init(status);\r\n}\r\n\r\n/**\r\n *  init\r\n *\r\n *  @param {String} status\r\n *  @returns {Intersection}\r\n */\r\nIntersection.prototype.init = function(status) {\r\n    this.status = status;\r\n    this.points = [];\r\n};\r\n\r\n/**\r\n *  appendPoint\r\n *\r\n *  @param {Point2D} point\r\n */\r\nIntersection.prototype.appendPoint = function(point) {\r\n    this.points.push(point);\r\n};\r\n\r\n/**\r\n *  appendPoints\r\n *\r\n *  @param {Array<Point2D>} points\r\n */\r\nIntersection.prototype.appendPoints = function(points) {\r\n    this.points = this.points.concat(points);\r\n};\r\n\r\nmodule.exports = Intersection;\r\n\r\n},{}],10:[function(require,module,exports){\r\nvar Point2D = require('kld-affine').Point2D;\r\n\r\n\r\n/**\r\n    getArcParameters\r\n\r\n    @param {Point2D} startPoint\r\n    @param {Point2D} endPoint\r\n    @param {Number} rx\r\n    @param {Number} ry\r\n    @param {Number} angle - in degrees\r\n    @param {Boolean} arcFlag\r\n    @param {Boolean} sweepFlag\r\n    @returns {{ center: Point2D, rx: Number, ry: Number, theta1: Number, deltaTheta: Number }}\r\n*/\r\nfunction getArcParameters(startPoint, endPoint, rx, ry, angle, arcFlag, sweepFlag) {\r\n    function radian(ux, uy, vx, vy) {\r\n        var dot = ux * vx + uy * vy;\r\n        var mod = Math.sqrt((ux * ux + uy * uy) * (vx * vx + vy * vy));\r\n        var rad = Math.acos(dot / mod);\r\n        if (ux * vy - uy * vx < 0.0) rad = -rad;\r\n        return rad;\r\n    }\r\n    angle = angle * Math.PI / 180;\r\n    var c = Math.cos(angle);\r\n    var s = Math.sin(angle);\r\n    var TOLERANCE = 1e-6;\r\n    var halfDiff = startPoint.subtract(endPoint).divide(2);\r\n    var x1p = halfDiff.x * c + halfDiff.y * s;\r\n    var y1p = halfDiff.x * -s + halfDiff.y * c;\r\n    var x1px1p = x1p * x1p;\r\n    var y1py1p = y1p * y1p;\r\n    var lambda = (x1px1p / (rx * rx)) + (y1py1p / (ry * ry));\r\n    var factor;\r\n    if (lambda > 1) {\r\n        factor = Math.sqrt(lambda);\r\n        rx *= factor;\r\n        ry *= factor;\r\n    }\r\n    var rxrx = rx * rx;\r\n    var ryry = ry * ry;\r\n    var rxy1 = rxrx * y1py1p;\r\n    var ryx1 = ryry * x1px1p;\r\n    factor = (rxrx * ryry - rxy1 - ryx1) / (rxy1 + ryx1);\r\n    if (Math.abs(factor) < TOLERANCE) factor = 0;\r\n    var sq = Math.sqrt(factor);\r\n    if (arcFlag == sweepFlag) sq = -sq;\r\n    var mid = startPoint.add(endPoint).divide(2);\r\n    var cxp = sq * rx * y1p / ry;\r\n    var cyp = sq * -ry * x1p / rx;\r\n    //return new Point2D(cxp * c - cyp * s + mid.x, cxp * s + cyp * c + mid.y);\r\n\r\n    var xcr1 = (x1p - cxp) / rx;\r\n    var xcr2 = (x1p + cxp) / rx;\r\n    var ycr1 = (y1p - cyp) / ry;\r\n    var ycr2 = (y1p + cyp) / ry;\r\n\r\n    var theta1 = radian(1.0, 0.0, xcr1, ycr1);\r\n\r\n    var deltaTheta = radian(xcr1, ycr1, -xcr2, -ycr2);\r\n    var PIx2 = Math.PI * 2.0;\r\n    while (deltaTheta > PIx2) deltaTheta -= PIx2;\r\n    while (deltaTheta < 0.0) deltaTheta += PIx2;\r\n    if (sweepFlag == false) deltaTheta -= PIx2;\r\n\r\n    return {\r\n        center: new Point2D(cxp * c - cyp * s + mid.x, cxp * s + cyp * c + mid.y),\r\n        rx: rx,\r\n        ry: ry,\r\n        theta1: theta1,\r\n        deltaTheta: deltaTheta\r\n    };\r\n}\r\n\r\n\r\n/**\r\n *  IntersectionParams\r\n *\r\n *  @param {String} name\r\n *  @param {Array<Point2D} params\r\n *  @returns {IntersectionParams}\r\n */\r\nfunction IntersectionParams(name, params) {\r\n    this.init(name, params);\r\n}\r\n\r\n/**\r\n *  init\r\n *\r\n *  @param {String} type\r\n *  @param {Array<Point2D>} params\r\n */\r\nIntersectionParams.prototype.init = function (type, params) {\r\n    this.type = type;\r\n    this.params = params;\r\n    this.meta = {};\r\n};\r\n\r\nIntersectionParams.TYPE = {};\r\nvar IPTYPE = IntersectionParams.TYPE;\r\nIPTYPE.LINE = 'Line';\r\nIPTYPE.RECT = 'Rectangle';\r\nIPTYPE.ROUNDRECT = 'RoundRectangle';\r\nIPTYPE.CIRCLE = 'Circle';\r\nIPTYPE.ELLIPSE = 'Ellipse';\r\nIPTYPE.POLYGON = 'Polygon';\r\nIPTYPE.POLYLINE = 'Polyline';\r\nIPTYPE.PATH = 'Path';\r\nIPTYPE.ARC = 'Arc';\r\nIPTYPE.BEZIER2 = 'Bezier2';\r\nIPTYPE.BEZIER3 = 'Bezier3';\r\n\r\n\r\nfunction parsePointsString(points) {\r\n    return points.split(\" \").map(function(point) {\r\n        point = point.split(\",\");\r\n        return new Point2D(point[0], point[1]);\r\n    });\r\n}\r\n\r\nIntersectionParams.newShape = function(svgElementName, props) {\r\n    svgElementName = svgElementName.toLowerCase();\r\n\r\n    if(svgElementName === \"line\") {\r\n        return IntersectionParams.newLine(\r\n            new Point2D(props.x1, props.y1),\r\n            new Point2D(props.x2, props.y2)\r\n        );\r\n    }\r\n\r\n    if(svgElementName === \"rect\") {\r\n        if(props.rx > 0 || props.ry > 0) {\r\n            return IntersectionParams.newRoundRect(\r\n                props.x, props.y,\r\n                props.width, props.height,\r\n                props.rx, props.ry\r\n            );\r\n        } else {\r\n            return IntersectionParams.newRect(\r\n                props.x, props.y,\r\n                props.width, props.height\r\n            );\r\n        }\r\n    }\r\n\r\n    if(svgElementName === \"circle\") {\r\n        return IntersectionParams.newCircle(\r\n            new Point2D(props.cx, props.cy),\r\n            props.r\r\n        );\r\n    }\r\n\r\n    if(svgElementName === \"ellipse\") {\r\n        return IntersectionParams.newEllipse(\r\n            new Point2D(props.cx, props.cy),\r\n            props.rx, props.ry\r\n        );\r\n    }\r\n\r\n    if(svgElementName === \"polygon\") {\r\n        return IntersectionParams.newPolygon(\r\n            parsePointsString(props.points)\r\n        );\r\n    }\r\n\r\n    if(svgElementName === \"polyline\") {\r\n        return IntersectionParams.newPolyline(\r\n            parsePointsString(props.points)\r\n        );\r\n    }\r\n\r\n    if(svgElementName === \"path\") {\r\n        return IntersectionParams.newPath(\r\n            props.d\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for arc.\r\n\r\n    @param {Point2D} startPoint - arc start point\r\n    @param {Point2D} endPoint - arc end point\r\n    @param {Number} rx - arc ellipse x radius\r\n    @param {Number} ry - arc ellipse y radius\r\n    @param {Number} angle - arc ellipse rotation in degrees\r\n    @param {Boolean} largeArcFlag\r\n    @param {Boolean} sweepFlag\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newArc = function (startPoint, endPoint, rx, ry, angle, largeArcFlag, sweepFlag) {\r\n    var p = getArcParameters(startPoint, endPoint, rx, ry, angle, largeArcFlag, sweepFlag);\r\n    return new IntersectionParams(IPTYPE.ARC, [p.center, p.rx, p.ry, (angle * Math.PI / 180), p.theta1, p.deltaTheta]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for bezier2.\r\n\r\n    @param {Point2D} p1\r\n    @param {Point2D} p2\r\n    @param {Point2D} p3\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newBezier2 = function (p1, p2, p3) {\r\n    return new IntersectionParams(IPTYPE.BEZIER2, [p1, p2, p3]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for bezier3.\r\n\r\n    @param {Point2D} p1\r\n    @param {Point2D} p2\r\n    @param {Point2D} p3\r\n    @param {Point2D} p4\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newBezier3 = function (p1, p2, p3, p4) {\r\n    return new IntersectionParams(IPTYPE.BEZIER3, [p1, p2, p3, p4]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for circle.\r\n\r\n    @param {Point2D} c\r\n    @param {Number} r\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newCircle = function (c, r) {\r\n    return new IntersectionParams(IPTYPE.CIRCLE, [c, r]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for ellipse.\r\n\r\n    @param {Point2D} c\r\n    @param {Number} rx\r\n    @param {Number} ry\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newEllipse = function (c, rx, ry) {\r\n    return new IntersectionParams(IPTYPE.ELLIPSE, [c, rx, ry]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for line.\r\n\r\n    @param {Point2D} a1\r\n    @param {Point2D} a2\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newLine = function (a1, a2) {\r\n    return new IntersectionParams(IPTYPE.LINE, [a1, a2]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for polygon.\r\n\r\n    @param {Array<Point2D>} points\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newPolygon = function (points) {\r\n    return new IntersectionParams(IPTYPE.POLYGON, [points]);\r\n};\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for polyline.\r\n\r\n     @param {Array<Point2D>} points\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newPolyline = function (points) {\r\n    return new IntersectionParams(IPTYPE.POLYLINE, [points]);\r\n};\r\n\r\n\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for rectangle.\r\n\r\n    @param {Number} x\r\n    @param {Number} y\r\n    @param {Number} width\r\n    @param {Number} height\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newRect = function (x, y, width, height) {\r\n    var points = [];\r\n    points.push(new Point2D(x, y));\r\n    points.push(new Point2D(x + width, y));\r\n    points.push(new Point2D(x + width, y + height));\r\n    points.push(new Point2D(x, y + height));\r\n    return new IntersectionParams(IPTYPE.RECT, [points]);\r\n};\r\n\r\nvar degreesToRadians = function (angle) {\r\n    return angle * Math.PI / 180;\r\n};\r\n///////////////////////////////////////////////////////////////////\r\n/**\r\n    Creates IntersectionParams for round rectangle, or for rectangle if rx and ry are 0.\r\n\r\n    @param {Number} x\r\n    @param {Number} y\r\n    @param {Number} width\r\n    @param {Number} height\r\n    @param {Number} rx\r\n    @param {Number} ry\r\n    @returns {IntersectionParams}\r\n*/\r\nIntersectionParams.newRoundRect = function (x, y, width, height, rx, ry) {\r\n    if (rx === 0 && ry === 0)\r\n        return IntersectionParams.newRect(x, y, width, height);\r\n    if (rx === 0)\r\n        rx = ry;\r\n    if (ry === 0)\r\n        ry = rx;\r\n    if (rx > width / 2)\r\n        rx = width / 2;\r\n    if (ry > height / 2)\r\n        rx = height / 2;\r\n    var shape = [];\r\n    var x0 = x, x1 = x + rx, x2 = x + width - rx, x3 = x + width;\r\n    var y0 = y, y1 = y + ry, y2 = y + height - ry, y3 = y + height;\r\n    shape.push(new IntersectionParams(IPTYPE.ARC, [new Point2D(x1, y1), rx, ry, 0, degreesToRadians(180), degreesToRadians(90)]));\r\n    shape.push(new IntersectionParams(IPTYPE.LINE, [new Point2D(x1, y0), new Point2D(x2, y0)]));\r\n    shape.push(new IntersectionParams(IPTYPE.ARC, [new Point2D(x2, y1), rx, ry, 0, degreesToRadians(-90), degreesToRadians(90)]));\r\n    shape.push(new IntersectionParams(IPTYPE.LINE, [new Point2D(x3, y1), new Point2D(x3, y2)]));\r\n    shape.push(new IntersectionParams(IPTYPE.ARC, [new Point2D(x2, y2), rx, ry, 0, degreesToRadians(0), degreesToRadians(90)]));\r\n    shape.push(new IntersectionParams(IPTYPE.LINE, [new Point2D(x2, y3), new Point2D(x1, y3)]));\r\n    shape.push(new IntersectionParams(IPTYPE.ARC, [new Point2D(x1, y2), rx, ry, 0, degreesToRadians(90), degreesToRadians(90)]));\r\n    shape.push(new IntersectionParams(IPTYPE.LINE, [new Point2D(x0, y2), new Point2D(x0, y1)]));\r\n    shape[shape.length - 1].meta.closePath = true;\r\n    return new IntersectionParams(IPTYPE.ROUNDRECT, [shape]);\r\n};\r\n\r\n\r\n\r\n\r\nfunction Token(type, text) {\r\n    if (arguments.length > 0) {\r\n        this.init(type, text);\r\n    }\r\n}\r\nToken.prototype.init = function(type, text) {\r\n    this.type = type;\r\n    this.text = text;\r\n};\r\nToken.prototype.typeis = function(type) {\r\n    return this.type == type;\r\n}\r\nvar Path = {};\r\nPath.COMMAND = 0;\r\nPath.NUMBER = 1;\r\nPath.EOD = 2;\r\nPath.PARAMS = {\r\n    A: [\"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\"],\r\n    a: [\"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\"],\r\n    C: [\"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\"],\r\n    c: [\"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\"],\r\n    H: [\"x\"],\r\n    h: [\"x\"],\r\n    L: [\"x\", \"y\"],\r\n    l: [\"x\", \"y\"],\r\n    M: [\"x\", \"y\"],\r\n    m: [\"x\", \"y\"],\r\n    Q: [\"x1\", \"y1\", \"x\", \"y\"],\r\n    q: [\"x1\", \"y1\", \"x\", \"y\"],\r\n    S: [\"x2\", \"y2\", \"x\", \"y\"],\r\n    s: [\"x2\", \"y2\", \"x\", \"y\"],\r\n    T: [\"x\", \"y\"],\r\n    t: [\"x\", \"y\"],\r\n    V: [\"y\"],\r\n    v: [\"y\"],\r\n    Z: [],\r\n    z: []\r\n};\r\n\r\nfunction tokenize(d) {\r\n    var tokens = new Array();\r\n    while (d != \"\") {\r\n        if (d.match(/^([ \\t\\r\\n,]+)/)) {\r\n            d = d.substr(RegExp.$1.length);\r\n        } else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\r\n            tokens[tokens.length] = new Token(Path.COMMAND, RegExp.$1);\r\n            d = d.substr(RegExp.$1.length);\r\n        } else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\r\n            tokens[tokens.length] = new Token(Path.NUMBER, parseFloat(RegExp.$1));\r\n            d = d.substr(RegExp.$1.length);\r\n        } else {\r\n            throw new Error(\"Unrecognized segment command: \" + d);\r\n        }\r\n    }\r\n    tokens[tokens.length] = new Token(Path.EOD, null);\r\n    return tokens;\r\n}\r\n\r\nIntersectionParams.newPath = function(d) {\r\n    var tokens = tokenize(d);\r\n    var index = 0;\r\n    var token = tokens[index];\r\n    var mode = \"BOD\";\r\n    var segments = [];\r\n\r\n    while (!token.typeis(Path.EOD)) {\r\n        var param_length;\r\n        var params = new Array();\r\n        if (mode == \"BOD\") {\r\n            if (token.text == \"M\" || token.text == \"m\") {\r\n                index++;\r\n                param_length = Path.PARAMS[token.text].length;\r\n                mode = token.text;\r\n            } else {\r\n                throw new Error(\"Path data must begin with a moveto command\");\r\n            }\r\n        } else {\r\n            if (token.typeis(Path.NUMBER)) {\r\n                param_length = Path.PARAMS[mode].length;\r\n            } else {\r\n                index++;\r\n                param_length = Path.PARAMS[token.text].length;\r\n                mode = token.text;\r\n            }\r\n        }\r\n        if ((index + param_length) < tokens.length) {\r\n            for (var i = index; i < index + param_length; i++) {\r\n                var number = tokens[i];\r\n                if (number.typeis(Path.NUMBER)) params[params.length] = number.text;\r\n                else throw new Error(\"Parameter type is not a number: \" + mode + \",\" + number.text);\r\n            }\r\n            var segment;\r\n            var length = segments.length;\r\n            var previous = (length == 0) ? null : segments[length - 1];\r\n            switch (mode) {\r\n                case \"A\":\r\n                    segment = new AbsoluteArcPath(params, previous);\r\n                    break;\r\n                case \"C\":\r\n                    segment = new AbsoluteCurveto3(params, previous);\r\n                    break;\r\n                case \"c\":\r\n                    segment = new RelativeCurveto3(params, previous);\r\n                    break;\r\n                case \"H\":\r\n                    segment = new AbsoluteHLineto(params, previous);\r\n                    break;\r\n                case \"V\":\r\n                    segment = new AbsoluteVLineto(params, previous);\r\n                    break;\r\n                case \"L\":\r\n                    segment = new AbsoluteLineto(params, previous);\r\n                    break;\r\n                case \"l\":\r\n                    segment = new RelativeLineto(params, previous);\r\n                    break;\r\n                case \"M\":\r\n                    segment = new AbsoluteMoveto(params, previous);\r\n                    break;\r\n                case \"m\":\r\n                    segment = new RelativeMoveto(params, previous);\r\n                    break;\r\n                case \"Q\":\r\n                    segment = new AbsoluteCurveto2(params, previous);\r\n                    break;\r\n                case \"q\":\r\n                    segment = new RelativeCurveto2(params, previous);\r\n                    break;\r\n                case \"S\":\r\n                    segment = new AbsoluteSmoothCurveto3(params, previous);\r\n                    break;\r\n                case \"s\":\r\n                    segment = new RelativeSmoothCurveto3(params, previous);\r\n                    break;\r\n                case \"T\":\r\n                    segment = new AbsoluteSmoothCurveto2(params, previous);\r\n                    break;\r\n                case \"t\":\r\n                    segment = new RelativeSmoothCurveto2(params, previous);\r\n                    break;\r\n                case \"Z\":\r\n                    segment = new RelativeClosePath(params, previous);\r\n                    break;\r\n                case \"z\":\r\n                    segment = new RelativeClosePath(params, previous);\r\n                    break;\r\n                default:\r\n                    throw new Error(\"Unsupported segment type: \" + mode);\r\n            };\r\n            segments.push(segment);\r\n            index += param_length;\r\n            token = tokens[index];\r\n            if (mode == \"M\") mode = \"L\";\r\n            if (mode == \"m\") mode = \"l\";\r\n        } else {\r\n            throw new Error(\"Path data ended before all parameters were found\");\r\n        }\r\n    }\r\n\r\n    var segmentParams = [];\r\n    for(i=0; i<segments.length; i++) {\r\n        var ip = segments[i].getIntersectionParams();\r\n        if(ip) {\r\n            segmentParams.push(ip);\r\n        }\r\n    }\r\n\r\n    return new IntersectionParams(IPTYPE.PATH, [segmentParams]);\r\n}\r\n\r\n\r\nfunction AbsolutePathSegment(command, params, previous) {\r\n    if (arguments.length > 0) this.init(command, params, previous);\r\n};\r\nAbsolutePathSegment.prototype.init = function(command, params, previous) {\r\n    this.command = command;\r\n    this.previous = previous;\r\n    this.points = [];\r\n    var index = 0;\r\n    while (index < params.length) {\r\n        this.points.push(new Point2D(params[index], params[index + 1]));\r\n        index += 2;\r\n    }\r\n};\r\nAbsolutePathSegment.prototype.getLastPoint = function() {\r\n    return this.points[this.points.length - 1];\r\n};\r\nAbsolutePathSegment.prototype.getIntersectionParams = function() {\r\n    return null;\r\n};\r\n\r\n\r\n\r\nfunction AbsoluteArcPath(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"A\", params, previous);\r\n    }\r\n}\r\nAbsoluteArcPath.prototype = new AbsolutePathSegment();\r\nAbsoluteArcPath.prototype.constructor = AbsoluteCurveto2;\r\nAbsoluteArcPath.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteArcPath.prototype.init = function(command, params, previous) {\r\n    var point = new Array();\r\n    var y = params.pop();\r\n    var x = params.pop();\r\n    point.push(x, y);\r\n    AbsoluteArcPath.superclass.init.call(this, command, point, previous);\r\n    this.rx = parseFloat(params.shift());\r\n    this.ry = parseFloat(params.shift());\r\n    this.angle = parseFloat(params.shift());\r\n    this.arcFlag = parseFloat(params.shift());\r\n    this.sweepFlag = parseFloat(params.shift());\r\n};\r\nAbsoluteArcPath.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newArc(this.previous.getLastPoint(),\r\n                                     this.points[0],\r\n                                     this.rx,\r\n                                     this.ry,\r\n                                     this.angle,\r\n                                     this.arcFlag,\r\n                                     this.sweepFlag);\r\n};\r\n\r\n\r\nfunction AbsoluteCurveto2(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"Q\", params, previous);\r\n    }\r\n}\r\nAbsoluteCurveto2.prototype = new AbsolutePathSegment();\r\nAbsoluteCurveto2.prototype.constructor = AbsoluteCurveto2;\r\nAbsoluteCurveto2.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteCurveto2.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier2(this.previous.getLastPoint(), this.points[0], this.points[1]);\r\n};\r\n\r\n\r\n\r\nfunction AbsoluteCurveto3(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"C\", params, previous);\r\n    }\r\n}\r\nAbsoluteCurveto3.prototype = new AbsolutePathSegment();\r\nAbsoluteCurveto3.prototype.constructor = AbsoluteCurveto3;\r\nAbsoluteCurveto3.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteCurveto3.prototype.getLastControlPoint = function() {\r\n    return this.points[1];\r\n};\r\nAbsoluteCurveto3.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier3(this.previous.getLastPoint(), this.points[0], this.points[1], this.points[2]);\r\n};\r\n\r\n\r\nfunction AbsoluteHLineto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"H\", params, previous);\r\n    }\r\n}\r\nAbsoluteHLineto.prototype = new AbsolutePathSegment();\r\nAbsoluteHLineto.prototype.constructor = AbsoluteHLineto;\r\nAbsoluteHLineto.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteHLineto.prototype.init = function(command, params, previous) {\r\n    var prevPoint = previous.getLastPoint();\r\n    var point = new Array();\r\n    point.push(params.pop(), prevPoint.y);\r\n    AbsoluteHLineto.superclass.init.call(this, command, point, previous);\r\n};\r\n\r\nfunction AbsoluteVLineto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"V\", params, previous);\r\n    }\r\n}\r\nAbsoluteVLineto.prototype = new AbsolutePathSegment();\r\nAbsoluteVLineto.prototype.constructor = AbsoluteVLineto;\r\nAbsoluteVLineto.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteVLineto.prototype.init = function(command, params, previous) {\r\n    var prevPoint = previous.getLastPoint();\r\n    var point = new Array();\r\n    point.push(prevPoint.x, params.pop());\r\n    AbsoluteVLineto.superclass.init.call(this, command, point, previous);\r\n};\r\n\r\n\r\nfunction AbsoluteLineto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"L\", params, previous);\r\n    }\r\n}\r\nAbsoluteLineto.prototype = new AbsolutePathSegment();\r\nAbsoluteLineto.prototype.constructor = AbsoluteLineto;\r\nAbsoluteLineto.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteLineto.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newLine(this.previous.getLastPoint(), this.points[0]);\r\n};\r\n\r\n\r\n\r\nfunction AbsoluteMoveto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"M\", params, previous);\r\n    }\r\n}\r\nAbsoluteMoveto.prototype = new AbsolutePathSegment();\r\nAbsoluteMoveto.prototype.constructor = AbsoluteMoveto;\r\nAbsoluteMoveto.superclass = AbsolutePathSegment.prototype;\r\n\r\n\r\nfunction AbsoluteSmoothCurveto2(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"T\", params, previous);\r\n    }\r\n}\r\nAbsoluteSmoothCurveto2.prototype = new AbsolutePathSegment();\r\nAbsoluteSmoothCurveto2.prototype.constructor = AbsoluteSmoothCurveto2;\r\nAbsoluteSmoothCurveto2.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteSmoothCurveto2.prototype.getControlPoint = function() {\r\n    var lastPoint = this.previous.getLastPoint();\r\n    var point;\r\n    if (this.previous.command.match(/^[QqTt]$/)) {\r\n        var ctrlPoint = this.previous.getControlPoint();\r\n        var diff = ctrlPoint.subtract(lastPoint);\r\n        point = lastPoint.subtract(diff);\r\n    } else {\r\n        point = lastPoint;\r\n    }\r\n    return point;\r\n};\r\nAbsoluteSmoothCurveto2.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier2(this.previous.getLastPoint(), this.getControlPoint(), this.points[0]);\r\n};\r\n\r\n\r\nfunction AbsoluteSmoothCurveto3(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"S\", params, previous);\r\n    }\r\n}\r\nAbsoluteSmoothCurveto3.prototype = new AbsolutePathSegment();\r\nAbsoluteSmoothCurveto3.prototype.constructor = AbsoluteSmoothCurveto3;\r\nAbsoluteSmoothCurveto3.superclass = AbsolutePathSegment.prototype;\r\n\r\nAbsoluteSmoothCurveto3.prototype.getFirstControlPoint = function() {\r\n    var lastPoint = this.previous.getLastPoint();\r\n    var point;\r\n    if (this.previous.command.match(/^[SsCc]$/)) {\r\n        var lastControl = this.previous.getLastControlPoint();\r\n        var diff = lastControl.subtract(lastPoint);\r\n        point = lastPoint.subtract(diff);\r\n    } else {\r\n        point = lastPoint;\r\n    }\r\n    return point;\r\n};\r\nAbsoluteSmoothCurveto3.prototype.getLastControlPoint = function() {\r\n    return this.points[0];\r\n};\r\nAbsoluteSmoothCurveto3.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier3(this.previous.getLastPoint(), this.getFirstControlPoint(), this.points[0], this.points[1]);\r\n};\r\n\r\n\r\nfunction RelativePathSegment(command, params, previous) {\r\n    if (arguments.length > 0) this.init(command, params, previous);\r\n}\r\nRelativePathSegment.prototype = new AbsolutePathSegment();\r\nRelativePathSegment.prototype.constructor = RelativePathSegment;\r\nRelativePathSegment.superclass = AbsolutePathSegment.prototype;\r\n\r\nRelativePathSegment.prototype.init = function(command, params, previous) {\r\n    this.command = command;\r\n    this.previous = previous;\r\n    this.points = [];\r\n    var lastPoint;\r\n    if (this.previous) lastPoint = this.previous.getLastPoint();\r\n    else lastPoint = new Point2D(0, 0);\r\n    var index = 0;\r\n    while (index < params.length) {\r\n        var point = new Point2D(lastPoint.x + params[index], lastPoint.y + params[index + 1]);\r\n        this.points.push(point);\r\n        index += 2;\r\n    }\r\n};\r\n\r\nfunction RelativeClosePath(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"z\", params, previous);\r\n    }\r\n}\r\nRelativeClosePath.prototype = new RelativePathSegment();\r\nRelativeClosePath.prototype.constructor = RelativeClosePath;\r\nRelativeClosePath.superclass = RelativePathSegment.prototype;\r\nRelativeClosePath.prototype.getLastPoint = function() {\r\n    var current = this.previous;\r\n    var point;\r\n    while (current) {\r\n        if (current.command.match(/^[mMzZ]$/)) {\r\n            point = current.getLastPoint();\r\n            break;\r\n        }\r\n        current = current.previous;\r\n    }\r\n    return point;\r\n};\r\nRelativeClosePath.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newLine(this.previous.getLastPoint(), this.getLastPoint());\r\n};\r\n\r\n\r\nfunction RelativeCurveto2(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"q\", params, previous);\r\n    }\r\n}\r\nRelativeCurveto2.prototype = new RelativePathSegment();\r\nRelativeCurveto2.prototype.constructor = RelativeCurveto2;\r\nRelativeCurveto2.superclass = RelativePathSegment.prototype;\r\n\r\nRelativeCurveto2.prototype.getControlPoint = function() {\r\n    return this.points[0];\r\n};\r\nRelativeCurveto2.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier2(this.previous.getLastPoint(), this.points[0], this.points[1]);\r\n};\r\n\r\n\r\nfunction RelativeCurveto3(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"c\", params, previous);\r\n    }\r\n}\r\nRelativeCurveto3.prototype = new RelativePathSegment();\r\nRelativeCurveto3.prototype.constructor = RelativeCurveto3;\r\nRelativeCurveto3.superclass = RelativePathSegment.prototype;\r\n\r\nRelativeCurveto3.prototype.getLastControlPoint = function() {\r\n    return this.points[1];\r\n};\r\nRelativeCurveto3.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier3(this.previous.getLastPoint(), this.points[0], this.points[1], this.points[2]);\r\n};\r\n\r\n\r\nfunction RelativeLineto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"l\", params, previous);\r\n    }\r\n}\r\nRelativeLineto.prototype = new RelativePathSegment();\r\nRelativeLineto.prototype.constructor = RelativeLineto;\r\nRelativeLineto.superclass = RelativePathSegment.prototype;\r\n\r\nRelativeLineto.prototype.toString = function() {\r\n    var points = new Array();\r\n    var command = \"\";\r\n    var lastPoint;\r\n    var point;\r\n    if (this.previous) lastPoint = this.previous.getLastPoint();\r\n    else lastPoint = new Point(0, 0);\r\n    point = this.points[0].subtract(lastPoint);\r\n    if (this.previous.constructor != this.constuctor)\r\n        if (this.previous.constructor != RelativeMoveto) cmd = this.command;\r\n    return cmd + point.toString();\r\n};\r\nRelativeLineto.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newLine(this.previous.getLastPoint(), this.points[0]);\r\n};\r\n\r\n\r\n\r\nfunction RelativeMoveto(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"m\", params, previous);\r\n    }\r\n}\r\nRelativeMoveto.prototype = new RelativePathSegment();\r\nRelativeMoveto.prototype.constructor = RelativeMoveto;\r\nRelativeMoveto.superclass = RelativePathSegment.prototype;\r\n\r\n\r\n\r\nfunction RelativeSmoothCurveto2(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"t\", params, previous);\r\n    }\r\n}\r\nRelativeSmoothCurveto2.prototype = new RelativePathSegment();\r\nRelativeSmoothCurveto2.prototype.constructor = RelativeSmoothCurveto2;\r\nRelativeSmoothCurveto2.superclass = RelativePathSegment.prototype;\r\n\r\nRelativeSmoothCurveto2.prototype.getControlPoint = function() {\r\n    var lastPoint = this.previous.getLastPoint();\r\n    var point;\r\n    if (this.previous.command.match(/^[QqTt]$/)) {\r\n        var ctrlPoint = this.previous.getControlPoint();\r\n        var diff = ctrlPoint.subtract(lastPoint);\r\n        point = lastPoint.subtract(diff);\r\n    } else {\r\n        point = lastPoint;\r\n    }\r\n    return point;\r\n};\r\nRelativeSmoothCurveto2.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier2(this.previous.getLastPoint(), this.getControlPoint(), this.points[0]);\r\n};\r\n\r\n\r\n\r\nfunction RelativeSmoothCurveto3(params, previous) {\r\n    if (arguments.length > 0) {\r\n        this.init(\"s\", params, previous);\r\n    }\r\n}\r\nRelativeSmoothCurveto3.prototype = new RelativePathSegment();\r\nRelativeSmoothCurveto3.prototype.constructor = RelativeSmoothCurveto3;\r\nRelativeSmoothCurveto3.superclass = RelativePathSegment.prototype;\r\n\r\nRelativeSmoothCurveto3.prototype.getFirstControlPoint = function() {\r\n    var lastPoint = this.previous.getLastPoint();\r\n    var point;\r\n    if (this.previous.command.match(/^[SsCc]$/)) {\r\n        var lastControl = this.previous.getLastControlPoint();\r\n        var diff = lastControl.subtract(lastPoint);\r\n        point = lastPoint.subtract(diff);\r\n    } else {\r\n        point = lastPoint;\r\n    }\r\n    return point;\r\n};\r\nRelativeSmoothCurveto3.prototype.getLastControlPoint = function() {\r\n    return this.points[0];\r\n};\r\nRelativeSmoothCurveto3.prototype.getIntersectionParams = function() {\r\n    return IntersectionParams.newBezier3(this.previous.getLastPoint(), this.getFirstControlPoint(), this.points[0], this.points[1]);\r\n};\r\n\r\n\r\nmodule.exports = IntersectionParams;\r\n\r\n},{\"kld-affine\":1}],11:[function(require,module,exports){\r\nvar Intersection = require('../Intersection');\r\n\r\nvar affine = require('kld-affine');\r\nvar Point2D = affine.Point2D;\r\nvar Vector2D = affine.Vector2D;\r\n\r\nvar Polynomial = require('kld-polynomial').Polynomial;\r\n\r\nfunction removeMultipleRootsIn01(roots) {\r\n    var ZEROepsilon = 1e-15;\r\n    roots.sort(function (a, b) { return a - b; });\r\n    for (var i = 1; i < roots.length;) {\r\n        if (Math.abs(roots[i] - roots[i - 1]) < ZEROepsilon) {\r\n            roots.splice(i, 1);\r\n        }\r\n        else {\r\n            i++;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = {};\r\n\r\n/**\r\n *  intersectBezier2Bezier2\r\n *\r\n *  @param {Point2D} a1\r\n *  @param {Point2D} a2\r\n *  @param {Point2D} a3\r\n *  @param {Point2D} b1\r\n *  @param {Point2D} b2\r\n *  @param {Point2D} b3\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier2Bezier2 = function(a1, a2, a3, b1, b2, b3) {\r\n    var a, b;\r\n    var c12, c11, c10;\r\n    var c22, c21, c20;\r\n    var result = new Intersection();\r\n    var poly;\r\n\r\n    a = a2.multiply(-2);\r\n    c12 = a1.add(a.add(a3));\r\n\r\n    a = a1.multiply(-2);\r\n    b = a2.multiply(2);\r\n    c11 = a.add(b);\r\n\r\n    c10 = new Point2D(a1.x, a1.y);\r\n\r\n    a = b2.multiply(-2);\r\n    c22 = b1.add(a.add(b3));\r\n\r\n    a = b1.multiply(-2);\r\n    b = b2.multiply(2);\r\n    c21 = a.add(b);\r\n\r\n    c20 = new Point2D(b1.x, b1.y);\r\n\r\n    var v0, v1, v2, v3, v4, v5, v6;\r\n    if ( c12.y === 0 ) {\r\n        v0 = c12.x*(c10.y - c20.y);\r\n        v1 = v0 - c11.x*c11.y;\r\n        v2 = v0 + v1;\r\n        v3 = c11.y*c11.y;\r\n\r\n        poly = new Polynomial(\r\n            c12.x*c22.y*c22.y,\r\n            2*c12.x*c21.y*c22.y,\r\n            c12.x*c21.y*c21.y - c22.x*v3 - c22.y*v0 - c22.y*v1,\r\n            -c21.x*v3 - c21.y*v0 - c21.y*v1,\r\n            (c10.x - c20.x)*v3 + (c10.y - c20.y)*v1\r\n        );\r\n    } else {\r\n        v0 = c12.x*c22.y - c12.y*c22.x;\r\n        v1 = c12.x*c21.y - c21.x*c12.y;\r\n        v2 = c11.x*c12.y - c11.y*c12.x;\r\n        v3 = c10.y - c20.y;\r\n        v4 = c12.y*(c10.x - c20.x) - c12.x*v3;\r\n        v5 = -c11.y*v2 + c12.y*v4;\r\n        v6 = v2*v2;\r\n\r\n        poly = new Polynomial(\r\n            v0*v0,\r\n            2*v0*v1,\r\n            (-c22.y*v6 + c12.y*v1*v1 + c12.y*v0*v4 + v0*v5) / c12.y,\r\n            (-c21.y*v6 + c12.y*v1*v4 + v1*v5) / c12.y,\r\n            (v3*v6 + v4*v5) / c12.y\r\n        );\r\n    }\r\n\r\n    var roots = poly.getRoots();\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var s = roots[i];\r\n\r\n        if ( 0 <= s && s <= 1 ) {\r\n            var xRoots = new Polynomial(\r\n                c12.x,\r\n                c11.x,\r\n                c10.x - c20.x - s*c21.x - s*s*c22.x\r\n            ).getRoots();\r\n            var yRoots = new Polynomial(\r\n                c12.y,\r\n                c11.y,\r\n                c10.y - c20.y - s*c21.y - s*s*c22.y\r\n            ).getRoots();\r\n\r\n            if ( xRoots.length > 0 && yRoots.length > 0 ) {\r\n                var TOLERANCE = 1e-4;\r\n\r\n                checkRoots:\r\n                    for ( var j = 0; j < xRoots.length; j++ ) {\r\n                        var xRoot = xRoots[j];\r\n\r\n                        if ( 0 <= xRoot && xRoot <= 1 ) {\r\n                            for ( var k = 0; k < yRoots.length; k++ ) {\r\n                                if ( Math.abs( xRoot - yRoots[k] ) < TOLERANCE ) {\r\n                                    result.points.push( c22.multiply(s*s).add(c21.multiply(s).add(c20)) );\r\n                                    break checkRoots;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  intersectBezier2Bezier3\r\n *\r\n *  @param {Point2D} a1\r\n *  @param {Point2D} a2\r\n *  @param {Point2D} a3\r\n *  @param {Point2D} b1\r\n *  @param {Point2D} b2\r\n *  @param {Point2D} b3\r\n *  @param {Point2D} b4\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier2Bezier3 = function(a1, a2, a3, b1, b2, b3, b4) {\r\n    var a, b,c, d;\r\n    var c12, c11, c10;\r\n    var c23, c22, c21, c20;\r\n    var result = new Intersection();\r\n\r\n    a = a2.multiply(-2);\r\n    c12 = a1.add(a.add(a3));\r\n\r\n    a = a1.multiply(-2);\r\n    b = a2.multiply(2);\r\n    c11 = a.add(b);\r\n\r\n    c10 = new Point2D(a1.x, a1.y);\r\n\r\n    a = b1.multiply(-1);\r\n    b = b2.multiply(3);\r\n    c = b3.multiply(-3);\r\n    d = a.add(b.add(c.add(b4)));\r\n    c23 = new Vector2D(d.x, d.y);\r\n\r\n    a = b1.multiply(3);\r\n    b = b2.multiply(-6);\r\n    c = b3.multiply(3);\r\n    d = a.add(b.add(c));\r\n    c22 = new Vector2D(d.x, d.y);\r\n\r\n    a = b1.multiply(-3);\r\n    b = b2.multiply(3);\r\n    c = a.add(b);\r\n    c21 = new Vector2D(c.x, c.y);\r\n\r\n    c20 = new Vector2D(b1.x, b1.y);\r\n\r\n    var c10x2 = c10.x*c10.x;\r\n    var c10y2 = c10.y*c10.y;\r\n    var c11x2 = c11.x*c11.x;\r\n    var c11y2 = c11.y*c11.y;\r\n    var c12x2 = c12.x*c12.x;\r\n    var c12y2 = c12.y*c12.y;\r\n    var c20x2 = c20.x*c20.x;\r\n    var c20y2 = c20.y*c20.y;\r\n    var c21x2 = c21.x*c21.x;\r\n    var c21y2 = c21.y*c21.y;\r\n    var c22x2 = c22.x*c22.x;\r\n    var c22y2 = c22.y*c22.y;\r\n    var c23x2 = c23.x*c23.x;\r\n    var c23y2 = c23.y*c23.y;\r\n\r\n    var poly = new Polynomial(\r\n        -2*c12.x*c12.y*c23.x*c23.y + c12x2*c23y2 + c12y2*c23x2,\r\n        -2*c12.x*c12.y*c22.x*c23.y - 2*c12.x*c12.y*c22.y*c23.x + 2*c12y2*c22.x*c23.x +\r\n            2*c12x2*c22.y*c23.y,\r\n        -2*c12.x*c21.x*c12.y*c23.y - 2*c12.x*c12.y*c21.y*c23.x - 2*c12.x*c12.y*c22.x*c22.y +\r\n            2*c21.x*c12y2*c23.x + c12y2*c22x2 + c12x2*(2*c21.y*c23.y + c22y2),\r\n        2*c10.x*c12.x*c12.y*c23.y + 2*c10.y*c12.x*c12.y*c23.x + c11.x*c11.y*c12.x*c23.y +\r\n            c11.x*c11.y*c12.y*c23.x - 2*c20.x*c12.x*c12.y*c23.y - 2*c12.x*c20.y*c12.y*c23.x -\r\n            2*c12.x*c21.x*c12.y*c22.y - 2*c12.x*c12.y*c21.y*c22.x - 2*c10.x*c12y2*c23.x -\r\n            2*c10.y*c12x2*c23.y + 2*c20.x*c12y2*c23.x + 2*c21.x*c12y2*c22.x -\r\n            c11y2*c12.x*c23.x - c11x2*c12.y*c23.y + c12x2*(2*c20.y*c23.y + 2*c21.y*c22.y),\r\n        2*c10.x*c12.x*c12.y*c22.y + 2*c10.y*c12.x*c12.y*c22.x + c11.x*c11.y*c12.x*c22.y +\r\n            c11.x*c11.y*c12.y*c22.x - 2*c20.x*c12.x*c12.y*c22.y - 2*c12.x*c20.y*c12.y*c22.x -\r\n            2*c12.x*c21.x*c12.y*c21.y - 2*c10.x*c12y2*c22.x - 2*c10.y*c12x2*c22.y +\r\n            2*c20.x*c12y2*c22.x - c11y2*c12.x*c22.x - c11x2*c12.y*c22.y + c21x2*c12y2 +\r\n            c12x2*(2*c20.y*c22.y + c21y2),\r\n        2*c10.x*c12.x*c12.y*c21.y + 2*c10.y*c12.x*c21.x*c12.y + c11.x*c11.y*c12.x*c21.y +\r\n            c11.x*c11.y*c21.x*c12.y - 2*c20.x*c12.x*c12.y*c21.y - 2*c12.x*c20.y*c21.x*c12.y -\r\n            2*c10.x*c21.x*c12y2 - 2*c10.y*c12x2*c21.y + 2*c20.x*c21.x*c12y2 -\r\n            c11y2*c12.x*c21.x - c11x2*c12.y*c21.y + 2*c12x2*c20.y*c21.y,\r\n        -2*c10.x*c10.y*c12.x*c12.y - c10.x*c11.x*c11.y*c12.y - c10.y*c11.x*c11.y*c12.x +\r\n            2*c10.x*c12.x*c20.y*c12.y + 2*c10.y*c20.x*c12.x*c12.y + c11.x*c20.x*c11.y*c12.y +\r\n            c11.x*c11.y*c12.x*c20.y - 2*c20.x*c12.x*c20.y*c12.y - 2*c10.x*c20.x*c12y2 +\r\n            c10.x*c11y2*c12.x + c10.y*c11x2*c12.y - 2*c10.y*c12x2*c20.y -\r\n            c20.x*c11y2*c12.x - c11x2*c20.y*c12.y + c10x2*c12y2 + c10y2*c12x2 +\r\n            c20x2*c12y2 + c12x2*c20y2\r\n    );\r\n    var roots = poly.getRootsInInterval(0,1);\r\n    removeMultipleRootsIn01(roots);\r\n\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var s = roots[i];\r\n        var xRoots = new Polynomial(\r\n            c12.x,\r\n            c11.x,\r\n            c10.x - c20.x - s*c21.x - s*s*c22.x - s*s*s*c23.x\r\n        ).getRoots();\r\n        var yRoots = new Polynomial(\r\n            c12.y,\r\n            c11.y,\r\n            c10.y - c20.y - s*c21.y - s*s*c22.y - s*s*s*c23.y\r\n        ).getRoots();\r\n\r\n        if ( xRoots.length > 0 && yRoots.length > 0 ) {\r\n            var TOLERANCE = 1e-4;\r\n\r\n            checkRoots:\r\n                for ( var j = 0; j < xRoots.length; j++ ) {\r\n                    var xRoot = xRoots[j];\r\n\r\n                    if ( 0 <= xRoot && xRoot <= 1 ) {\r\n                        for ( var k = 0; k < yRoots.length; k++ ) {\r\n                            if ( Math.abs( xRoot - yRoots[k] ) < TOLERANCE ) {\r\n                                var v = c23.multiply(s * s * s).add(c22.multiply(s * s).add(c21.multiply(s).add(c20)));\r\n                                result.points.push(new Point2D(v.x, v.y));\r\n                                break checkRoots;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        }\r\n    }\r\n\r\n    return result;\r\n\r\n};\r\n\r\n/**\r\n *  intersectBezier2Ellipse\r\n *\r\n *  @param {Point2D} p1\r\n *  @param {Point2D} p2\r\n *  @param {Point2D} p3\r\n *  @param {Point2D} ec\r\n *  @param {Number} rx\r\n *  @param {Number} ry\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier2Ellipse = function(p1, p2, p3, ec, rx, ry) {\r\n    var a, b;       // temporary variables\r\n    var c2, c1, c0; // coefficients of quadratic\r\n    var result = new Intersection();\r\n\r\n    a = p2.multiply(-2);\r\n    c2 = p1.add(a.add(p3));\r\n\r\n    a = p1.multiply(-2);\r\n    b = p2.multiply(2);\r\n    c1 = a.add(b);\r\n\r\n    c0 = new Point2D(p1.x, p1.y);\r\n\r\n    var rxrx  = rx*rx;\r\n    var ryry  = ry*ry;\r\n    var roots = new Polynomial(\r\n        ryry*c2.x*c2.x + rxrx*c2.y*c2.y,\r\n        2*(ryry*c2.x*c1.x + rxrx*c2.y*c1.y),\r\n        ryry*(2*c2.x*c0.x + c1.x*c1.x) + rxrx*(2*c2.y*c0.y+c1.y*c1.y) -\r\n            2*(ryry*ec.x*c2.x + rxrx*ec.y*c2.y),\r\n        2*(ryry*c1.x*(c0.x-ec.x) + rxrx*c1.y*(c0.y-ec.y)),\r\n        ryry*(c0.x*c0.x+ec.x*ec.x) + rxrx*(c0.y*c0.y + ec.y*ec.y) -\r\n            2*(ryry*ec.x*c0.x + rxrx*ec.y*c0.y) - rxrx*ryry\r\n    ).getRoots();\r\n\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var t = roots[i];\r\n\r\n        if ( 0 <= t && t <= 1 )\r\n            result.points.push( c2.multiply(t*t).add(c1.multiply(t).add(c0)) );\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  intersectBezier2Line\r\n *\r\n *  @param {Point2D} p1\r\n *  @param {Point2D} p2\r\n *  @param {Point2D} p3\r\n *  @param {Point2D} a1\r\n *  @param {Point2D} a2\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier2Line = function(p1, p2, p3, a1, a2) {\r\n    var a, b;             // temporary variables\r\n    var c2, c1, c0;       // coefficients of quadratic\r\n    var cl;               // c coefficient for normal form of line\r\n    var n;                // normal for normal form of line\r\n    var min = a1.min(a2); // used to determine if point is on line segment\r\n    var max = a1.max(a2); // used to determine if point is on line segment\r\n    var result = new Intersection();\r\n\r\n    a = p2.multiply(-2);\r\n    c2 = p1.add(a.add(p3));\r\n\r\n    a = p1.multiply(-2);\r\n    b = p2.multiply(2);\r\n    c1 = a.add(b);\r\n\r\n    c0 = new Point2D(p1.x, p1.y);\r\n\r\n    // Convert line to normal form: ax + by + c = 0\r\n    // Find normal to line: negative inverse of original line's slope\r\n    n = new Vector2D(a1.y - a2.y, a2.x - a1.x);\r\n\r\n    // Determine new c coefficient\r\n    cl = a1.x*a2.y - a2.x*a1.y;\r\n\r\n    // Transform cubic coefficients to line's coordinate system and find roots\r\n    // of cubic\r\n    roots = new Polynomial(\r\n        n.dot(c2),\r\n        n.dot(c1),\r\n        n.dot(c0) + cl\r\n    ).getRoots();\r\n\r\n    // Any roots in closed interval [0,1] are intersections on Bezier, but\r\n    // might not be on the line segment.\r\n    // Find intersections and calculate point coordinates\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var t = roots[i];\r\n\r\n        if ( 0 <= t && t <= 1 ) {\r\n            // We're within the Bezier curve\r\n            // Find point on Bezier\r\n            var p4 = p1.lerp(p2, t);\r\n            var p5 = p2.lerp(p3, t);\r\n\r\n            var p6 = p4.lerp(p5, t);\r\n\r\n            // See if point is on line segment\r\n            // Had to make special cases for vertical and horizontal lines due\r\n            // to slight errors in calculation of p6\r\n            if ( a1.x == a2.x ) {\r\n                if ( min.y <= p6.y && p6.y <= max.y ) {\r\n                    result.appendPoint( p6 );\r\n                }\r\n            } else if ( a1.y == a2.y ) {\r\n                if ( min.x <= p6.x && p6.x <= max.x ) {\r\n                    result.appendPoint( p6 );\r\n                }\r\n            } else if (min.x <= p6.x && p6.x <= max.x && min.y <= p6.y && p6.y <= max.y) {\r\n                result.appendPoint( p6 );\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  intersectBezier3Bezier3\r\n *\r\n *  @param {Point2D} a1\r\n *  @param {Point2D} a2\r\n *  @param {Point2D} a3\r\n *  @param {Point2D} a4\r\n *  @param {Point2D} b1\r\n *  @param {Point2D} b2\r\n *  @param {Point2D} b3\r\n *  @param {Point2D} b4\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier3Bezier3 = function(a1, a2, a3, a4, b1, b2, b3, b4) {\r\n    var a, b, c, d;         // temporary variables\r\n    var c13, c12, c11, c10; // coefficients of cubic\r\n    var c23, c22, c21, c20; // coefficients of cubic\r\n    var result = new Intersection();\r\n\r\n    // Calculate the coefficients of cubic polynomial\r\n    a = a1.multiply(-1);\r\n    b = a2.multiply(3);\r\n    c = a3.multiply(-3);\r\n    d = a.add(b.add(c.add(a4)));\r\n    c13 = new Vector2D(d.x, d.y);\r\n\r\n    a = a1.multiply(3);\r\n    b = a2.multiply(-6);\r\n    c = a3.multiply(3);\r\n    d = a.add(b.add(c));\r\n    c12 = new Vector2D(d.x, d.y);\r\n\r\n    a = a1.multiply(-3);\r\n    b = a2.multiply(3);\r\n    c = a.add(b);\r\n    c11 = new Vector2D(c.x, c.y);\r\n\r\n    c10 = new Vector2D(a1.x, a1.y);\r\n\r\n    a = b1.multiply(-1);\r\n    b = b2.multiply(3);\r\n    c = b3.multiply(-3);\r\n    d = a.add(b.add(c.add(b4)));\r\n    c23 = new Vector2D(d.x, d.y);\r\n\r\n    a = b1.multiply(3);\r\n    b = b2.multiply(-6);\r\n    c = b3.multiply(3);\r\n    d = a.add(b.add(c));\r\n    c22 = new Vector2D(d.x, d.y);\r\n\r\n    a = b1.multiply(-3);\r\n    b = b2.multiply(3);\r\n    c = a.add(b);\r\n    c21 = new Vector2D(c.x, c.y);\r\n\r\n    c20 = new Vector2D(b1.x, b1.y);\r\n\r\n    var c10x2 = c10.x*c10.x;\r\n    var c10x3 = c10.x*c10.x*c10.x;\r\n    var c10y2 = c10.y*c10.y;\r\n    var c10y3 = c10.y*c10.y*c10.y;\r\n    var c11x2 = c11.x*c11.x;\r\n    var c11x3 = c11.x*c11.x*c11.x;\r\n    var c11y2 = c11.y*c11.y;\r\n    var c11y3 = c11.y*c11.y*c11.y;\r\n    var c12x2 = c12.x*c12.x;\r\n    var c12x3 = c12.x*c12.x*c12.x;\r\n    var c12y2 = c12.y*c12.y;\r\n    var c12y3 = c12.y*c12.y*c12.y;\r\n    var c13x2 = c13.x*c13.x;\r\n    var c13x3 = c13.x*c13.x*c13.x;\r\n    var c13y2 = c13.y*c13.y;\r\n    var c13y3 = c13.y*c13.y*c13.y;\r\n    var c20x2 = c20.x*c20.x;\r\n    var c20x3 = c20.x*c20.x*c20.x;\r\n    var c20y2 = c20.y*c20.y;\r\n    var c20y3 = c20.y*c20.y*c20.y;\r\n    var c21x2 = c21.x*c21.x;\r\n    var c21x3 = c21.x*c21.x*c21.x;\r\n    var c21y2 = c21.y*c21.y;\r\n    var c22x2 = c22.x*c22.x;\r\n    var c22x3 = c22.x*c22.x*c22.x;\r\n    var c22y2 = c22.y*c22.y;\r\n    var c23x2 = c23.x*c23.x;\r\n    var c23x3 = c23.x*c23.x*c23.x;\r\n    var c23y2 = c23.y*c23.y;\r\n    var c23y3 = c23.y*c23.y*c23.y;\r\n    var poly = new Polynomial(\r\n        -c13x3*c23y3 + c13y3*c23x3 - 3*c13.x*c13y2*c23x2*c23.y +\r\n            3*c13x2*c13.y*c23.x*c23y2,\r\n        -6*c13.x*c22.x*c13y2*c23.x*c23.y + 6*c13x2*c13.y*c22.y*c23.x*c23.y + 3*c22.x*c13y3*c23x2 -\r\n            3*c13x3*c22.y*c23y2 - 3*c13.x*c13y2*c22.y*c23x2 + 3*c13x2*c22.x*c13.y*c23y2,\r\n        -6*c21.x*c13.x*c13y2*c23.x*c23.y - 6*c13.x*c22.x*c13y2*c22.y*c23.x + 6*c13x2*c22.x*c13.y*c22.y*c23.y +\r\n            3*c21.x*c13y3*c23x2 + 3*c22x2*c13y3*c23.x + 3*c21.x*c13x2*c13.y*c23y2 - 3*c13.x*c21.y*c13y2*c23x2 -\r\n            3*c13.x*c22x2*c13y2*c23.y + c13x2*c13.y*c23.x*(6*c21.y*c23.y + 3*c22y2) + c13x3*(-c21.y*c23y2 -\r\n            2*c22y2*c23.y - c23.y*(2*c21.y*c23.y + c22y2)),\r\n        c11.x*c12.y*c13.x*c13.y*c23.x*c23.y - c11.y*c12.x*c13.x*c13.y*c23.x*c23.y + 6*c21.x*c22.x*c13y3*c23.x +\r\n            3*c11.x*c12.x*c13.x*c13.y*c23y2 + 6*c10.x*c13.x*c13y2*c23.x*c23.y - 3*c11.x*c12.x*c13y2*c23.x*c23.y -\r\n            3*c11.y*c12.y*c13.x*c13.y*c23x2 - 6*c10.y*c13x2*c13.y*c23.x*c23.y - 6*c20.x*c13.x*c13y2*c23.x*c23.y +\r\n            3*c11.y*c12.y*c13x2*c23.x*c23.y - 2*c12.x*c12y2*c13.x*c23.x*c23.y - 6*c21.x*c13.x*c22.x*c13y2*c23.y -\r\n            6*c21.x*c13.x*c13y2*c22.y*c23.x - 6*c13.x*c21.y*c22.x*c13y2*c23.x + 6*c21.x*c13x2*c13.y*c22.y*c23.y +\r\n            2*c12x2*c12.y*c13.y*c23.x*c23.y + c22x3*c13y3 - 3*c10.x*c13y3*c23x2 + 3*c10.y*c13x3*c23y2 +\r\n            3*c20.x*c13y3*c23x2 + c12y3*c13.x*c23x2 - c12x3*c13.y*c23y2 - 3*c10.x*c13x2*c13.y*c23y2 +\r\n            3*c10.y*c13.x*c13y2*c23x2 - 2*c11.x*c12.y*c13x2*c23y2 + c11.x*c12.y*c13y2*c23x2 - c11.y*c12.x*c13x2*c23y2 +\r\n            2*c11.y*c12.x*c13y2*c23x2 + 3*c20.x*c13x2*c13.y*c23y2 - c12.x*c12y2*c13.y*c23x2 -\r\n            3*c20.y*c13.x*c13y2*c23x2 + c12x2*c12.y*c13.x*c23y2 - 3*c13.x*c22x2*c13y2*c22.y +\r\n            c13x2*c13.y*c23.x*(6*c20.y*c23.y + 6*c21.y*c22.y) + c13x2*c22.x*c13.y*(6*c21.y*c23.y + 3*c22y2) +\r\n            c13x3*(-2*c21.y*c22.y*c23.y - c20.y*c23y2 - c22.y*(2*c21.y*c23.y + c22y2) - c23.y*(2*c20.y*c23.y + 2*c21.y*c22.y)),\r\n        6*c11.x*c12.x*c13.x*c13.y*c22.y*c23.y + c11.x*c12.y*c13.x*c22.x*c13.y*c23.y + c11.x*c12.y*c13.x*c13.y*c22.y*c23.x -\r\n            c11.y*c12.x*c13.x*c22.x*c13.y*c23.y - c11.y*c12.x*c13.x*c13.y*c22.y*c23.x - 6*c11.y*c12.y*c13.x*c22.x*c13.y*c23.x -\r\n            6*c10.x*c22.x*c13y3*c23.x + 6*c20.x*c22.x*c13y3*c23.x + 6*c10.y*c13x3*c22.y*c23.y + 2*c12y3*c13.x*c22.x*c23.x -\r\n            2*c12x3*c13.y*c22.y*c23.y + 6*c10.x*c13.x*c22.x*c13y2*c23.y + 6*c10.x*c13.x*c13y2*c22.y*c23.x +\r\n            6*c10.y*c13.x*c22.x*c13y2*c23.x - 3*c11.x*c12.x*c22.x*c13y2*c23.y - 3*c11.x*c12.x*c13y2*c22.y*c23.x +\r\n            2*c11.x*c12.y*c22.x*c13y2*c23.x + 4*c11.y*c12.x*c22.x*c13y2*c23.x - 6*c10.x*c13x2*c13.y*c22.y*c23.y -\r\n            6*c10.y*c13x2*c22.x*c13.y*c23.y - 6*c10.y*c13x2*c13.y*c22.y*c23.x - 4*c11.x*c12.y*c13x2*c22.y*c23.y -\r\n            6*c20.x*c13.x*c22.x*c13y2*c23.y - 6*c20.x*c13.x*c13y2*c22.y*c23.x - 2*c11.y*c12.x*c13x2*c22.y*c23.y +\r\n            3*c11.y*c12.y*c13x2*c22.x*c23.y + 3*c11.y*c12.y*c13x2*c22.y*c23.x - 2*c12.x*c12y2*c13.x*c22.x*c23.y -\r\n            2*c12.x*c12y2*c13.x*c22.y*c23.x - 2*c12.x*c12y2*c22.x*c13.y*c23.x - 6*c20.y*c13.x*c22.x*c13y2*c23.x -\r\n            6*c21.x*c13.x*c21.y*c13y2*c23.x - 6*c21.x*c13.x*c22.x*c13y2*c22.y + 6*c20.x*c13x2*c13.y*c22.y*c23.y +\r\n            2*c12x2*c12.y*c13.x*c22.y*c23.y + 2*c12x2*c12.y*c22.x*c13.y*c23.y + 2*c12x2*c12.y*c13.y*c22.y*c23.x +\r\n            3*c21.x*c22x2*c13y3 + 3*c21x2*c13y3*c23.x - 3*c13.x*c21.y*c22x2*c13y2 - 3*c21x2*c13.x*c13y2*c23.y +\r\n            c13x2*c22.x*c13.y*(6*c20.y*c23.y + 6*c21.y*c22.y) + c13x2*c13.y*c23.x*(6*c20.y*c22.y + 3*c21y2) +\r\n            c21.x*c13x2*c13.y*(6*c21.y*c23.y + 3*c22y2) + c13x3*(-2*c20.y*c22.y*c23.y - c23.y*(2*c20.y*c22.y + c21y2) -\r\n            c21.y*(2*c21.y*c23.y + c22y2) - c22.y*(2*c20.y*c23.y + 2*c21.y*c22.y)),\r\n        c11.x*c21.x*c12.y*c13.x*c13.y*c23.y + c11.x*c12.y*c13.x*c21.y*c13.y*c23.x + c11.x*c12.y*c13.x*c22.x*c13.y*c22.y -\r\n            c11.y*c12.x*c21.x*c13.x*c13.y*c23.y - c11.y*c12.x*c13.x*c21.y*c13.y*c23.x - c11.y*c12.x*c13.x*c22.x*c13.y*c22.y -\r\n            6*c11.y*c21.x*c12.y*c13.x*c13.y*c23.x - 6*c10.x*c21.x*c13y3*c23.x + 6*c20.x*c21.x*c13y3*c23.x +\r\n            2*c21.x*c12y3*c13.x*c23.x + 6*c10.x*c21.x*c13.x*c13y2*c23.y + 6*c10.x*c13.x*c21.y*c13y2*c23.x +\r\n            6*c10.x*c13.x*c22.x*c13y2*c22.y + 6*c10.y*c21.x*c13.x*c13y2*c23.x - 3*c11.x*c12.x*c21.x*c13y2*c23.y -\r\n            3*c11.x*c12.x*c21.y*c13y2*c23.x - 3*c11.x*c12.x*c22.x*c13y2*c22.y + 2*c11.x*c21.x*c12.y*c13y2*c23.x +\r\n            4*c11.y*c12.x*c21.x*c13y2*c23.x - 6*c10.y*c21.x*c13x2*c13.y*c23.y - 6*c10.y*c13x2*c21.y*c13.y*c23.x -\r\n            6*c10.y*c13x2*c22.x*c13.y*c22.y - 6*c20.x*c21.x*c13.x*c13y2*c23.y - 6*c20.x*c13.x*c21.y*c13y2*c23.x -\r\n            6*c20.x*c13.x*c22.x*c13y2*c22.y + 3*c11.y*c21.x*c12.y*c13x2*c23.y - 3*c11.y*c12.y*c13.x*c22x2*c13.y +\r\n            3*c11.y*c12.y*c13x2*c21.y*c23.x + 3*c11.y*c12.y*c13x2*c22.x*c22.y - 2*c12.x*c21.x*c12y2*c13.x*c23.y -\r\n            2*c12.x*c21.x*c12y2*c13.y*c23.x - 2*c12.x*c12y2*c13.x*c21.y*c23.x - 2*c12.x*c12y2*c13.x*c22.x*c22.y -\r\n            6*c20.y*c21.x*c13.x*c13y2*c23.x - 6*c21.x*c13.x*c21.y*c22.x*c13y2 + 6*c20.y*c13x2*c21.y*c13.y*c23.x +\r\n            2*c12x2*c21.x*c12.y*c13.y*c23.y + 2*c12x2*c12.y*c21.y*c13.y*c23.x + 2*c12x2*c12.y*c22.x*c13.y*c22.y -\r\n            3*c10.x*c22x2*c13y3 + 3*c20.x*c22x2*c13y3 + 3*c21x2*c22.x*c13y3 + c12y3*c13.x*c22x2 +\r\n            3*c10.y*c13.x*c22x2*c13y2 + c11.x*c12.y*c22x2*c13y2 + 2*c11.y*c12.x*c22x2*c13y2 -\r\n            c12.x*c12y2*c22x2*c13.y - 3*c20.y*c13.x*c22x2*c13y2 - 3*c21x2*c13.x*c13y2*c22.y +\r\n            c12x2*c12.y*c13.x*(2*c21.y*c23.y + c22y2) + c11.x*c12.x*c13.x*c13.y*(6*c21.y*c23.y + 3*c22y2) +\r\n            c21.x*c13x2*c13.y*(6*c20.y*c23.y + 6*c21.y*c22.y) + c12x3*c13.y*(-2*c21.y*c23.y - c22y2) +\r\n            c10.y*c13x3*(6*c21.y*c23.y + 3*c22y2) + c11.y*c12.x*c13x2*(-2*c21.y*c23.y - c22y2) +\r\n            c11.x*c12.y*c13x2*(-4*c21.y*c23.y - 2*c22y2) + c10.x*c13x2*c13.y*(-6*c21.y*c23.y - 3*c22y2) +\r\n            c13x2*c22.x*c13.y*(6*c20.y*c22.y + 3*c21y2) + c20.x*c13x2*c13.y*(6*c21.y*c23.y + 3*c22y2) +\r\n            c13x3*(-2*c20.y*c21.y*c23.y - c22.y*(2*c20.y*c22.y + c21y2) - c20.y*(2*c21.y*c23.y + c22y2) -\r\n            c21.y*(2*c20.y*c23.y + 2*c21.y*c22.y)),\r\n        -c10.x*c11.x*c12.y*c13.x*c13.y*c23.y + c10.x*c11.y*c12.x*c13.x*c13.y*c23.y + 6*c10.x*c11.y*c12.y*c13.x*c13.y*c23.x -\r\n            6*c10.y*c11.x*c12.x*c13.x*c13.y*c23.y - c10.y*c11.x*c12.y*c13.x*c13.y*c23.x + c10.y*c11.y*c12.x*c13.x*c13.y*c23.x +\r\n            c11.x*c11.y*c12.x*c12.y*c13.x*c23.y - c11.x*c11.y*c12.x*c12.y*c13.y*c23.x + c11.x*c20.x*c12.y*c13.x*c13.y*c23.y +\r\n            c11.x*c20.y*c12.y*c13.x*c13.y*c23.x + c11.x*c21.x*c12.y*c13.x*c13.y*c22.y + c11.x*c12.y*c13.x*c21.y*c22.x*c13.y -\r\n            c20.x*c11.y*c12.x*c13.x*c13.y*c23.y - 6*c20.x*c11.y*c12.y*c13.x*c13.y*c23.x - c11.y*c12.x*c20.y*c13.x*c13.y*c23.x -\r\n            c11.y*c12.x*c21.x*c13.x*c13.y*c22.y - c11.y*c12.x*c13.x*c21.y*c22.x*c13.y - 6*c11.y*c21.x*c12.y*c13.x*c22.x*c13.y -\r\n            6*c10.x*c20.x*c13y3*c23.x - 6*c10.x*c21.x*c22.x*c13y3 - 2*c10.x*c12y3*c13.x*c23.x + 6*c20.x*c21.x*c22.x*c13y3 +\r\n            2*c20.x*c12y3*c13.x*c23.x + 2*c21.x*c12y3*c13.x*c22.x + 2*c10.y*c12x3*c13.y*c23.y - 6*c10.x*c10.y*c13.x*c13y2*c23.x +\r\n            3*c10.x*c11.x*c12.x*c13y2*c23.y - 2*c10.x*c11.x*c12.y*c13y2*c23.x - 4*c10.x*c11.y*c12.x*c13y2*c23.x +\r\n            3*c10.y*c11.x*c12.x*c13y2*c23.x + 6*c10.x*c10.y*c13x2*c13.y*c23.y + 6*c10.x*c20.x*c13.x*c13y2*c23.y -\r\n            3*c10.x*c11.y*c12.y*c13x2*c23.y + 2*c10.x*c12.x*c12y2*c13.x*c23.y + 2*c10.x*c12.x*c12y2*c13.y*c23.x +\r\n            6*c10.x*c20.y*c13.x*c13y2*c23.x + 6*c10.x*c21.x*c13.x*c13y2*c22.y + 6*c10.x*c13.x*c21.y*c22.x*c13y2 +\r\n            4*c10.y*c11.x*c12.y*c13x2*c23.y + 6*c10.y*c20.x*c13.x*c13y2*c23.x + 2*c10.y*c11.y*c12.x*c13x2*c23.y -\r\n            3*c10.y*c11.y*c12.y*c13x2*c23.x + 2*c10.y*c12.x*c12y2*c13.x*c23.x + 6*c10.y*c21.x*c13.x*c22.x*c13y2 -\r\n            3*c11.x*c20.x*c12.x*c13y2*c23.y + 2*c11.x*c20.x*c12.y*c13y2*c23.x + c11.x*c11.y*c12y2*c13.x*c23.x -\r\n            3*c11.x*c12.x*c20.y*c13y2*c23.x - 3*c11.x*c12.x*c21.x*c13y2*c22.y - 3*c11.x*c12.x*c21.y*c22.x*c13y2 +\r\n            2*c11.x*c21.x*c12.y*c22.x*c13y2 + 4*c20.x*c11.y*c12.x*c13y2*c23.x + 4*c11.y*c12.x*c21.x*c22.x*c13y2 -\r\n            2*c10.x*c12x2*c12.y*c13.y*c23.y - 6*c10.y*c20.x*c13x2*c13.y*c23.y - 6*c10.y*c20.y*c13x2*c13.y*c23.x -\r\n            6*c10.y*c21.x*c13x2*c13.y*c22.y - 2*c10.y*c12x2*c12.y*c13.x*c23.y - 2*c10.y*c12x2*c12.y*c13.y*c23.x -\r\n            6*c10.y*c13x2*c21.y*c22.x*c13.y - c11.x*c11.y*c12x2*c13.y*c23.y - 2*c11.x*c11y2*c13.x*c13.y*c23.x +\r\n            3*c20.x*c11.y*c12.y*c13x2*c23.y - 2*c20.x*c12.x*c12y2*c13.x*c23.y - 2*c20.x*c12.x*c12y2*c13.y*c23.x -\r\n            6*c20.x*c20.y*c13.x*c13y2*c23.x - 6*c20.x*c21.x*c13.x*c13y2*c22.y - 6*c20.x*c13.x*c21.y*c22.x*c13y2 +\r\n            3*c11.y*c20.y*c12.y*c13x2*c23.x + 3*c11.y*c21.x*c12.y*c13x2*c22.y + 3*c11.y*c12.y*c13x2*c21.y*c22.x -\r\n            2*c12.x*c20.y*c12y2*c13.x*c23.x - 2*c12.x*c21.x*c12y2*c13.x*c22.y - 2*c12.x*c21.x*c12y2*c22.x*c13.y -\r\n            2*c12.x*c12y2*c13.x*c21.y*c22.x - 6*c20.y*c21.x*c13.x*c22.x*c13y2 - c11y2*c12.x*c12.y*c13.x*c23.x +\r\n            2*c20.x*c12x2*c12.y*c13.y*c23.y + 6*c20.y*c13x2*c21.y*c22.x*c13.y + 2*c11x2*c11.y*c13.x*c13.y*c23.y +\r\n            c11x2*c12.x*c12.y*c13.y*c23.y + 2*c12x2*c20.y*c12.y*c13.y*c23.x + 2*c12x2*c21.x*c12.y*c13.y*c22.y +\r\n            2*c12x2*c12.y*c21.y*c22.x*c13.y + c21x3*c13y3 + 3*c10x2*c13y3*c23.x - 3*c10y2*c13x3*c23.y +\r\n            3*c20x2*c13y3*c23.x + c11y3*c13x2*c23.x - c11x3*c13y2*c23.y - c11.x*c11y2*c13x2*c23.y +\r\n            c11x2*c11.y*c13y2*c23.x - 3*c10x2*c13.x*c13y2*c23.y + 3*c10y2*c13x2*c13.y*c23.x - c11x2*c12y2*c13.x*c23.y +\r\n            c11y2*c12x2*c13.y*c23.x - 3*c21x2*c13.x*c21.y*c13y2 - 3*c20x2*c13.x*c13y2*c23.y + 3*c20y2*c13x2*c13.y*c23.x +\r\n            c11.x*c12.x*c13.x*c13.y*(6*c20.y*c23.y + 6*c21.y*c22.y) + c12x3*c13.y*(-2*c20.y*c23.y - 2*c21.y*c22.y) +\r\n            c10.y*c13x3*(6*c20.y*c23.y + 6*c21.y*c22.y) + c11.y*c12.x*c13x2*(-2*c20.y*c23.y - 2*c21.y*c22.y) +\r\n            c12x2*c12.y*c13.x*(2*c20.y*c23.y + 2*c21.y*c22.y) + c11.x*c12.y*c13x2*(-4*c20.y*c23.y - 4*c21.y*c22.y) +\r\n            c10.x*c13x2*c13.y*(-6*c20.y*c23.y - 6*c21.y*c22.y) + c20.x*c13x2*c13.y*(6*c20.y*c23.y + 6*c21.y*c22.y) +\r\n            c21.x*c13x2*c13.y*(6*c20.y*c22.y + 3*c21y2) + c13x3*(-2*c20.y*c21.y*c22.y - c20y2*c23.y -\r\n            c21.y*(2*c20.y*c22.y + c21y2) - c20.y*(2*c20.y*c23.y + 2*c21.y*c22.y)),\r\n        -c10.x*c11.x*c12.y*c13.x*c13.y*c22.y + c10.x*c11.y*c12.x*c13.x*c13.y*c22.y + 6*c10.x*c11.y*c12.y*c13.x*c22.x*c13.y -\r\n            6*c10.y*c11.x*c12.x*c13.x*c13.y*c22.y - c10.y*c11.x*c12.y*c13.x*c22.x*c13.y + c10.y*c11.y*c12.x*c13.x*c22.x*c13.y +\r\n            c11.x*c11.y*c12.x*c12.y*c13.x*c22.y - c11.x*c11.y*c12.x*c12.y*c22.x*c13.y + c11.x*c20.x*c12.y*c13.x*c13.y*c22.y +\r\n            c11.x*c20.y*c12.y*c13.x*c22.x*c13.y + c11.x*c21.x*c12.y*c13.x*c21.y*c13.y - c20.x*c11.y*c12.x*c13.x*c13.y*c22.y -\r\n            6*c20.x*c11.y*c12.y*c13.x*c22.x*c13.y - c11.y*c12.x*c20.y*c13.x*c22.x*c13.y - c11.y*c12.x*c21.x*c13.x*c21.y*c13.y -\r\n            6*c10.x*c20.x*c22.x*c13y3 - 2*c10.x*c12y3*c13.x*c22.x + 2*c20.x*c12y3*c13.x*c22.x + 2*c10.y*c12x3*c13.y*c22.y -\r\n            6*c10.x*c10.y*c13.x*c22.x*c13y2 + 3*c10.x*c11.x*c12.x*c13y2*c22.y - 2*c10.x*c11.x*c12.y*c22.x*c13y2 -\r\n            4*c10.x*c11.y*c12.x*c22.x*c13y2 + 3*c10.y*c11.x*c12.x*c22.x*c13y2 + 6*c10.x*c10.y*c13x2*c13.y*c22.y +\r\n            6*c10.x*c20.x*c13.x*c13y2*c22.y - 3*c10.x*c11.y*c12.y*c13x2*c22.y + 2*c10.x*c12.x*c12y2*c13.x*c22.y +\r\n            2*c10.x*c12.x*c12y2*c22.x*c13.y + 6*c10.x*c20.y*c13.x*c22.x*c13y2 + 6*c10.x*c21.x*c13.x*c21.y*c13y2 +\r\n            4*c10.y*c11.x*c12.y*c13x2*c22.y + 6*c10.y*c20.x*c13.x*c22.x*c13y2 + 2*c10.y*c11.y*c12.x*c13x2*c22.y -\r\n            3*c10.y*c11.y*c12.y*c13x2*c22.x + 2*c10.y*c12.x*c12y2*c13.x*c22.x - 3*c11.x*c20.x*c12.x*c13y2*c22.y +\r\n            2*c11.x*c20.x*c12.y*c22.x*c13y2 + c11.x*c11.y*c12y2*c13.x*c22.x - 3*c11.x*c12.x*c20.y*c22.x*c13y2 -\r\n            3*c11.x*c12.x*c21.x*c21.y*c13y2 + 4*c20.x*c11.y*c12.x*c22.x*c13y2 - 2*c10.x*c12x2*c12.y*c13.y*c22.y -\r\n            6*c10.y*c20.x*c13x2*c13.y*c22.y - 6*c10.y*c20.y*c13x2*c22.x*c13.y - 6*c10.y*c21.x*c13x2*c21.y*c13.y -\r\n            2*c10.y*c12x2*c12.y*c13.x*c22.y - 2*c10.y*c12x2*c12.y*c22.x*c13.y - c11.x*c11.y*c12x2*c13.y*c22.y -\r\n            2*c11.x*c11y2*c13.x*c22.x*c13.y + 3*c20.x*c11.y*c12.y*c13x2*c22.y - 2*c20.x*c12.x*c12y2*c13.x*c22.y -\r\n            2*c20.x*c12.x*c12y2*c22.x*c13.y - 6*c20.x*c20.y*c13.x*c22.x*c13y2 - 6*c20.x*c21.x*c13.x*c21.y*c13y2 +\r\n            3*c11.y*c20.y*c12.y*c13x2*c22.x + 3*c11.y*c21.x*c12.y*c13x2*c21.y - 2*c12.x*c20.y*c12y2*c13.x*c22.x -\r\n            2*c12.x*c21.x*c12y2*c13.x*c21.y - c11y2*c12.x*c12.y*c13.x*c22.x + 2*c20.x*c12x2*c12.y*c13.y*c22.y -\r\n            3*c11.y*c21x2*c12.y*c13.x*c13.y + 6*c20.y*c21.x*c13x2*c21.y*c13.y + 2*c11x2*c11.y*c13.x*c13.y*c22.y +\r\n            c11x2*c12.x*c12.y*c13.y*c22.y + 2*c12x2*c20.y*c12.y*c22.x*c13.y + 2*c12x2*c21.x*c12.y*c21.y*c13.y -\r\n            3*c10.x*c21x2*c13y3 + 3*c20.x*c21x2*c13y3 + 3*c10x2*c22.x*c13y3 - 3*c10y2*c13x3*c22.y + 3*c20x2*c22.x*c13y3 +\r\n            c21x2*c12y3*c13.x + c11y3*c13x2*c22.x - c11x3*c13y2*c22.y + 3*c10.y*c21x2*c13.x*c13y2 -\r\n            c11.x*c11y2*c13x2*c22.y + c11.x*c21x2*c12.y*c13y2 + 2*c11.y*c12.x*c21x2*c13y2 + c11x2*c11.y*c22.x*c13y2 -\r\n            c12.x*c21x2*c12y2*c13.y - 3*c20.y*c21x2*c13.x*c13y2 - 3*c10x2*c13.x*c13y2*c22.y + 3*c10y2*c13x2*c22.x*c13.y -\r\n            c11x2*c12y2*c13.x*c22.y + c11y2*c12x2*c22.x*c13.y - 3*c20x2*c13.x*c13y2*c22.y + 3*c20y2*c13x2*c22.x*c13.y +\r\n            c12x2*c12.y*c13.x*(2*c20.y*c22.y + c21y2) + c11.x*c12.x*c13.x*c13.y*(6*c20.y*c22.y + 3*c21y2) +\r\n            c12x3*c13.y*(-2*c20.y*c22.y - c21y2) + c10.y*c13x3*(6*c20.y*c22.y + 3*c21y2) +\r\n            c11.y*c12.x*c13x2*(-2*c20.y*c22.y - c21y2) + c11.x*c12.y*c13x2*(-4*c20.y*c22.y - 2*c21y2) +\r\n            c10.x*c13x2*c13.y*(-6*c20.y*c22.y - 3*c21y2) + c20.x*c13x2*c13.y*(6*c20.y*c22.y + 3*c21y2) +\r\n            c13x3*(-2*c20.y*c21y2 - c20y2*c22.y - c20.y*(2*c20.y*c22.y + c21y2)),\r\n        -c10.x*c11.x*c12.y*c13.x*c21.y*c13.y + c10.x*c11.y*c12.x*c13.x*c21.y*c13.y + 6*c10.x*c11.y*c21.x*c12.y*c13.x*c13.y -\r\n            6*c10.y*c11.x*c12.x*c13.x*c21.y*c13.y - c10.y*c11.x*c21.x*c12.y*c13.x*c13.y + c10.y*c11.y*c12.x*c21.x*c13.x*c13.y -\r\n            c11.x*c11.y*c12.x*c21.x*c12.y*c13.y + c11.x*c11.y*c12.x*c12.y*c13.x*c21.y + c11.x*c20.x*c12.y*c13.x*c21.y*c13.y +\r\n            6*c11.x*c12.x*c20.y*c13.x*c21.y*c13.y + c11.x*c20.y*c21.x*c12.y*c13.x*c13.y - c20.x*c11.y*c12.x*c13.x*c21.y*c13.y -\r\n            6*c20.x*c11.y*c21.x*c12.y*c13.x*c13.y - c11.y*c12.x*c20.y*c21.x*c13.x*c13.y - 6*c10.x*c20.x*c21.x*c13y3 -\r\n            2*c10.x*c21.x*c12y3*c13.x + 6*c10.y*c20.y*c13x3*c21.y + 2*c20.x*c21.x*c12y3*c13.x + 2*c10.y*c12x3*c21.y*c13.y -\r\n            2*c12x3*c20.y*c21.y*c13.y - 6*c10.x*c10.y*c21.x*c13.x*c13y2 + 3*c10.x*c11.x*c12.x*c21.y*c13y2 -\r\n            2*c10.x*c11.x*c21.x*c12.y*c13y2 - 4*c10.x*c11.y*c12.x*c21.x*c13y2 + 3*c10.y*c11.x*c12.x*c21.x*c13y2 +\r\n            6*c10.x*c10.y*c13x2*c21.y*c13.y + 6*c10.x*c20.x*c13.x*c21.y*c13y2 - 3*c10.x*c11.y*c12.y*c13x2*c21.y +\r\n            2*c10.x*c12.x*c21.x*c12y2*c13.y + 2*c10.x*c12.x*c12y2*c13.x*c21.y + 6*c10.x*c20.y*c21.x*c13.x*c13y2 +\r\n            4*c10.y*c11.x*c12.y*c13x2*c21.y + 6*c10.y*c20.x*c21.x*c13.x*c13y2 + 2*c10.y*c11.y*c12.x*c13x2*c21.y -\r\n            3*c10.y*c11.y*c21.x*c12.y*c13x2 + 2*c10.y*c12.x*c21.x*c12y2*c13.x - 3*c11.x*c20.x*c12.x*c21.y*c13y2 +\r\n            2*c11.x*c20.x*c21.x*c12.y*c13y2 + c11.x*c11.y*c21.x*c12y2*c13.x - 3*c11.x*c12.x*c20.y*c21.x*c13y2 +\r\n            4*c20.x*c11.y*c12.x*c21.x*c13y2 - 6*c10.x*c20.y*c13x2*c21.y*c13.y - 2*c10.x*c12x2*c12.y*c21.y*c13.y -\r\n            6*c10.y*c20.x*c13x2*c21.y*c13.y - 6*c10.y*c20.y*c21.x*c13x2*c13.y - 2*c10.y*c12x2*c21.x*c12.y*c13.y -\r\n            2*c10.y*c12x2*c12.y*c13.x*c21.y - c11.x*c11.y*c12x2*c21.y*c13.y - 4*c11.x*c20.y*c12.y*c13x2*c21.y -\r\n            2*c11.x*c11y2*c21.x*c13.x*c13.y + 3*c20.x*c11.y*c12.y*c13x2*c21.y - 2*c20.x*c12.x*c21.x*c12y2*c13.y -\r\n            2*c20.x*c12.x*c12y2*c13.x*c21.y - 6*c20.x*c20.y*c21.x*c13.x*c13y2 - 2*c11.y*c12.x*c20.y*c13x2*c21.y +\r\n            3*c11.y*c20.y*c21.x*c12.y*c13x2 - 2*c12.x*c20.y*c21.x*c12y2*c13.x - c11y2*c12.x*c21.x*c12.y*c13.x +\r\n            6*c20.x*c20.y*c13x2*c21.y*c13.y + 2*c20.x*c12x2*c12.y*c21.y*c13.y + 2*c11x2*c11.y*c13.x*c21.y*c13.y +\r\n            c11x2*c12.x*c12.y*c21.y*c13.y + 2*c12x2*c20.y*c21.x*c12.y*c13.y + 2*c12x2*c20.y*c12.y*c13.x*c21.y +\r\n            3*c10x2*c21.x*c13y3 - 3*c10y2*c13x3*c21.y + 3*c20x2*c21.x*c13y3 + c11y3*c21.x*c13x2 - c11x3*c21.y*c13y2 -\r\n            3*c20y2*c13x3*c21.y - c11.x*c11y2*c13x2*c21.y + c11x2*c11.y*c21.x*c13y2 - 3*c10x2*c13.x*c21.y*c13y2 +\r\n            3*c10y2*c21.x*c13x2*c13.y - c11x2*c12y2*c13.x*c21.y + c11y2*c12x2*c21.x*c13.y - 3*c20x2*c13.x*c21.y*c13y2 +\r\n            3*c20y2*c21.x*c13x2*c13.y,\r\n        c10.x*c10.y*c11.x*c12.y*c13.x*c13.y - c10.x*c10.y*c11.y*c12.x*c13.x*c13.y + c10.x*c11.x*c11.y*c12.x*c12.y*c13.y -\r\n            c10.y*c11.x*c11.y*c12.x*c12.y*c13.x - c10.x*c11.x*c20.y*c12.y*c13.x*c13.y + 6*c10.x*c20.x*c11.y*c12.y*c13.x*c13.y +\r\n            c10.x*c11.y*c12.x*c20.y*c13.x*c13.y - c10.y*c11.x*c20.x*c12.y*c13.x*c13.y - 6*c10.y*c11.x*c12.x*c20.y*c13.x*c13.y +\r\n            c10.y*c20.x*c11.y*c12.x*c13.x*c13.y - c11.x*c20.x*c11.y*c12.x*c12.y*c13.y + c11.x*c11.y*c12.x*c20.y*c12.y*c13.x +\r\n            c11.x*c20.x*c20.y*c12.y*c13.x*c13.y - c20.x*c11.y*c12.x*c20.y*c13.x*c13.y - 2*c10.x*c20.x*c12y3*c13.x +\r\n            2*c10.y*c12x3*c20.y*c13.y - 3*c10.x*c10.y*c11.x*c12.x*c13y2 - 6*c10.x*c10.y*c20.x*c13.x*c13y2 +\r\n            3*c10.x*c10.y*c11.y*c12.y*c13x2 - 2*c10.x*c10.y*c12.x*c12y2*c13.x - 2*c10.x*c11.x*c20.x*c12.y*c13y2 -\r\n            c10.x*c11.x*c11.y*c12y2*c13.x + 3*c10.x*c11.x*c12.x*c20.y*c13y2 - 4*c10.x*c20.x*c11.y*c12.x*c13y2 +\r\n            3*c10.y*c11.x*c20.x*c12.x*c13y2 + 6*c10.x*c10.y*c20.y*c13x2*c13.y + 2*c10.x*c10.y*c12x2*c12.y*c13.y +\r\n            2*c10.x*c11.x*c11y2*c13.x*c13.y + 2*c10.x*c20.x*c12.x*c12y2*c13.y + 6*c10.x*c20.x*c20.y*c13.x*c13y2 -\r\n            3*c10.x*c11.y*c20.y*c12.y*c13x2 + 2*c10.x*c12.x*c20.y*c12y2*c13.x + c10.x*c11y2*c12.x*c12.y*c13.x +\r\n            c10.y*c11.x*c11.y*c12x2*c13.y + 4*c10.y*c11.x*c20.y*c12.y*c13x2 - 3*c10.y*c20.x*c11.y*c12.y*c13x2 +\r\n            2*c10.y*c20.x*c12.x*c12y2*c13.x + 2*c10.y*c11.y*c12.x*c20.y*c13x2 + c11.x*c20.x*c11.y*c12y2*c13.x -\r\n            3*c11.x*c20.x*c12.x*c20.y*c13y2 - 2*c10.x*c12x2*c20.y*c12.y*c13.y - 6*c10.y*c20.x*c20.y*c13x2*c13.y -\r\n            2*c10.y*c20.x*c12x2*c12.y*c13.y - 2*c10.y*c11x2*c11.y*c13.x*c13.y - c10.y*c11x2*c12.x*c12.y*c13.y -\r\n            2*c10.y*c12x2*c20.y*c12.y*c13.x - 2*c11.x*c20.x*c11y2*c13.x*c13.y - c11.x*c11.y*c12x2*c20.y*c13.y +\r\n            3*c20.x*c11.y*c20.y*c12.y*c13x2 - 2*c20.x*c12.x*c20.y*c12y2*c13.x - c20.x*c11y2*c12.x*c12.y*c13.x +\r\n            3*c10y2*c11.x*c12.x*c13.x*c13.y + 3*c11.x*c12.x*c20y2*c13.x*c13.y + 2*c20.x*c12x2*c20.y*c12.y*c13.y -\r\n            3*c10x2*c11.y*c12.y*c13.x*c13.y + 2*c11x2*c11.y*c20.y*c13.x*c13.y + c11x2*c12.x*c20.y*c12.y*c13.y -\r\n            3*c20x2*c11.y*c12.y*c13.x*c13.y - c10x3*c13y3 + c10y3*c13x3 + c20x3*c13y3 - c20y3*c13x3 -\r\n            3*c10.x*c20x2*c13y3 - c10.x*c11y3*c13x2 + 3*c10x2*c20.x*c13y3 + c10.y*c11x3*c13y2 +\r\n            3*c10.y*c20y2*c13x3 + c20.x*c11y3*c13x2 + c10x2*c12y3*c13.x - 3*c10y2*c20.y*c13x3 - c10y2*c12x3*c13.y +\r\n            c20x2*c12y3*c13.x - c11x3*c20.y*c13y2 - c12x3*c20y2*c13.y - c10.x*c11x2*c11.y*c13y2 +\r\n            c10.y*c11.x*c11y2*c13x2 - 3*c10.x*c10y2*c13x2*c13.y - c10.x*c11y2*c12x2*c13.y + c10.y*c11x2*c12y2*c13.x -\r\n            c11.x*c11y2*c20.y*c13x2 + 3*c10x2*c10.y*c13.x*c13y2 + c10x2*c11.x*c12.y*c13y2 +\r\n            2*c10x2*c11.y*c12.x*c13y2 - 2*c10y2*c11.x*c12.y*c13x2 - c10y2*c11.y*c12.x*c13x2 + c11x2*c20.x*c11.y*c13y2 -\r\n            3*c10.x*c20y2*c13x2*c13.y + 3*c10.y*c20x2*c13.x*c13y2 + c11.x*c20x2*c12.y*c13y2 - 2*c11.x*c20y2*c12.y*c13x2 +\r\n            c20.x*c11y2*c12x2*c13.y - c11.y*c12.x*c20y2*c13x2 - c10x2*c12.x*c12y2*c13.y - 3*c10x2*c20.y*c13.x*c13y2 +\r\n            3*c10y2*c20.x*c13x2*c13.y + c10y2*c12x2*c12.y*c13.x - c11x2*c20.y*c12y2*c13.x + 2*c20x2*c11.y*c12.x*c13y2 +\r\n            3*c20.x*c20y2*c13x2*c13.y - c20x2*c12.x*c12y2*c13.y - 3*c20x2*c20.y*c13.x*c13y2 + c12x2*c20y2*c12.y*c13.x\r\n    );\r\n    var roots = poly.getRootsInInterval(0,1);\r\n    removeMultipleRootsIn01(roots);\r\n\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var s = roots[i];\r\n        var xRoots = new Polynomial(\r\n            c13.x,\r\n            c12.x,\r\n            c11.x,\r\n            c10.x - c20.x - s*c21.x - s*s*c22.x - s*s*s*c23.x\r\n        ).getRoots();\r\n        var yRoots = new Polynomial(\r\n            c13.y,\r\n            c12.y,\r\n            c11.y,\r\n            c10.y - c20.y - s*c21.y - s*s*c22.y - s*s*s*c23.y\r\n        ).getRoots();\r\n\r\n        if ( xRoots.length > 0 && yRoots.length > 0 ) {\r\n            var TOLERANCE = 1e-4;\r\n\r\n            checkRoots:\r\n                for ( var j = 0; j < xRoots.length; j++ ) {\r\n                    var xRoot = xRoots[j];\r\n\r\n                    if ( 0 <= xRoot && xRoot <= 1 ) {\r\n                        for ( var k = 0; k < yRoots.length; k++ ) {\r\n                            if ( Math.abs( xRoot - yRoots[k] ) < TOLERANCE ) {\r\n                                var v = c23.multiply(s * s * s).add(c22.multiply(s * s).add(c21.multiply(s).add(c20)));\r\n                                result.points.push(new Point2D(v.x, v.y));\r\n                                break checkRoots;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n/**\r\n *  intersectBezier3Ellipse\r\n *\r\n *  @param {Point2D} p1\r\n *  @param {Point2D} p2\r\n *  @param {Point2D} p3\r\n *  @param {Point2D} p4\r\n *  @param {Point2D} ec\r\n *  @param {Number} rx\r\n *  @param {Number} ry\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier3Ellipse = function(p1, p2, p3, p4, ec, rx, ry) {\r\n    var a, b, c, d;       // temporary variables\r\n    var c3, c2, c1, c0;   // coefficients of cubic\r\n    var result = new Intersection();\r\n\r\n    // Calculate the coefficients of cubic polynomial\r\n    a = p1.multiply(-1);\r\n    b = p2.multiply(3);\r\n    c = p3.multiply(-3);\r\n    d = a.add(b.add(c.add(p4)));\r\n    c3 = new Vector2D(d.x, d.y);\r\n\r\n    a = p1.multiply(3);\r\n    b = p2.multiply(-6);\r\n    c = p3.multiply(3);\r\n    d = a.add(b.add(c));\r\n    c2 = new Vector2D(d.x, d.y);\r\n\r\n    a = p1.multiply(-3);\r\n    b = p2.multiply(3);\r\n    c = a.add(b);\r\n    c1 = new Vector2D(c.x, c.y);\r\n\r\n    c0 = new Vector2D(p1.x, p1.y);\r\n\r\n    var rxrx  = rx*rx;\r\n    var ryry  = ry*ry;\r\n    var poly = new Polynomial(\r\n        c3.x*c3.x*ryry + c3.y*c3.y*rxrx,\r\n        2*(c3.x*c2.x*ryry + c3.y*c2.y*rxrx),\r\n        2*(c3.x*c1.x*ryry + c3.y*c1.y*rxrx) + c2.x*c2.x*ryry + c2.y*c2.y*rxrx,\r\n        2*c3.x*ryry*(c0.x - ec.x) + 2*c3.y*rxrx*(c0.y - ec.y) +\r\n            2*(c2.x*c1.x*ryry + c2.y*c1.y*rxrx),\r\n        2*c2.x*ryry*(c0.x - ec.x) + 2*c2.y*rxrx*(c0.y - ec.y) +\r\n            c1.x*c1.x*ryry + c1.y*c1.y*rxrx,\r\n        2*c1.x*ryry*(c0.x - ec.x) + 2*c1.y*rxrx*(c0.y - ec.y),\r\n        c0.x*c0.x*ryry - 2*c0.y*ec.y*rxrx - 2*c0.x*ec.x*ryry +\r\n            c0.y*c0.y*rxrx + ec.x*ec.x*ryry + ec.y*ec.y*rxrx - rxrx*ryry\r\n    );\r\n    var roots = poly.getRootsInInterval(0,1);\r\n    removeMultipleRootsIn01(roots);\r\n\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var t = roots[i];\r\n        var v = c3.multiply(t * t * t).add(c2.multiply(t * t).add(c1.multiply(t).add(c0)));\r\n        result.points.push(new Point2D(v.x, v.y));\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/**\r\n *  intersectBezier3Line\r\n *\r\n *  Many thanks to Dan Sunday at SoftSurfer.com.  He gave me a very thorough\r\n *  sketch of the algorithm used here.  Without his help, I'm not sure when I\r\n *  would have figured out this intersection problem.\r\n *\r\n *  @param {Point2D} p1\r\n *  @param {Point2D} p2\r\n *  @param {Point2D} p3\r\n *  @param {Point2D} p4\r\n *  @param {Point2D} a1\r\n *  @param {Point2D} a2\r\n *  @returns {Intersection}\r\n */\r\nmodule.exports.intersectBezier3Line = function(p1, p2, p3, p4, a1, a2) {\r\n    var a, b, c, d;       // temporary variables\r\n    var c3, c2, c1, c0;   // coefficients of cubic\r\n    var cl;               // c coefficient for normal form of line\r\n    var n;                // normal for normal form of line\r\n    var min = a1.min(a2); // used to determine if point is on line segment\r\n    var max = a1.max(a2); // used to determine if point is on line segment\r\n    var result = new Intersection();\r\n\r\n    // Start with Bezier using Bernstein polynomials for weighting functions:\r\n    //     (1-t^3)P1 + 3t(1-t)^2P2 + 3t^2(1-t)P3 + t^3P4\r\n    //\r\n    // Expand and collect terms to form linear combinations of original Bezier\r\n    // controls.  This ends up with a vector cubic in t:\r\n    //     (-P1+3P2-3P3+P4)t^3 + (3P1-6P2+3P3)t^2 + (-3P1+3P2)t + P1\r\n    //             /\\                  /\\                /\\       /\\\r\n    //             ||                  ||                ||       ||\r\n    //             c3                  c2                c1       c0\r\n\r\n    // Calculate the coefficients\r\n    a = p1.multiply(-1);\r\n    b = p2.multiply(3);\r\n    c = p3.multiply(-3);\r\n    d = a.add(b.add(c.add(p4)));\r\n    c3 = new Vector2D(d.x, d.y);\r\n\r\n    a = p1.multiply(3);\r\n    b = p2.multiply(-6);\r\n    c = p3.multiply(3);\r\n    d = a.add(b.add(c));\r\n    c2 = new Vector2D(d.x, d.y);\r\n\r\n    a = p1.multiply(-3);\r\n    b = p2.multiply(3);\r\n    c = a.add(b);\r\n    c1 = new Vector2D(c.x, c.y);\r\n\r\n    c0 = new Vector2D(p1.x, p1.y);\r\n\r\n    // Convert line to normal form: ax + by + c = 0\r\n    // Find normal to line: negative inverse of original line's slope\r\n    n = new Vector2D(a1.y - a2.y, a2.x - a1.x);\r\n\r\n    // Determine new c coefficient\r\n    cl = a1.x*a2.y - a2.x*a1.y;\r\n\r\n    // ?Rotate each cubic coefficient using line for new coordinate system?\r\n    // Find roots of rotated cubic\r\n    var roots = new Polynomial(\r\n        n.dot(c3),\r\n        n.dot(c2),\r\n        n.dot(c1),\r\n        n.dot(c0) + cl\r\n    ).getRoots();\r\n\r\n    // Any roots in closed interval [0,1] are intersections on Bezier, but\r\n    // might not be on the line segment.\r\n    // Find intersections and calculate point coordinates\r\n    for ( var i = 0; i < roots.length; i++ ) {\r\n        var t = roots[i];\r\n\r\n        if ( 0 <= t && t <= 1 ) {\r\n            // We're within the Bezier curve\r\n            // Find point on Bezier\r\n            var p5 = p1.lerp(p2, t);\r\n            var p6 = p2.lerp(p3, t);\r\n            var p7 = p3.lerp(p4, t);\r\n\r\n            var p8 = p5.lerp(p6, t);\r\n            var p9 = p6.lerp(p7, t);\r\n\r\n            var p10 = p8.lerp(p9, t);\r\n\r\n            // See if point is on line segment\r\n            // Had to make special cases for vertical and horizontal lines due\r\n            // to slight errors in calculation of p10\r\n            if ( a1.x == a2.x ) {\r\n                if ( min.y <= p10.y && p10.y <= max.y ) {\r\n                    result.appendPoint( p10 );\r\n                }\r\n            } else if ( a1.y == a2.y ) {\r\n                if ( min.x <= p10.x && p10.x <= max.x ) {\r\n                    result.appendPoint( p10 );\r\n                }\r\n            } else if (min.x <= p10.x && p10.x <= max.x && min.y <= p10.y && p10.y <= max.y) {\r\n                result.appendPoint( p10 );\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n},{\"../Intersection\":9,\"kld-affine\":1,\"kld-polynomial\":5}],12:[function(require,module,exports){\r\n/**\r\n *\r\n *  Intersection.js\r\n *\r\n *  copyright 2002, 2013 Kevin Lindsey\r\n *\r\n *  contribution {@link http://github.com/Quazistax/kld-intersections}\r\n *      @copyright 2015 Robert Benko (Quazistax) <quazistax@gmail.com>\r\n *      @license MIT\r\n */\r\n\r\nvar Point2D = require('kld-affine').Point2D;\r\nvar Vector2D = require('kld-affine').Vector2D;\r\nvar Matrix2D = require('kld-affine').Matrix2D;\r\nvar Polynomial = require('kld-polynomial').Polynomial;\r\nvar IntersectionParams = require('./IntersectionParams');\r\nvar Intersection = require('./Intersection');\r\nvar bezierIntersectionFunctions = require('./functions/bezier')\r\n\r\nvar IPTYPE = IntersectionParams.TYPE;\r\n\r\n\r\n\r\n/**\r\n *  bezout\r\n *\r\n *  This code is based on MgcIntr2DElpElp.cpp written by David Eberly.  His\r\n *  code along with many other excellent examples are avaiable at his site:\r\n *  http://www.geometrictools.com\r\n *\r\n *  @param {Array<Point2D>} e1\r\n *  @param {Array<Point2D>} e2\r\n *  @returns {Polynomial}\r\n */\r\nfunction bezout(e1, e2) {\r\n    var AB    = e1[0]*e2[1] - e2[0]*e1[1];\r\n    var AC    = e1[0]*e2[2] - e2[0]*e1[2];\r\n    var AD    = e1[0]*e2[3] - e2[0]*e1[3];\r\n    var AE    = e1[0]*e2[4] - e2[0]*e1[4];\r\n    var AF    = e1[0]*e2[5] - e2[0]*e1[5];\r\n    var BC    = e1[1]*e2[2] - e2[1]*e1[2];\r\n    var BE    = e1[1]*e2[4] - e2[1]*e1[4];\r\n    var BF    = e1[1]*e2[5] - e2[1]*e1[5];\r\n    var CD    = e1[2]*e2[3] - e2[2]*e1[3];\r\n    var DE    = e1[3]*e2[4] - e2[3]*e1[4];\r\n    var DF    = e1[3]*e2[5] - e2[3]*e1[5];\r\n    var BFpDE = BF + DE;\r\n    var BEmCD = BE - CD;\r\n\r\n    return new Polynomial(\r\n        AB*BC - AC*AC,\r\n        AB*BEmCD + AD*BC - 2*AC*AE,\r\n        AB*BFpDE + AD*BEmCD - AE*AE - 2*AC*AF,\r\n        AB*DF + AD*BFpDE - 2*AE*AF,\r\n        AD*DF - AF*AF\r\n    );\r\n}\r\n\r\n/**\r\n    Removes from intersection points those points that are not between two rays determined by arc parameters.\r\n    Rays begin at ellipse center and go through arc startPoint/endPoint.\r\n\r\n    @param {Intersection} intersection - will be modified and returned\r\n    @param {Point2D} c - center of arc ellipse\r\n    @param {Number} rx\r\n    @param {Number} ry\r\n    @param {Number} phi - in radians\r\n    @param {Number} th1 - in radians\r\n    @param {Number} dth - in radians\r\n    @param {Matrix2D} [m] - arc transformation matrix\r\n    @returns {Intersection}\r\n*/\r\nfunction removePointsNotInArc(intersection, c, rx, ry, phi, th1, dth, m) {\r\n    if (intersection.points.length === 0) return intersection;\r\n    if (m && !m.isIdentity())\r\n        var mp = m.inverse();\r\n    var np = [];\r\n    var vx = new Vector2D(1, 0);\r\n    var pi2 = Math.PI * 2;\r\n    var wasNeg = dth < 0;\r\n    var wasBig = Math.abs(dth) > Math.PI;\r\n    var m1 = new Matrix2D().scaleNonUniform(1, ry / rx).rotate(th1);\r\n    var m2 = new Matrix2D().scaleNonUniform(1, ry / rx).rotate(th1 + dth);\r\n\r\n    th1 = (vx.angleBetween(vx.transform(m1)) + pi2) % pi2;\r\n    dth = vx.transform(m1).angleBetween(vx.transform(m2));\r\n    dth = (wasBig ? pi2 - Math.abs(dth) : Math.abs(dth)) * (wasNeg ? -1 : 1);\r\n    var m3 = new Matrix2D().rotate(phi).multiply(m1);\r\n\r\n    for (var i = 0, p, a; i < intersection.points.length; i++) {\r\n        p = intersection.points[i];\r\n        a = vx.transform(m3).angleBetween(Vector2D.fromPoints(c, (mp) ? p.transform(mp) : p));\r\n        if (dth >= 0) {\r\n            a = (a + 2 * pi2) % pi2;\r\n            if (a <= dth)\r\n                np.push(p);\r\n        } else {\r\n            a = (a - 2 * pi2) % pi2;\r\n            if (a >= dth)\r\n                np.push(p);\r\n        }\r\n    }\r\n    intersection.points = np;\r\n    return intersection;\r\n};\r\n\r\n/**\r\n    points1 will be modified, points close (almost identical) to any point in points2 will be removed\r\n\r\n    @param {Array<Point2D>} points1 - will be modified, points close to any point in points2 will be removed\r\n    @param {Array<Point2D>} points2\r\n*/\r\nfunction removeClosePoints(points1, points2) {\r\n    if (points1.length === 0 || points2.length === 0)\r\n        return;\r\n    var maxf = function (p, v) { if (p < v.x) p = v.x; if (p < v.y) p = v.y; return p; };\r\n    var max = points1.reduce(maxf, 0);\r\n    max = points2.reduce(maxf, max);\r\n    var ERRF = 1e-15;\r\n    var ZEROepsilon = 100 * max * ERRF * Math.SQRT2;\r\n    var j;\r\n    for (var i = 0; i < points1.length;) {\r\n        for (j = 0; j < points2.length; j++) {\r\n            if (points1[i].distanceFrom(points2[j]) <= ZEROepsilon) {\r\n                points1.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        if (j == points2.length)\r\n            i++;\r\n    }\r\n}\r\n\r\nvar intersectionFunctions = {\r\n\r\n    /**\r\n        intersectPathShape\r\n\r\n        @param {IntersectionParams} path\r\n        @param {IntersectionParams} shape\r\n        @param {Matrix2D} [m1]\r\n        @param {Matrix2D} [m2]\r\n        @returns {Intersection}\r\n    */\r\n    intersectPathShape: function (path, shape, m1, m2) {\r\n        var result = new Intersection();\r\n        var pathParams = path.params[0];\r\n        var inter0;\r\n        var previnter;\r\n        for (var inter, i = 0; i < pathParams.length; i++) {\r\n            inter = intersect(pathParams[i], shape, m1, m2);\r\n            if (!inter0)\r\n                inter0 = inter;\r\n            if (previnter) {\r\n                removeClosePoints(previnter.points, inter.points);\r\n                result.appendPoints(previnter.points);\r\n            }\r\n            previnter = inter;\r\n        }\r\n        if (previnter) {\r\n            result.appendPoints(previnter.points);\r\n        }\r\n        return result;\r\n    },\r\n\r\n\r\n    /**\r\n        intersectLinesShape\r\n\r\n        @param {IntersectionParams} lines - IntersectionParams with points as first parameter (like types RECT, POLYLINE or POLYGON)\r\n        @param {IntersectionParams} shape - IntersectionParams of other shape\r\n        @param {Matrix2D} [m1]\r\n        @param {Matrix2D} [m2]\r\n        @param {Boolean} [closed] - if set, determines if line between first and last point will be taken into callculation too. If not set, it's true for RECT and POLYGON, false for other <b>lines</b> types.\r\n        @returns {Intersection}\r\n    */\r\n    intersectLinesShape: function (lines, shape, m1, m2, closed) {\r\n        var IPTYPE = IntersectionParams.TYPE;\r\n        var line_points = lines.params[0];\r\n        var ip = new IntersectionParams(IPTYPE.LINE, [0, 0]);\r\n        var result = new Intersection();\r\n        var inter, i;\r\n        var intersectLine = function (i1, i2) {\r\n            ip.params[0] = line_points[i1];\r\n            ip.params[1] = line_points[i2];\r\n            inter = intersect(ip, shape, m1, m2);\r\n            removeClosePoints(inter.points, [line_points[i2]]);\r\n            result.appendPoints(inter.points);\r\n        }\r\n        for (i = 0; i < line_points.length - 1; i++) {\r\n            intersectLine(i, i + 1);\r\n        }\r\n        if (typeof closed !== 'undefined' && closed || lines.type === IPTYPE.RECT || lines.type === IPTYPE.POLYGON) {\r\n            intersectLine(line_points.length - 1, 0);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    ///////////////////////////////////////////////////////////////////\r\n    /**\r\n        intersectArcShape\r\n\r\n        @param {IntersectionParams} arc\r\n        @param {IntersectionParams} shape\r\n        @param {Matrix2D} [m1]\r\n        @param {Matrix2D} [m2]\r\n        @returns {Intersection}\r\n    */\r\n    intersectArcShape: function (arc, shape, m1, m2) {\r\n        m1 = m1 || Matrix2D.IDENTITY;\r\n        m2 = m2 || Matrix2D.IDENTITY;\r\n        var c1 = arc.params[0],\r\n            rx1 = arc.params[1],\r\n            ry1 = arc.params[2],\r\n            phi1 = arc.params[3],\r\n            th1 = arc.params[4],\r\n            dth1 = arc.params[5];\r\n\r\n        var res;\r\n        if (m1.isIdentity() && phi1 === 0) {\r\n            res = intersect(IntersectionParams.newEllipse(c1, rx1, ry1), shape, m1, m2);\r\n        }\r\n        else {\r\n            m1 = m1.multiply(Matrix2D.IDENTITY.translate(c1.x, c1.y).rotate(phi1));\r\n            c1 = new Point2D(0, 0);\r\n            phi1 = 0;\r\n            res = intersect(IntersectionParams.newEllipse(c1, rx1, ry1), shape, m1, m2);\r\n        }\r\n        res = removePointsNotInArc(res, c1, rx1, ry1, phi1, th1, dth1, m1);\r\n        return res;\r\n    },\r\n\r\n    /**\r\n     *  Finds intersection points of two ellipses. <br/>\r\n     *\r\n     *  This code is based on MgcIntr2DElpElp.cpp written by David Eberly. His\r\n     *  code along with many other excellent examples are avaiable at his site:\r\n     *  http://www.geometrictools.com\r\n     *\r\n     *  Changes - 2015 Robert Benko (Quazistax)\r\n     *\r\n     *  @param {Point2D} c1\r\n     *  @param {Number} rx1\r\n     *  @param {Number} ry1\r\n     *  @param {Point2D} c2\r\n     *  @param {Number} rx2\r\n     *  @param {Number} ry2\r\n     *  @returns {Intersection}\r\n     */\r\n    intersectEllipseEllipse: function (c1, rx1, ry1, c2, rx2, ry2) {\r\n        var a = [\r\n            ry1 * ry1, 0, rx1 * rx1, -2 * ry1 * ry1 * c1.x, -2 * rx1 * rx1 * c1.y,\r\n            ry1 * ry1 * c1.x * c1.x + rx1 * rx1 * c1.y * c1.y - rx1 * rx1 * ry1 * ry1\r\n        ];\r\n        var b = [\r\n            ry2 * ry2, 0, rx2 * rx2, -2 * ry2 * ry2 * c2.x, -2 * rx2 * rx2 * c2.y,\r\n            ry2 * ry2 * c2.x * c2.x + rx2 * rx2 * c2.y * c2.y - rx2 * rx2 * ry2 * ry2\r\n        ];\r\n\r\n        var yPoly = bezout(a, b);\r\n        var yRoots = yPoly.getRoots();\r\n        var epsilon = 1e-3;\r\n        var norm0 = (a[0] * a[0] + 2 * a[1] * a[1] + a[2] * a[2]) * epsilon;\r\n        var norm1 = (b[0] * b[0] + 2 * b[1] * b[1] + b[2] * b[2]) * epsilon;\r\n        var result = new Intersection();\r\n\r\n        var i;\r\n        //Handling root calculation error causing not detecting intersection\r\n        var clip = function (val, min, max) { return Math.max(min, Math.min(max, val)); };\r\n        for (i = 0 ; i < yRoots.length; i++) {\r\n            yRoots[i] = clip(yRoots[i], c1.y - ry1, c1.y + ry1);\r\n            yRoots[i] = clip(yRoots[i], c2.y - ry2, c2.y + ry2);\r\n        }\r\n\r\n        //For detection of multiplicated intersection points\r\n        yRoots.sort(function (a, b) { return a - b; });\r\n        var rootPointsN = [];\r\n\r\n        for (var y = 0; y < yRoots.length; y++) {\r\n            var xPoly = new Polynomial(\r\n                a[0],\r\n                a[3] + yRoots[y] * a[1],\r\n                a[5] + yRoots[y] * (a[4] + yRoots[y] * a[2])\r\n            );\r\n            var ERRF = 1e-15;\r\n            if (Math.abs(xPoly.coefs[0]) < 10 * ERRF * Math.abs(xPoly.coefs[2]))\r\n                xPoly.coefs[0] = 0;\r\n            var xRoots = xPoly.getRoots();\r\n\r\n            rootPointsN.push(0);\r\n            for (var x = 0; x < xRoots.length; x++) {\r\n                var test =\r\n                    (a[0] * xRoots[x] + a[1] * yRoots[y] + a[3]) * xRoots[x] +\r\n                    (a[2] * yRoots[y] + a[4]) * yRoots[y] + a[5];\r\n                if (Math.abs(test) < norm0) {\r\n                    test =\r\n                        (b[0] * xRoots[x] + b[1] * yRoots[y] + b[3]) * xRoots[x] +\r\n                        (b[2] * yRoots[y] + b[4]) * yRoots[y] + b[5];\r\n                    if (Math.abs(test) < norm1) {\r\n                        result.appendPoint(new Point2D(xRoots[x], yRoots[y]));\r\n                        rootPointsN[y] += 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.points.length <= 0)\r\n            return result;\r\n\r\n        //Removal of multiplicated intersection points\r\n        var pts = result.points;\r\n        if (pts.length == 8) {\r\n            pts = pts.splice(0, 6);\r\n            pts.splice(2, 2);\r\n        }\r\n        else if (pts.length == 7) {\r\n            pts = pts.splice(0, 6);\r\n            pts.splice(2, 2);\r\n            pts.splice(rootPointsN.indexOf(1), 1);\r\n        }\r\n        else if (pts.length == 6) {\r\n            pts.splice(2, 2);\r\n            //console.log('ElEl 6pts: N: ' + rootPointsN.toString());\r\n            if (rootPointsN.indexOf(0) > -1) {\r\n                if (pts[0].distanceFrom(pts[1]) < pts[2].distanceFrom(pts[3])) {\r\n                    pts.splice(0, 1);\r\n                }\r\n                else {\r\n                    pts.splice(2, 1);\r\n                }\r\n            }\r\n            else if (rootPointsN[0] == rootPointsN[3]) {\r\n                pts.splice(1, 2);\r\n            }\r\n        }\r\n        else if (pts.length == 4) {\r\n            if (\r\n                (yRoots.length == 2)\r\n            || (yRoots.length == 4 && (rootPointsN[0] == 2 && rootPointsN[1] == 2 || rootPointsN[2] == 2 && rootPointsN[3] == 2))\r\n            ) {\r\n                pts.splice(2, 2);\r\n            }\r\n        }\r\n        else if (pts.length == 3 || pts.length == 5) {\r\n            i = rootPointsN.indexOf(2);\r\n            if (i > -1) {\r\n                if (pts.length == 3)\r\n                    i = i % 2;\r\n                var ii = i + (i % 2 ? -1 : 2);\r\n                var d1, d2, d3;\r\n                d1 = pts[i].distanceFrom(pts[i + 1]);\r\n                d2 = pts[i].distanceFrom(pts[ii]);\r\n                d3 = pts[i + 1].distanceFrom(pts[ii]);\r\n                if (d1 < d2 && d1 < d3) {\r\n                    pts.splice(i, 1);\r\n                }\r\n                else {\r\n                    pts.splice(ii, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        var poly = yPoly;\r\n        var ZEROepsilon = yPoly.zeroErrorEstimate();\r\n        ZEROepsilon *= 100 * Math.SQRT2;\r\n        for (i = 0; i < pts.length - 1;) {\r\n            if (pts[i].distanceFrom(pts[i + 1]) < ZEROepsilon) {\r\n                pts.splice(i + 1, 1);\r\n                continue;\r\n            }\r\n            i++;\r\n        }\r\n\r\n        result.points = pts;\r\n        return result;\r\n    },\r\n\r\n\r\n    /**\r\n     *  intersectEllipseLine\r\n     *\r\n     *  NOTE: Rotation will need to be added to this function\r\n     *\r\n     *  @param {Point2D} c\r\n     *  @param {Number} rx\r\n     *  @param {Number} ry\r\n     *  @param {Point2D} a1\r\n     *  @param {Point2D} a2\r\n     *  @returns {Intersection}\r\n     */\r\n    intersectEllipseLine: function(c, rx, ry, a1, a2) {\r\n        var result;\r\n        var origin = new Vector2D(a1.x, a1.y);\r\n        var dir    = Vector2D.fromPoints(a1, a2);\r\n        var center = new Vector2D(c.x, c.y);\r\n        var diff   = origin.subtract(center);\r\n        var mDir   = new Vector2D( dir.x/(rx*rx),  dir.y/(ry*ry)  );\r\n        var mDiff  = new Vector2D( diff.x/(rx*rx), diff.y/(ry*ry) );\r\n\r\n        var a = dir.dot(mDir);\r\n        var b = dir.dot(mDiff);\r\n        var c = diff.dot(mDiff) - 1.0;\r\n        var d = b*b - a*c;\r\n\r\n        var ERRF = 1e-15;\r\n        var ZEROepsilon = 10 * Math.max(Math.abs(a), Math.abs(b), Math.abs(c)) * ERRF;\r\n        if (Math.abs(d) < ZEROepsilon) {\r\n            d = 0;\r\n        }\r\n\r\n        if ( d < 0 ) {\r\n            result = new Intersection(\"Outside\");\r\n        } else if ( d > 0 ) {\r\n            var root = Math.sqrt(d);\r\n            var t_a  = (-b - root) / a;\r\n            var t_b  = (-b + root) / a;\r\n\r\n            t_b = (t_b > 1) ? t_b - ERRF : (t_b < 0) ? t_b + ERRF : t_b;\r\n            t_a = (t_a > 1) ? t_a - ERRF : (t_a < 0) ? t_a + ERRF : t_a;\r\n\r\n            if ( (t_a < 0 || 1 < t_a) && (t_b < 0 || 1 < t_b) ) {\r\n                if ( (t_a < 0 && t_b < 0) || (t_a > 1 && t_b > 1) )\r\n                    result = new Intersection(\"Outside\");\r\n                else\r\n                    result = new Intersection(\"Inside\");\r\n            } else {\r\n                result = new Intersection();\r\n                if ( 0 <= t_a && t_a <= 1 )\r\n                    result.appendPoint( a1.lerp(a2, t_a) );\r\n                if ( 0 <= t_b && t_b <= 1 )\r\n                    result.appendPoint( a1.lerp(a2, t_b) );\r\n            }\r\n        } else {\r\n            var t = -b/a;\r\n            if ( 0 <= t && t <= 1 ) {\r\n                result = new Intersection();\r\n                result.appendPoint( a1.lerp(a2, t) );\r\n            } else {\r\n                result = new Intersection(\"Outside\");\r\n            }\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n\r\n    /**\r\n     *  intersectLineLine\r\n     *\r\n     *  @param {Point2D} a1\r\n     *  @param {Point2D} a2\r\n     *  @param {Point2D} b1\r\n     *  @param {Point2D} b2\r\n     *  @returns {Intersection}\r\n     */\r\n    intersectLineLine: function(a1, a2, b1, b2) {\r\n        var result;\r\n        var ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\r\n        var ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);\r\n        var u_b  = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\r\n\r\n        if ( u_b !== 0 ) {\r\n            var ua = ua_t / u_b;\r\n            var ub = ub_t / u_b;\r\n\r\n            if ( 0 <= ua && ua <= 1 && 0 <= ub && ub <= 1 ) {\r\n                result = new Intersection();\r\n                result.points.push(\r\n                    new Point2D(\r\n                        a1.x + ua * (a2.x - a1.x),\r\n                        a1.y + ua * (a2.y - a1.y)\r\n                    )\r\n                );\r\n            } else {\r\n                result = new Intersection();\r\n            }\r\n        } else {\r\n            if ( ua_t === 0 || ub_t === 0 ) {\r\n                result = new Intersection(\"Coincident\");\r\n            } else {\r\n                result = new Intersection(\"Parallel\");\r\n            }\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n\r\n    /**\r\n     *  intersectRayRay\r\n     *\r\n     *  @param {Point2D} a1\r\n     *  @param {Point2D} a2\r\n     *  @param {Point2D} b1\r\n     *  @param {Point2D} b2\r\n     *  @returns {Intersection}\r\n     */\r\n    intersectRayRay: function(a1, a2, b1, b2) {\r\n        var result;\r\n\r\n        var ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\r\n        var ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);\r\n        var u_b  = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\r\n\r\n        if ( u_b !== 0 ) {\r\n            var ua = ua_t / u_b;\r\n\r\n            result = new Intersection();\r\n            result.points.push(\r\n                new Point2D(\r\n                    a1.x + ua * (a2.x - a1.x),\r\n                    a1.y + ua * (a2.y - a1.y)\r\n                )\r\n            );\r\n        } else {\r\n            if ( ua_t === 0 || ub_t === 0 ) {\r\n                result = new Intersection(\"Coincident\");\r\n            } else {\r\n                result = new Intersection(\"Parallel\");\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n};\r\n\r\nvar composedShapeMethods = {};\r\ncomposedShapeMethods[IPTYPE.PATH] = intersectionFunctions.intersectPathShape;\r\ncomposedShapeMethods[IPTYPE.POLYLINE] = intersectionFunctions.intersectLinesShape;\r\ncomposedShapeMethods[IPTYPE.POLYGON] = intersectionFunctions.intersectLinesShape;\r\ncomposedShapeMethods[IPTYPE.RECT] = intersectionFunctions.intersectLinesShape;\r\ncomposedShapeMethods[IPTYPE.ROUNDRECT] = intersectionFunctions.intersectPathShape;\r\ncomposedShapeMethods[IPTYPE.ARC] = intersectionFunctions.intersectArcShape;\r\n\r\n\r\n\r\nfunction intersect(shape1, shape2, m1, m2) {\r\n    var ip1 = shape1;\r\n    var ip2 = shape2;\r\n    var result;\r\n\r\n    if (ip1 !== null && ip2 !== null) {\r\n        var method;\r\n        if (method = composedShapeMethods[ip1.type]) {\r\n            result = method(ip1, ip2, m1, m2);\r\n        }\r\n        else if (method = composedShapeMethods[ip2.type]) {\r\n            result = method(ip2, ip1, m2, m1);\r\n        }\r\n        else {\r\n            var params;\r\n\r\n            var params1, params2, type1, type2;\r\n\r\n            if (ip1.type === IPTYPE.CIRCLE) {\r\n                params1 = [ip1.params[0], ip1.params[1], ip1.params[1]];\r\n                type1 = IPTYPE.ELLIPSE;\r\n            }\r\n            else {\r\n                params1 = ip1.params.slice();\r\n                type1 = ip1.type;\r\n            }\r\n\r\n            if (ip2.type === IPTYPE.CIRCLE) {\r\n                params2 = [ip2.params[0], ip2.params[1], ip2.params[1]];\r\n                type2 = IPTYPE.ELLIPSE;\r\n            }\r\n            else {\r\n                params2 = ip2.params.slice();\r\n                type2 = ip2.type;\r\n            }\r\n\r\n            //var m1 = new Matrix2D(), m2 = new Matrix2D();\r\n            var SMF = 1;\r\n            var itm;\r\n            var useCTM = (m1 instanceof Matrix2D && m2 instanceof Matrix2D);// && (!m1.isIdentity() || !m2.isIdentity()));\r\n            if (useCTM) {\r\n                if (type1 === IPTYPE.ELLIPSE && type2 === IPTYPE.ELLIPSE) {\r\n                    var m1_, m2_;\r\n                    var d2;\r\n                    var c1 = params1[0], rx1 = params1[1], ry1 = params1[2];\r\n                    var c2 = params2[0], rx2 = params2[1], ry2 = params2[2];\r\n\r\n                    m1 = m1.multiply(Matrix2D.IDENTITY.translate(c1.x, c1.y).scaleNonUniform(rx1 / SMF, ry1 / SMF));\r\n                    c1 = new Point2D(0, 0);\r\n                    rx1 = ry1 = SMF;\r\n\r\n                    m2 = m2.multiply(Matrix2D.IDENTITY.translate(c2.x, c2.y).scaleNonUniform(rx2, ry2));\r\n                    c2 = new Point2D(0, 0);\r\n                    rx2 = ry2 = 1;\r\n\r\n                    d2 = m1.inverse().multiply(m2).getDecomposition();\r\n                    m1_ = d2.rotation.inverse().multiply(d2.translation.inverse());\r\n                    m2_ = d2.scale;\r\n\r\n                    rx2 = m2_.a;\r\n                    ry2 = m2_.d;\r\n                    c1 = c1.transform(m1_);\r\n                    itm = m1.multiply(m1_.inverse());\r\n\r\n                    params1[0] = c1;\r\n                    params1[1] = rx1;\r\n                    params1[2] = ry1;\r\n                    params2[0] = c2;\r\n                    params2[1] = rx2;\r\n                    params2[2] = ry2;\r\n                }\r\n                else {\r\n                    var transParams = function (type, params, m) {\r\n                        var transParam = function (i) {\r\n                            params[i] = params[i].transform(m);\r\n                        }\r\n\r\n                        if (type === IPTYPE.LINE) {\r\n                            transParam(0);\r\n                            transParam(1);\r\n                        }\r\n                        else if (type === IPTYPE.BEZIER2) {\r\n                            transParam(0);\r\n                            transParam(1);\r\n                            transParam(2);\r\n                        }\r\n                        else if (type === IPTYPE.BEZIER3) {\r\n                            transParam(0);\r\n                            transParam(1);\r\n                            transParam(2);\r\n                            transParam(3);\r\n                        }\r\n                        else {\r\n                            throw new Error('Unknown shape: ' + type);\r\n                        }\r\n                    }\r\n\r\n                    if (type2 === IPTYPE.ELLIPSE) {\r\n                        var tmp;\r\n                        tmp = params2; params2 = params1; params1 = tmp;\r\n                        tmp = type2; type2 = type1; type1 = tmp;\r\n                        tmp = m2; m2 = m1; m1 = tmp;\r\n                    }\r\n\r\n                    if (type1 === IPTYPE.ELLIPSE) {\r\n                        var c1 = params1[0], rx1 = params1[1], ry1 = params1[2];\r\n\r\n                        m1 = m1.multiply(Matrix2D.IDENTITY.translate(c1.x, c1.y).scaleNonUniform(rx1 / SMF, ry1 / SMF));\r\n                        c1 = new Point2D(0, 0);\r\n                        rx1 = ry1 = SMF;\r\n\r\n                        m2_ = m1.inverse().multiply(m2);\r\n                        transParams(type2, params2, m2_);\r\n\r\n                        itm = m1;\r\n\r\n                        params1[0] = c1;\r\n                        params1[1] = rx1;\r\n                        params1[2] = ry1;\r\n                    }\r\n                    else {\r\n                        transParams(type1, params1, m1);\r\n                        transParams(type2, params2, m2);\r\n                        itm = Matrix2D.IDENTITY;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (type1 < type2) {\r\n                method = \"intersect\" + type1 + type2;\r\n                params = params1.concat(params2);\r\n            } else {\r\n                method = \"intersect\" + type2 + type1;\r\n                params = params2.concat(params1);\r\n            }\r\n\r\n            result = intersectionFunctions[method].apply(null, params);\r\n\r\n            if (useCTM) {\r\n                for (var i = 0; i < result.points.length; i++) {\r\n                    result.points[i] = result.points[i].transform(itm);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        result = new Intersection();\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfor(var key in bezierIntersectionFunctions) {\r\n    if(bezierIntersectionFunctions.hasOwnProperty(key)) {\r\n        intersectionFunctions[key] = bezierIntersectionFunctions[key];\r\n    }\r\n}\r\n\r\nmodule.exports = intersect;\r\n\r\n},{\"./Intersection\":9,\"./IntersectionParams\":10,\"./functions/bezier\":11,\"kld-affine\":1,\"kld-polynomial\":5}]},{},[8])(8)\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","class DateUtils {\r\n    // return array with all months names and holiday label\r\n    static getMonthsWithHolidays() {\r\n        let months = this.months.map(m => { return m.name; });\r\n        months.push(DateUtils.holidaysLabel);\r\n        return months;\r\n    }\r\n    // if the day in year is holiday, returns true \r\n    static isHoliday(dayInYear) {\r\n        return DateUtils.holidays.has(dayInYear);\r\n    }\r\n    ;\r\n    // returns month in which the day takes place\r\n    static getMonthByDay(dayInYear) {\r\n        return DateUtils.months.find((month) => {\r\n            return dayInYear >= month.firstDay && dayInYear <= month.lastDay;\r\n        });\r\n    }\r\n    // returns year in which the day takes place\r\n    static getYear(daysFromZero) {\r\n        return Math.floor(daysFromZero / DateUtils.daysInYear);\r\n    }\r\n    // returns day in year (0-370) from count of days from day 0\r\n    static getDayInYear(daysFromZero) {\r\n        let dayInYear = daysFromZero % DateUtils.daysInYear;\r\n        if (dayInYear < 0)\r\n            dayInYear = DateUtils.daysInYear + dayInYear;\r\n        return dayInYear;\r\n    }\r\n    // return name of month in which day takes place, day is represented by count og days from day 0\r\n    static getMonth(daysFromZero) {\r\n        let dayInYear = DateUtils.getDayInYear(daysFromZero);\r\n        if (DateUtils.isHoliday(dayInYear))\r\n            return DateUtils.holidaysLabel;\r\n        return DateUtils.getMonthByDay(dayInYear).name;\r\n    }\r\n    // returns array with name of days in wantad month or list of all holidays\r\n    static getDaysList(month) {\r\n        if (month === DateUtils.holidaysLabel)\r\n            return [...this.holidays.values()];\r\n        return [...Array(30).keys()].map(i => { return (i + 1).toString(); });\r\n    }\r\n    // returns day represented as count of days in year\r\n    // parameter daysFromZero is day represented as count od days from day 0 in year 0\r\n    static getDay(daysFromZero) {\r\n        let dayInYear = DateUtils.getDayInYear(daysFromZero);\r\n        if (DateUtils.isHoliday(dayInYear))\r\n            return DateUtils.holidays.get(dayInYear);\r\n        return (dayInYear - DateUtils.getMonthByDay(dayInYear).firstDay + 1).toString();\r\n    }\r\n    // returns \r\n    static getDayFromZero(day, month, year) {\r\n        let dayInYear;\r\n        if (month === DateUtils.holidaysLabel) {\r\n            dayInYear = [...DateUtils.holidays.entries()].find(([date, name]) => name == day)[0];\r\n        }\r\n        else {\r\n            let monthData = DateUtils.months.find((m) => month == m.name);\r\n            dayInYear = monthData.firstDay + parseInt(day) - 1;\r\n        }\r\n        let yearDays = year * DateUtils.daysInYear;\r\n        return yearDays + dayInYear;\r\n    }\r\n    static getDateName(daysFromZero) {\r\n        let year = DateUtils.getYear(daysFromZero);\r\n        let dayInYear = DateUtils.getDayInYear(daysFromZero);\r\n        if (DateUtils.isHoliday(dayInYear)) {\r\n            let day = DateUtils.holidays.get(dayInYear);\r\n            return day + \" \" + year;\r\n        }\r\n        else {\r\n            let month = this.getMonthByDay(dayInYear);\r\n            let day = dayInYear - month.firstDay + 1;\r\n            return day + \". \" + month.name + \" \" + year;\r\n        }\r\n    }\r\n}\r\n// count of days in Asterion's year\r\nDateUtils.daysInYear = 370;\r\nDateUtils.holidaysLabel = \"Svátky\";\r\n// array with Month objects. Month object contains numbers of month's first day in year and month's last day in year and name of year   \r\nDateUtils.months = [\r\n    { firstDay: 0, lastDay: 29, name: \"Chladen\" },\r\n    { firstDay: 30, lastDay: 59, name: \"Kliden\" },\r\n    { firstDay: 61, lastDay: 90, name: \"Novorost\" },\r\n    { firstDay: 92, lastDay: 121, name: \"Rozkvet\" },\r\n    { firstDay: 122, lastDay: 151, name: \"Zelenec\" },\r\n    { firstDay: 154, lastDay: 183, name: \"Ploden\" },\r\n    { firstDay: 185, lastDay: 214, name: \"Žluten\" },\r\n    { firstDay: 215, lastDay: 244, name: \"Úmor\" },\r\n    { firstDay: 246, lastDay: 275, name: \"Traven\" },\r\n    { firstDay: 277, lastDay: 306, name: \"Ovocen\" },\r\n    { firstDay: 307, lastDay: 336, name: \"Větrnec\" },\r\n    { firstDay: 339, lastDay: 368, name: \"Dešten\" }\r\n];\r\n// map of all Asterion's holidays with day in which the holiday takes place in year and name of holiday  \r\nDateUtils.holidays = new Map([\r\n    [60, \"Den pústu\"],\r\n    [91, \"Den očištění\"],\r\n    [152, \"Sv. letních duchů 1\"],\r\n    [153, \"Sv. letních duchů 2\"],\r\n    [184, \"Sv. mladých srdcí\"],\r\n    [245, \"Den hojnosti\"],\r\n    [276, \"Den zákonů\"],\r\n    [337, \"Sv. zimních duchů 1\"],\r\n    [338, \"Sv. zimních duchů 2\"],\r\n    [369, \"Sv. proroků\"]\r\n]);\r\nexport default DateUtils;\r\n//# sourceMappingURL=DateUtils.js.map","import \"./styles.css\";\r\nimport Context from \"./context.js\";\r\nimport Build from \"./build.js\"\r\nimport Order from \"./order.js\"\r\nimport Communication from \"./communication.js\";\r\nimport dateUtils from './currentVer/DateUtils.js';\r\n\r\n// Tento soubor obsahuje veskera zpetna volani\r\n// nastav potrebne promenne pro vsechny casti interakci\r\n// aktualni vyber\r\nlet selection = null;\r\n// ovladani z klavesnice\r\nlet keys = {shift: false, ctrl:false, up: false, down: false, d:false, a:false, esc:false};\r\n// promenna drzici veskere potrebne informace\r\nlet context = new Context();\r\n// vypocty poradi os\r\nlet order = new Order(context);\r\n// vystavba cele vizualizace\r\nlet build = new Build(context, order);\r\n// komunikace se serverem\r\nlet comm = new Communication(context);\r\n// modalni okno\r\nlet modal = build.getElement(\"#modal_menu\");\r\nlet modalActive = false;\r\n\r\n// nastaveni callbacku\r\nbuild.setCallBack(\".form_control\"\r\n    ,\"keyup\", (e) => {\r\n    if (e.key !== \"Escape\" && e.key !== \"ArrowUp\" && e.key !== \"ArrowDown\"\r\n        && e.key !== \"ArrowLeft\" && e.key !== \"ArrowRight\" && e.key !== \"Enter\")\r\n        comm.searchCats();\r\n});\r\n\r\n//callback pro klávesnici/klávesové zkratky\r\nbuild.setCallBack(\".dropdown\",\"keyup\", dropDownKeys);\r\nbuild.setCallBack(\"#modal_menu\",\"keyup\", (e) => {\r\n    if (e.key === \"Escape\") {\r\n        build.setStyle(\"#content\",\"visibility\", \"hidden\");\r\n    }\r\n})\r\n\r\n// nastav callback pro prvni tlacitko - upravy\r\nbuild.setCallBack(\"#add\",\"click\",() => {\r\n    activateModal();\r\n    showAdd();\r\n});\r\n\r\n// ovladani pomoci klavesnice\r\nbuild.setCallBack(\"body\", \"keydown\", keyboardControlDown)\r\nbuild.setCallBack(\"body\", \"keyup\", keyboardControlUp)\r\n// prirad callbacky modalnimu oknu\r\nbuild.setCallBack(\"#buttons .close\",\"click\", closeModal);\r\nbuild.setCallBack(\"#add_confirm\",\"click\", addPath); // pujde do komunikace\r\nbuild.setCallBack(\"#frequency\",\"click\", calcFRQShowPaths); // prepocitej dle dane metody - frekvencni\r\nbuild.setCallBack(\"#force\",\"click\", calcFMShowPaths); // prepocitej dle dane metody - silova\r\nbuild.setCallBack(\"#random_order\",\"click\", getRandomOrderShowPaths); // prepocitej dle dane metody - nahodne poradi\r\nbuild.setCallBack(\"#add_example\", \"click\", autofill); // samo plnici metoda pro ukazku\r\nbuild.setCallBack(\"#remove\", \"click\", deleteAllTimeLines); // odstran vse\r\n\r\n// vykresleni elmentu vizualizace, pripadne vycisteni zobrazovaci plochy\r\nfunction orderCbs() {\r\n    if (context.active.length > 0) {\r\n        calcFRQShowPaths();\r\n        build.getAllElements(\"#emblems .item\").nodes().forEach((el) => build.setCallBack(el,\"click\", selectItem));\r\n        build.getAllElements(\"#emblems .up\").nodes().forEach((el) => build.setCallBack(el,\"click\", moveUp));\r\n        build.getAllElements(\"#emblems .down\").nodes().forEach((el) => build.setCallBack(el,\"click\", moveDown));\r\n        build.getAllElements(\"#emblems .remove\").nodes().forEach((el) => build.setCallBack(el,\"click\", deleteTimeLine));\r\n        build.getAllElements(\".colorPicker\").nodes().forEach((el) => build.setCallBack(el, \"click\", editColor));\r\n        build.getAllElements(\".inputPicker\").nodes().forEach((el) => build.setCallBack(el, \"input\", changeColor));\r\n    }\r\n    else {\r\n        build.removeItems();\r\n    }\r\n}\r\n\r\n// pridani aktualne hledane osy do vizualizace a zobrazeni\r\nasync function addPath() {\r\n    // nactu z repre co chci pridat\r\n    await comm.saveToBuffer();\r\n    // necham spocitat poradi a necham zobrazit\r\n    orderCbs();\r\n}\r\n\r\n// vycisteni cele vizualizace\r\nfunction deleteAllTimeLines() {\r\n    build.removeItems();\r\n    context.removeAll();\r\n}\r\n\r\n// odstraneni jedne casove osy\r\nfunction deleteTimeLine(event) {\r\n    let itemClass = event.target.parentElement.className.baseVal;\r\n    context.removeSelected(itemClass);\r\n    build.removeSpecificItems([`.inputPicker.${itemClass}`]);\r\n    if (selection?.className.baseVal === itemClass)\r\n        unselectItem();\r\n    orderCbs();\r\n}\r\n\r\n// zmena barvy u osy\r\nfunction editColor(event) {\r\n    let clsName = event.target.parentNode.attributes[\"class\"].value;\r\n    // console.log(build.getElement(`.inputPicker.${clsName}`));\r\n    let picker = build.getElement(`.inputPicker.${clsName}`);\r\n    picker.attr(\"value\", event.target.attributes[\"fill\"].value);\r\n    // console.log(picker);\r\n    picker.node().click();\r\n}\r\n\r\n// postupna aktualizace barvy vsech elementu meneneho prvku\r\nfunction changeColor(event) {\r\n    // nacti novou barvu\r\n    let newColor = event.target.value;\r\n    // meneny prvek\r\n    let clsName = event.target.classList[event.target.classList.length - 1];\r\n    // zmena barev v datech\r\n    context.changeColor(event.target.defaultValue, newColor);\r\n    // zmena barvy ve vsech dilcich castech\r\n    event.target.defaultValue = newColor;\r\n    let idx = context.active.findIndex(d => d.name === clsName);\r\n    context.active[idx].color = newColor;\r\n    build.getAllElements(`.minimapDraw .${clsName}`).nodes().forEach((d) => {build.setAttrib(d,\"fill\", newColor)});\r\n    build.getAllElements(`#paths .${clsName}`).nodes().forEach((d) => {build.setAttrib(d,\"stroke\", newColor)});\r\n    build.setAttrib(`#emblems .${clsName} .colorPicker`,\"fill\",newColor);\r\n}\r\n\r\n// ovladani modalniho okna s moznostmi na pridani nebo vytvoreni ukazky\r\nfunction activateModal() {\r\n    modalActive = true;\r\n    modal.style(\"display\",\"inherit\");\r\n}\r\n\r\n// zavreni modalniho okna\r\nfunction closeModal() {\r\n    build.getElement(\".dropdown .form_control\").node().value = \"\";\r\n    modalActive = false;\r\n    modal.style(\"display\",\"none\");\r\n}\r\n\r\n// polozka na pridavani\r\nfunction showAdd() {\r\n    build.setStyle(\"#modal_add\",\"visibility\", \"inherit\");\r\n    build.setStyle(\"#add_confirm\",\"visibility\", \"inherit\");\r\n    build.setStyle(\"#add_example\",\"visibility\", \"inherit\");\r\n}\r\n\r\n// brush event callback\r\nfunction brushed(event) { // move\r\n    if (event.sourceEvent && event.sourceEvent.type === \"zoom\") return; // ignore brush-by-zoom\r\n    // ziskej vyber\r\n    let s = event.selection || context.xt.range();\r\n    // zjisti zmeny ve vyberu\r\n    s = s.map(value => value - build.minimapX);\r\n    context.xt2.domain(s.map(context.xt.invert, context.xt));\r\n    // aktualizuj cesty\r\n    for(let child of build.getElement(\"#paths\").node().children)\r\n        build.getElement(child).attr(\"d\", context.area);\r\n    // prepocitej vizualizaci a zavolej zoom\r\n    build.rescaleTimeline();\r\n    build.getElement(\"#timestamps\").call(context.axis);\r\n    build.getElement(\"#zoom\").call(context.zoom.transform,\r\n        d3.zoomIdentity\r\n        .scale((build.minimapW) / ((s[1]) - (s[0])))\r\n        .translate(-s[0], 0),\r\n        null,\r\n        event);\r\n}\r\n// zoom event callback\r\nfunction zoomed(event) { // zoom\r\n    if (event.sourceEvent && event.sourceEvent.type === \"brush\") return;\r\n    // nacti transformaci\r\n    let t = event.transform;\r\n    // spocitej zmenu\r\n    context.xt2.domain(t.rescaleX(context.xt).domain());\r\n    // uprav cesty\r\n    for(let child of build.getElement(\"#paths\").node().children)\r\n        build.getElement(child).attr(\"d\", context.area);\r\n    // posun co je treba\r\n    if (event.sourceEvent) {\r\n        let par = build.getElement(build.getElement(\"#timelines\").node().parentNode);\r\n        let y = Number(par.node().transform.baseVal.consolidate().matrix.f);\r\n        par.attr(\"transform\", `translate(0,${y + event.sourceEvent.movementY})`);\r\n    }\r\n    // prepocitej vizualizaci a zavolej brush\r\n    build.rescaleTimeline();\r\n    build.getElement(\"#timestamps\").call(context.axis);\r\n    build.getElement(\"#gb\").call(context.brush.move, context.xt.range().map(t.invertX, t).map(value => value + build.minimapX), event);\r\n}\r\n\r\n// vyber urcitou casovou osu\r\nfunction selectItem(event) {\r\n    // console.log(event);\r\n    const selIcon = build.getElement(\"#selected\");\r\n    if (selection === null)\r\n        selIcon.style(\"display\", \"inherit\")\r\n    selection = build.getElement(this.parentNode).node();\r\n    const nY = Number(selection.transform.baseVal.consolidate().matrix.f); // nova y souradnice\r\n    selIcon.attr(\"y\", `${nY - 30}`);\r\n}\r\n// zrus vyber\r\nfunction unselectItem() {\r\n    selection = null;\r\n    build.setStyle(\"#selected\",\"display\",\"none\");\r\n}\r\n\r\n// prohod dve skupiny v reprezentaci\r\nfunction swapGroups(idx, otherIdx) {\r\n    let clicked = context.activeOrder[idx];\r\n    let other = context.activeOrder[otherIdx];\r\n    let sel = selection ? selection.className.baseVal : undefined;\r\n    let clkedAIdx = context.active.findIndex(e => e.clsName === clicked);\r\n    let abvAIdx = context.active.findIndex(e => e.clsName === other);\r\n    // prohod dve casove osy\r\n    [context.active[clkedAIdx], context.active[abvAIdx]] = [context.active[abvAIdx], context.active[clkedAIdx]];\r\n    [context.activeOrder[idx], context.activeOrder[otherIdx]] = [context.activeOrder[otherIdx], context.activeOrder[idx]];\r\n    // prekresli\r\n    build.drawRes(order.makeView());\r\n    if (sel === clicked)\r\n        moveSelectionTo(clicked);\r\n    if (sel === other)\r\n        moveSelectionTo(other);\r\n}\r\n\r\n// pohnu uzlem, posunu ho o jednu nahoru v aktivnim listu, prekreslim\r\nfunction moveUp() {\r\n    let idx = context.activeOrder.findIndex(e => e === this.parentNode.className.baseVal);\r\n    if (idx !== 0)\r\n        swapGroups(idx, idx - 1);\r\n}\r\n\r\n// pohnu uzlem, posunu ho o jednu dolu v aktivnim listu, prekreslim\r\nfunction moveDown() {\r\n    let idx = context.activeOrder.findIndex(e => e === this.parentNode.className.baseVal);\r\n    if (idx !== context.active.length - 1)\r\n        swapGroups(idx, idx + 1);\r\n}\r\n\r\n// pohnu s vyberem linky\r\nfunction moveSelectionTo(clss) {\r\n    if (selection !== null)\r\n        build.getElement(`#emblems .${clss} .item`).dispatch(\"click\");\r\n}\r\n\r\n// vezme data z databufferu a zkusi je zobrazit\r\nfunction showPaths () {\r\n    context.updateScales();\r\n    build.drawRes(order.makeView());\r\n}\r\n\r\n// metoda hrube sily\r\nasync function calcBFShowPaths() {\r\n    order.bruteForceOrder(build);\r\n}\r\n\r\n// nahodne poradi\r\nasync function getRandomOrderShowPaths() {\r\n    let tmpCls = selection?.className.baseVal;\r\n    order.randomOrder(build);\r\n    if (tmpCls)\r\n        clickEmblemItem(tmpCls);\r\n}\r\n\r\n// frekvencni tabulka\r\nasync function calcFRQShowPaths() {\r\n    let tmpCls = selection?.className.baseVal;\r\n    order.frequencyTable(build);\r\n    if(tmpCls)\r\n        clickEmblemItem(tmpCls);\r\n}\r\n\r\n// silova metoda\r\nasync function calcFMShowPaths() {\r\n    let tmpCls = selection?.className.baseVal;\r\n    order.forceMethod(build);\r\n    if (tmpCls)\r\n        clickEmblemItem(tmpCls);\r\n}\r\n\r\n// automatické testovani / priklad vizualizace\r\nasync function autofill() {\r\n    const ids = [3,19,88,71,40,13,69,21];\r\n    const names = [\"Almendor\", \"Danérie\", \"Storabsko\", \"Podzemní říše\", \"Keledor\", \"Boševal\", \"Plavena\", \"Detreon\"];\r\n    for (let i = 0; i < names.length; i++) {\r\n        comm.searchItem.id = ids[i];\r\n        comm.searchItem.name = names[i];\r\n        await comm.fetchTags(names[i],[]);\r\n        await addPath();\r\n    }\r\n    comm.searchItem.id = -1;\r\n    comm.searchItem.name = \"\";\r\n}\r\n\r\n// callback pro kliknuti na emblem daneho prvku\r\nfunction clickEmblemItem(cls) {\r\n    build.getElement(`#emblems .${cls} .item`).dispatch(\"click\");\r\n}\r\n\r\n// ovladani klavesnice\r\nfunction keyboardControlDown(e) {\r\n    if (e.key === \"Shift\")\r\n        keys.shift = true;\r\n    if (e.key === \"Control\")\r\n        keys.ctrl = true;\r\n    if (e.key === \"ArrowUp\")\r\n        keys.up = true;\r\n    if (e.key === \"ArrowDown\")\r\n        keys.down = true;\r\n    if (e.key === \"a\")\r\n        keys.a = true;\r\n    if (e.key === \"d\")\r\n        keys.d = true;\r\n    if (e.key === \"Escape\")\r\n        keys.esc = true;\r\n\r\n    if (keys.esc && modalActive && build.getStyle(\"#content\",\"visibility\") === \"hidden\"){\r\n        closeModal();\r\n    }\r\n    else if (keys.esc && selection !== null && build.getStyle(\"#content\",\"visibility\") === \"hidden\") {\r\n        unselectItem();\r\n    }\r\n    if (keys.shift && keys.up && selection !== null && build.getStyle(\"#content\",\"visibility\") === \"hidden\") {\r\n        e.preventDefault();\r\n        build.getElement(selection).select(\".up\").dispatch(\"click\");\r\n    }\r\n    if (keys.shift && keys.down && selection !== null && build.getStyle(\"#content\",\"visibility\") === \"hidden\") {\r\n        e.preventDefault();\r\n        build.getElement(selection).select(\".down\").dispatch(\"click\");\r\n    }\r\n    if (keys.ctrl && keys.a) {\r\n        e.preventDefault();\r\n        activateModal();\r\n        showAdd();\r\n    }\r\n    if (keys.up && !keys.shift && selection !== null && build.getStyle(\"#content\",\"visibility\") === \"hidden\"){\r\n        e.preventDefault();\r\n        if (context.activeOrder.length) {\r\n            const sel = context.activeOrder.findIndex(e => e === selection.className.baseVal) - 1;\r\n            if (sel !== -1)\r\n                build.getElement(`#emblems .${context.activeOrder[sel]} .item`).dispatch(\"click\");\r\n        }\r\n    }\r\n    if (keys.up && !keys.shift && selection === null && build.getStyle(\"#content\",\"visibility\") === \"hidden\"){\r\n        e.preventDefault();\r\n        if (context.activeOrder.length) {\r\n            const sel = context.activeOrder.length - 1;\r\n            build.getElement(`#emblems .${context.activeOrder[sel]} .item`).dispatch(\"click\");\r\n        }\r\n    }\r\n    if (keys.down && !keys.shift && selection !== null && build.getStyle(\"#content\",\"visibility\") === \"hidden\"){\r\n        e.preventDefault();\r\n        if (context.activeOrder.length) {\r\n            const sel = context.activeOrder.findIndex(e => e === selection.className.baseVal) + 1;\r\n            if (sel !== context.activeOrder.length)\r\n                build.getElement(`#emblems .${context.activeOrder[sel]} .item`).dispatch(\"click\");\r\n        }\r\n    }\r\n    if (keys.down && !keys.shift && selection === null && build.getStyle(\"#content\",\"visibility\") === \"hidden\"){\r\n        e.preventDefault();\r\n        if (context.activeOrder.length) {\r\n            build.getElement(`#emblems .${context.activeOrder[0]} .item`).dispatch(\"click\");\r\n        }\r\n    }\r\n}\r\n\r\nfunction keyboardControlUp(e) {\r\n    if (e.key === \"Shift\")\r\n        keys.shift = false;\r\n    if (e.key === \"Control\")\r\n        keys.ctrl = false;\r\n    if (e.key === \"ArrowUp\")\r\n        keys.up = false;\r\n    if (e.key === \"ArrowDown\")\r\n        keys.down = false;\r\n    if (e.key === \"a\")\r\n        keys.a = false;\r\n    if (e.key === \"d\")\r\n        keys.d = false;\r\n    if (e.key === \"Escape\")\r\n        keys.esc = false;\r\n}\r\n\r\n// ovladani dropdown nabidky pri pridavani jednotlivych polozek\r\nfunction dropDownKeys (e){\r\n    e.preventDefault();\r\n    if (build.getElement(\".form_control\").node().value !== \"\" &&\r\n        (e.key === \"ArrowUp\" || e.key === \"ArrowDown\" || e.key === \"Enter\")) {\r\n        const list = build.getElement(\"#content\").node();\r\n        let sel = build.getElement(\"#content .searchSel\").node();\r\n        // console.log(sel);\r\n        if (e.key === \"ArrowUp\") {\r\n            // console.log(e.key);\r\n            if (!sel){\r\n                list.lastElementChild.attributes[\"class\"].value = \"searchSel\";\r\n            }\r\n            else {\r\n                sel.attributes[\"class\"].value = \"\";\r\n                if (sel.previousElementSibling)\r\n                    sel.previousElementSibling.attributes[\"class\"].value = \"searchSel\";\r\n                else\r\n                    list.lastElementChild.attributes[\"class\"].value = \"searchSel\";\r\n            }\r\n            sel = build.getElement(\"#content .searchSel\").node();\r\n            sel.scrollIntoView(true);\r\n        }\r\n        if (e.key === \"ArrowDown\") {\r\n            // console.log(e.key);\r\n            if (!sel){\r\n                list.firstElementChild.attributes[\"class\"].value = \"searchSel\";\r\n            }\r\n            else {\r\n                sel.attributes[\"class\"].value = \"\";\r\n                if (sel.nextElementSibling)\r\n                    sel.nextElementSibling.attributes[\"class\"].value = \"searchSel\";\r\n                else\r\n                    list.firstElementChild.attributes[\"class\"].value = \"searchSel\";\r\n            }\r\n            sel = build.getElement(\"#content .searchSel\").node();\r\n            sel.scrollIntoView(true);\r\n        }\r\n        if (e.key === \"Enter\") {\r\n            // console.log(e.key);\r\n            build.getElement(sel).dispatch(\"click\");\r\n            build.setStyle(\"#content\",\"visibility\", \"hidden\");\r\n        }\r\n    }\r\n}\r\n\r\n// nastartovani vsech podcasti - vykresleni, ziskani poradi barev, informaci o minimape, ...\r\nlet info = build.getMinimapInfo();\r\ncontext.shuffelColors();\r\n\r\ncontext.setBrush(info, brushed);\r\ncontext.setZoom(info, zoomed);\r\n\r\ncontext.axis.tickFormat((d) => {return dateUtils.getDateName(d)});\r\ncontext.updateBrushZoomAxis(info);\r\nbuild.getElement(\"#timestamps\").attr(\"transform\", `translate(0,${build.getElement(\".canvasDraw\").node().clientHeight - 160})`);\r\n","// trida ktera drzi zakladni potrebne informace\r\nimport dateUtils from \"./currentVer/DateUtils.js\";\r\n\r\nexport default class Context {\r\n    // FIXME musi byt spravna url\r\n    // url pro dotazovani\r\n    url = \"https://asteriontimelinesvisualisation.up.railway.app\";\r\n\r\n    // pole zatím získaných dat ze serverové části\r\n    data = [];\r\n    // aktuálně zobrazené osy, zaroven drzi poradi\r\n    active = [];\r\n    // aktualni poradi os z active tak jak je vykreslene\r\n    activeOrder = [];\r\n    // minimalni a maximalni datum\r\n    minDate = 0;\r\n    maxDate = 0;\r\n    // konstanty k lepsimu zamereni veskereho obsahu\r\n    lowerEnd = -100;\r\n    upperEnd = -50;\r\n\r\n    // predvybrana barevna paleta pro snadné rozliseni jednotlivych os\r\n    colorPallete = [\r\n        {color:\"#d25800\", users: 0},\r\n        {color:\"#09ff00\", users: 0},\r\n        {color:\"#0873b3\", users: 0},\r\n        {color:\"#ffcdaa\", users: 0},\r\n        {color:\"#b535ba\", users: 0},\r\n        {color:\"#00fffb\", users: 0},\r\n        {color:\"#ff0900\", users: 0},\r\n        {color:\"#fff200\", users: 0},\r\n        {color:\"#003500\", users: 0},\r\n        {color:\"#0000ff\", users: 0},\r\n        {color:\"#ff29ff\", users: 0},\r\n        {color:\"#8a9800\", users: 0},\r\n        {color:\"#009800\", users: 0},\r\n        {color:\"#dc0068\", users: 0},\r\n        {color:\"#fa8775\", users: 0},\r\n        {color:\"#a7cc82\", users: 0},\r\n        {color:\"#4b19a9\", users: 0},\r\n        {color:\"#c9a600\", users: 0},\r\n        {color:\"#29ade4\", users: 0},\r\n        {color:\"#a400ec\", users: 0},\r\n        {color:\"#38c66f\", users: 0},\r\n        {color:\"#d0ade7\", users: 0},\r\n        {color:\"#050067\", users: 0},\r\n        {color:\"#9b709a\", users: 0},\r\n        {color:\"#70ffb3\", users: 0},\r\n        {color:\"#ff9bff\", users: 0},\r\n        {color:\"#993f00\", users: 0},\r\n        {color:\"#bfb287\", users: 0},\r\n        {color:\"#92315b\", users: 0},\r\n        {color:\"#8c8c8c\", users: 0}\r\n    ];\r\n\r\n    // skalovnáni pro brush, domena je rozsah minDate - maxDate, range je rozsah 0 - width (minimapy)\r\n    xt = d3.scaleLinear();\r\n    // domena stejna, range je 0 az sirka plus upper end\r\n    xt2 = d3.scaleLinear();\r\n    // skalovani pro udalosti v minimape, vypocet aktualne zobrazovane casti os\r\n    area = d3.area();\r\n    // osy s datumy\r\n    axis = d3.axisBottom(this.xt2)\r\n        .ticks(15)\r\n        .tickSizeInner(-900)\r\n        .tickSizeOuter(0);\r\n    brush = undefined;\r\n    zoom = d3.zoom()\r\n        .scaleExtent([1, Infinity]);\r\n\r\n    // konstruktor tridy\r\n    constructor() {\r\n        this.area\r\n            .curve(d3.curveMonotoneX)\r\n            .x((d) => {return this.xt2(d.x)})\r\n            .y0(0)\r\n            .y((d) => {return(d.y)});\r\n    }\r\n\r\n    // prehozeni poradi v poli\r\n    shuffelArray(arr) {\r\n        let m = arr.length, i;\r\n        while (m) {\r\n            i = Math.floor(Math.random() * m--);\r\n            [arr[i], arr[m]] = [arr[m], arr[i]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    // zprehazeni elementu pole s barvami\r\n    shuffelColors() {\r\n        this.colorPallete = this.shuffelArray(this.colorPallete);\r\n    }\r\n\r\n    // zmena vsech dilcich casti pro spravne zobrazeni - rozsahy, brush, zoom, ...\r\n    updateScales() {\r\n        let bound = d3.select(\"#minimap_Bound\");\r\n        let dates = this.active.map((item) => item.events.map((event) => event.begin)).flat()\r\n            .sort((a,b) => a > b);\r\n        this.minDate = dates[0]\r\n        this.maxDate = dates[dates.length - 1];\r\n        this.xt.domain([this.minDate + this.lowerEnd,this.maxDate])\r\n            .range([0, Number(bound.attr(\"width\"))]);\r\n        this.xt2.domain(this.xt.domain())\r\n            .range([200,Number(d3.select(\".canvasDraw\").node().clientWidth) + this.upperEnd]);\r\n        d3.select(\"#start_time\").text(dateUtils.getDateName(this.minDate));\r\n        d3.select(\"#end_time\").text(dateUtils.getDateName(this.maxDate));\r\n        d3.select(\"#gb\")\r\n            .call(this.brush)\r\n            .call(this.brush.move, this.xt.range().map(value => value + Number(bound.attr(\"x\"))));\r\n        d3.select(\"#zoom\")\r\n            .call(this.zoom);\r\n        d3.select(\"#timestamps\")\r\n            .call(this.axis);\r\n    }\r\n\r\n    // nastaveni spravnych informaci pro brush\r\n    setBrush(info, brushed) {\r\n        this.brush = d3.brushX()\r\n            .extent([[info.x,4],[info.x + info.width,30]])\r\n            .on(\"brush\", brushed);\r\n\r\n        d3.select(\"#gb\")\r\n            .call(this.brush)\r\n            .call(this.brush.move, this.xt.range().map(value => value + info.x));\r\n    }\r\n\r\n    // nastaveni zoom na spravne hodnoty\r\n    setZoom(info, zoomed) {\r\n        let trextent = [[0,0],[info.width,d3.select(\".canvasDraw\").node().clientHeight]];\r\n        this.zoom\r\n            .extent(trextent)\r\n            .translateExtent(trextent)\r\n            .on(\"zoom\", zoomed);\r\n\r\n        d3.select(\"#zoom\")\r\n            .attr(\"width\", d3.select(\".canvasDraw\").node().clientWidth - 200)\r\n            .attr(\"height\", d3.select(\".canvasDraw\").node().clientHeight)\r\n            .attr(\"transform\", \"translate(\" + 200 + \",\" + 0 + \")\")\r\n            .call(this.zoom);\r\n    }\r\n\r\n    // aktualizace brush a zoom pro zmene okna s vizualizaci\r\n    updateBrushZoomAxis(info){\r\n        let trextent = [[0,0],[info.width,d3.select(\".canvasDraw\").node().clientHeight]];\r\n        this.brush.extent([[info.x,4],[info.x + info.width,30]]);\r\n        d3.select(\"#zoom\")\r\n            .attr(\"width\", d3.select(\".canvasDraw\").node().clientWidth - 200)\r\n            .attr(\"height\", d3.select(\".canvasDraw\").node().clientHeight);\r\n        this.zoom\r\n            .extent(trextent)\r\n            .translateExtent(trextent);\r\n        this.axis.tickSizeInner(-d3.select(\".canvasDraw\").node().clientHeight + 230);\r\n    }\r\n\r\n    // kontrola volnych barev, tak aby se vzdy vybrala nektera z volnych\r\n    getNextFreeColor() {\r\n        for(let color of this.colorPallete) {\r\n            if (!color.users) {\r\n                color.users++\r\n                return color.color;\r\n            }\r\n        }\r\n        let col = d3.select(\"#edit_color\").node().value;\r\n        this.setColor(col);\r\n        return col;\r\n    }\r\n\r\n    // nastav urcitou barvu\r\n    setColor(color) {\r\n        let idx = this.colorPallete.findIndex(e => e.color === color);\r\n        if (idx !== -1)\r\n            this.colorPallete[idx].users++;\r\n    }\r\n\r\n    // zrus urcitou barvu\r\n    unsetColor(color) {\r\n        let idx = this.colorPallete.findIndex(e => e.color === color);\r\n        if (idx !== -1) {\r\n            this.colorPallete[idx].users--;\r\n            if (this.colorPallete[idx].users < 0)\r\n                this.colorPallete[idx].users = 0;\r\n        }\r\n    }\r\n\r\n    // vymen barvy u jednoho prvku\r\n    changeColor(oldColor, newColor) {\r\n        this.unsetColor(oldColor);\r\n        this.setColor(newColor);\r\n    }\r\n\r\n    // odstran vsechno z aktivniho listu\r\n    removeAll() {\r\n        if (this.active.length > 0) {\r\n            this.active = [];\r\n            this.colorPallete.forEach(el => el.users = 0);\r\n        }\r\n    }\r\n\r\n    // odstran vybrany prvek z aktviniho listu\r\n    removeSelected(item) {\r\n        if (item) {\r\n            let idx = this.active.findIndex(e => e.clsName === item);\r\n            this.active.splice(idx,1);\r\n        }\r\n    }\r\n}","import * as inter from \"./intersections.js\";\r\n\r\nexport default class Order {\r\n    // od kdy se zacne jedno osa priblizovat k druhe, nebo jedna oddalovat od druhe\r\n    pathShift = 50;\r\n    // rozdil mezi umistenim os\r\n    diff = 150;\r\n    //\r\n    connShift = 25;\r\n    // minimalni datum\r\n    min = 0;\r\n    // maximalni datum\r\n    max = 0;\r\n    // zatim budou take nekonecne vsechny, TODO: dodelat metody makePathI... makePathOther\r\n    extend = 30000;\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n    }\r\n\r\n    // vrat element, ktery byl umisten jako prvni do vizualizace\r\n    getMinIdxFrom(common, placedCommon) {\r\n        return placedCommon.indexOf(common.reduce((prev, curr) => {\r\n            let prevI = placedCommon.indexOf(prev);\r\n            let currI = placedCommon.indexOf(curr);\r\n            let res;\r\n            if (prevI === -1 && currI === -1)\r\n                res = prev;\r\n            else if (prevI !== -1 && currI === -1 || prevI === -1 && currI !== -1)\r\n                res = (prevI === -1) ? curr : prev;\r\n            else\r\n                res = (prevI < currI) ? prev : curr;\r\n            return res;\r\n        }));\r\n    }\r\n\r\n    // Z dat typu predmet osobnost zvire udela specialne cesty\r\n    makePathItemPerson() {\r\n\r\n    }\r\n    // pro vsechny ostatni tagy\r\n    makePathOther() {\r\n\r\n    }\r\n\r\n    // vytvor osu na zaklade udalosti, ktere se na ni odehravaji a jejich souvislosti s ostatnimi osami\r\n    makePathEvents(item, levels, names, start, datum, events, commonEvents) {\r\n        // projdi vsechny udalosti dane osy\r\n        for (let event of item.events) {\r\n            // zjisti s kym souvisi a jeste neni umisten\r\n            let common = event.filters.map((item) => item.name);\r\n            // souvisi s temito umistenymi\r\n            let placedCommon = levels.map((item) => item.name);\r\n            // minimalni index, ke kteremu se priblizi dana osa ve zkoumane udalosti\r\n            let minIdx = this.getMinIdxFrom(common, placedCommon);\r\n            // vytvor prislusny event\r\n            let tmpEv = {\r\n                id: event.id,\r\n                name: event.name,\r\n                desc: event.description,\r\n                icon: event.icon.path,\r\n                filters: common,\r\n                cls: item.name,\r\n                bck_x: event.begin,\r\n                y: undefined\r\n            }\r\n            // sdili nekdo kdo uz je umisten tuto udalost? A nekdo z cekajicich? NE| nikdo z umistenych ani cekajicich ji nema\r\n            if (common.some(r => placedCommon.indexOf(r) >= 0)) {\r\n                // delka dane udalosti\r\n                let dur = event.end !== undefined ? event.end - event.begin : 1;\r\n                // kterym smerem je nutne poslat osu\r\n                let dir = (levels[minIdx].start > start ? -1 : 1);\r\n                // zkonstruuj oblouk\r\n                datum.push(\r\n                    {x: event.begin - this.pathShift, y: start},\r\n                    {x: event.begin, y: levels[minIdx].start + dir * this.connShift},\r\n                    {x: event.begin + dur, y: levels[minIdx].start + dir * this.connShift},\r\n                    {x: event.begin + dur + this.pathShift, y: start});\r\n                // uprav konec a zacatek osy\r\n                if (event.begin + this.pathShift > this.max)\r\n                    this.max = event.begin + this.pathShift;\r\n                if (event.begin - this.pathShift < this.min)\r\n                    this.min = event.begin - this.pathShift;\r\n                // pri umisteni udalosti bude jine y, protoze uz ji nekdo se mnou sdili a ja se musim dostat k nemu\r\n                if ((!common.some(r => names.indexOf(r) >= 0))) {\r\n                    let yShift = levels[minIdx].start + ((dir === -1) ? dir * this.connShift * 3 : this.connShift);\r\n                    let res = commonEvents.find((el) => el.x === tmpEv.begin && el.y === yShift && el.id !== event.id);\r\n                    tmpEv.y = yShift;\r\n                    if (res === undefined)\r\n                        commonEvents.push({x:event.begin, y:yShift, eventlist:[tmpEv]});\r\n                    else\r\n                        res.eventlist.push(tmpEv);\r\n                }\r\n            }\r\n            else {// nic spolecneho\r\n                // pokud neni zadny dalsi spolecny umisti, jinak nech na dalsim\r\n                if (!common.some(r => names.indexOf(r) >= 0)) {\r\n                    tmpEv.y = start - this.connShift;\r\n                    events.push(tmpEv);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n// vezme predavana data a udela prubeh cesty pro jednotlive osy, pokud maji alespon nejake udalosti\r\n    makeView() {\r\n        // pole udalosti\r\n        let events = [];\r\n        // pole urovni jednotlivych casovych os\r\n        let levels = [];\r\n        // kde se ma zacit\r\n        let start = d3.select(\".canvasDraw\").node().clientHeight / 2;\r\n        // spolecne udalosti\r\n        let commonEvents = [];\r\n        // poradi pro prohazovani os\r\n        this.context.activeOrder = [];\r\n        // seznam jmen os, ktere se budou vykreslovat\r\n        let names = this.context.active.map((item) => item.name);\r\n        // projdi vsechy aktivni osy\r\n        for (let [idx,item] of this.context.active.entries()) {\r\n            // zjisti zacatky a konce\r\n            this.min = this.context.minDate - this.pathShift;\r\n            this.max = this.context.maxDate + this.pathShift;\r\n            // odstran z cekajicich na zpracovani\r\n            names.splice(names.indexOf(item.name), 1);\r\n            // kde bude dana osa zacinat?\r\n            start += (((idx % 2) === 0) ? idx : -idx) * this.diff;\r\n            // pridej danou osu do pole na prohazovani\r\n            (idx % 2) === 0 ? this.context.activeOrder.push(item.clsName) : this.context.activeOrder.unshift(item.clsName);\r\n            // urci pocatecni bod casove osy\r\n            let datum = [{x: this.min - this.extend, y: start}];\r\n            // projdi eventy a zjisti jak je spravne umistit\r\n            this.makePathEvents(item, levels, names, start, datum, events, commonEvents);\r\n            // vloz posledni bod casove osy\r\n            datum.push({x: this.max + this.extend, y: start});\r\n            // uloz vsechny dulezite casti do levels\r\n            levels.push({name: item.name, clsName: item.clsName, start: start, datum: datum, color: item.color, imgPath:item.iconPath});\r\n        }\r\n        return {paths: levels, events: events, commonEvents: commonEvents};\r\n    }\r\n//----------------------------------------------------------------------------------------------------------------------\r\n    // metoda pro nahodne poradi os\r\n    randomOrder(b) {\r\n        this.context.updateScales();\r\n        const entriesCount = this.context.active.length;\r\n        let idxs = [...Array(entriesCount).keys()];\r\n        idxs = this.context.shuffelArray(idxs);\r\n        this.context.active = idxs.map(i => this.context.active[i]);\r\n        b.drawRes(this.makeView());\r\n    }\r\n//----------------------------------------------------------------------------------------------------------------------\r\n    // vezme pole indexu a vrati vsechny mozne permutace\r\n    permutate(idxArray, idxCount) {\r\n        let c = new Array(idxCount).fill(0);\r\n        let res = [[...idxArray]];\r\n        let i = 1;\r\n        while (i < idxCount) {\r\n            if (c[i] < i) {\r\n                if (i % 2 === 0)\r\n                    [idxArray[0], idxArray[i]] = [idxArray[i], idxArray[0]];\r\n                else\r\n                    [idxArray[c[i]], idxArray[i]] = [idxArray[i], idxArray[c[i]]];\r\n                res.push([...idxArray]);\r\n                c[i]++;\r\n                i = 1;\r\n            } else {\r\n                c[i] = 0;\r\n                i++;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    // spocti kolik maji zadane osy pruseciku\r\n    getNumberOfIntersection(data) {\r\n        let paths = data.map(item => item.datum);\r\n        let pairs = [];\r\n        let numInt = 0;\r\n        // ziskej vsechny dvojice\r\n        for (let i = 0; i < paths.length; i++)\r\n            for (let j = i + 1; j < paths.length; j++)\r\n                pairs.push([i,j]);\r\n        // spocitej vsechny pruseciky\r\n        for (let [i,j] of pairs){\r\n            let res = inter.intersect(inter.shape(\"path\", {d: this.context.area(paths[i])}),\r\n                inter.shape(\"path\", {d: this.context.area(paths[j])}));\r\n            numInt += res.points.length;\r\n        }\r\n        return numInt;\r\n    }\r\n\r\n    // metoda pro zjisteni optimalniho poradi os, brute force verze\r\n    bruteForceOrder(b) {\r\n        this.context.updateScales();\r\n        const entriesCount = this.context.active.length;\r\n        const idxs = [...Array(entriesCount).keys()];\r\n        const permutations = this.permutate(idxs, entriesCount);\r\n        // obsahuje nejlepsi permutaci v poctu krizeni\r\n        let bestPerm = undefined;\r\n        // zjisti ktera permutace ma nejmene pruniku\r\n        for (let perm of permutations) {\r\n            // mam nove poradi\r\n            this.context.active = perm.map(r => this.context.active[r]);\r\n            // zjisti prubeh cest pro dane poradi\r\n            let tmpPaths = this.makeView(this.context.active);\r\n            // zjisti # pruseciku pro aktualni prubehy\r\n            let numInt = this.getNumberOfIntersection(tmpPaths.paths);\r\n            // console.log(perm, numInt);\r\n            // urci novnou nejlepsi permutaci nebo zachovej puvodni\r\n            if (bestPerm === undefined || bestPerm.numInt > numInt)\r\n                bestPerm = {numInt: numInt, perm: perm, res: tmpPaths};\r\n        }\r\n        // zprehazej osy\r\n        this.context.active = bestPerm.perm.map(r => this.context.active[r]);\r\n        // vykresli\r\n        b.drawRes(bestPerm.res);\r\n    }\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\n    // vytvor vztahy mezi osami\r\n    getEdges(filtEvents, names) {\r\n        // vysledne hrany\r\n        let edges = []\r\n        // projdi udalosti\r\n        filtEvents.forEach( event => {\r\n            let filters = event.filters.map( item => item.name);\r\n            // projdi filtry a vytvor spojnice\r\n            filters.forEach( (source) => {\r\n                filters.forEach( (target) => {\r\n                    if (source !== target && names.indexOf(source) !== -1 && names.indexOf(target) !== -1) {\r\n                        edges.push({\"source\":names.indexOf(source), \"target\":names.indexOf(target)});\r\n                    }\r\n                })\r\n            })\r\n        });\r\n        return edges;\r\n    }\r\n\r\n    // ziskej vsechny eventy a nech za kazdy duplicitni jen jeden\r\n    getEvents(buffer) {\r\n        let events = buffer.map(r => r.events).flat();\r\n        events = events.filter((value, index, self) => index === self.findIndex(\r\n            (t) => t.place === value.place && t.id === value.id));\r\n        return events;\r\n    }\r\n\r\n    // vytvor frekvencni tabulku\r\n    makeFrequencyTable(names) {\r\n        // data frekvenci vyskytu\r\n        let freqData = [];\r\n        // ziskej vsechny eventy\r\n        let filtEvents = this.getEvents(this.context.active);\r\n        // vytvor frekvencni tabulku pro dane osy\r\n        this.context.active.forEach((item) => freqData.push({\"idx\": this.context.active.indexOf(item), \"freq\": Array(names.length + 1).fill(0)}));\r\n        // najdi spojeni os\r\n        let edges = this.getEdges(filtEvents, names);\r\n        // spocitej frekvence\r\n        edges.forEach(item => {freqData[item.source].freq[item.target]++; freqData[item.target].freq[names.length]++});\r\n        return freqData;\r\n    }\r\n\r\n    // frekvencni metoda\r\n    frequencyTable(b) {\r\n        // zaktualizuj rozsahy\r\n        this.context.updateScales();\r\n        // console.log(this.context.active);\r\n        // nacti jmena\r\n        const names = this.context.active.map((item) => item.name);\r\n        // pole 2d s nulami, v datech a jmena budou jmena z this.context.active\r\n        let freqData = this.makeFrequencyTable(names);\r\n        // serazeni vysledne tabulky\r\n        freqData.sort((a,b) => {\r\n            if (a.freq[names.length] < b.freq[names.length])\r\n                return 1;\r\n            else if (a.freq[names.length] === b.freq[names.length]) {\r\n                for (let idx = 0; idx < names.length; idx++)\r\n                    if (a.freq[idx] !== b.freq[idx] && freqData.indexOf(a) !== idx && freqData.indexOf(b) !== idx)\r\n                        return a.freq[idx] > b.freq[idx];\r\n            }\r\n            else\r\n                return -1\r\n        });\r\n        // vytvor nove poradi a aplikuj ho\r\n        const order = freqData.map( (item) => item.idx);\r\n        this.context.active = order.map(i => this.context.active[i]);\r\n        // zjisti prubeh cest pro dane poradi a vykresli\r\n        b.drawRes(this.makeView());\r\n    }\r\n//----------------------------------------------------------------------------------------------------------------------\r\n    // vrat nahodne cislo mezi min a max\r\n    getRndNumber(min, max) {\r\n        return Math.random() * (max - min + 1) + min;\r\n    }\r\n    // https://observablehq.com/@ben-tanen/a-tutorial-to-using-d3-force-from-someone-who-just-learned-ho\r\n\r\n    // pomocna funkce pro vizualizaci prace silove metody\r\n    drawNodes = (svg, node_data, edge_data) => {\r\n        let edge = null;\r\n        if (edge_data) {\r\n            edge = svg.selectAll(\".edge\")\r\n                .data(edge_data).enter()\r\n                .append(\"line\")\r\n                .classed(\"edge\", true)\r\n                .attr(\"x1\", d => node_data[d.source].x)\r\n                .attr(\"y1\", d => node_data[d.source].y)\r\n                .attr(\"x2\", d => node_data[d.target].x)\r\n                .attr(\"y2\", d => node_data[d.target].y)\r\n                .style(\"stroke\", \"#bbb\");\r\n        }\r\n\r\n        const node = svg.selectAll(\".node\")\r\n            .data(node_data).enter()\r\n            .append(\"circle\")\r\n            .classed(\"node\", true)\r\n            .attr(\"cx\", d => d.x)\r\n            .attr(\"cy\", d => d.y)\r\n            .attr(\"r\", \"10\");\r\n\r\n        return [node, edge];\r\n    }\r\n\r\n    //https://stackoverflow.com/questions/13463053/calm-down-initial-tick-of-a-force-layout\r\n    //https://www.airpair.com/javascript/posts/d3-force-layout-internals\r\n    //https://stackoverflow.com/questions/39379299/how-do-you-customize-the-d3-link-strength-as-a-function-of-the-links-and-nodes-c\r\n    //https://stackoverflow.com/questions/14407069/how-find-out-if-force-layout-done-placing-the-nodes\r\n    // autolayout,layered digraph layout, silova metoda s vyuzitim knihovny d3\r\n    forceMethod(b) {\r\n        // aktualizace rozmeru\r\n        this.context.updateScales();\r\n        // ziskej pritomne osy\r\n        const names = this.context.active.map((item) => item.name);\r\n        // jednotlive osy jako uzly\r\n        let nodes = [];\r\n        // vytvor reprezentaci uzlu\r\n        names.forEach(item => nodes.push({\"id\":item.index, \"x\": 150, \"y\":this.getRndNumber(200,600)}));\r\n        // ziskej zaklad techto uzlu\r\n        let freqData = this.makeFrequencyTable(names);\r\n        // spojnice mezi uzly\r\n        let links = [];\r\n        for (let i = 0; i < names.length; i++) {\r\n            for (let j = i + 1; j < names.length; j++) {\r\n                if (freqData[i].freq[j])\r\n                    links.push({source: i, target: j, weight: freqData[i].freq[j]});\r\n            }\r\n        }\r\n        // urci vahy jednotlivych spoju\r\n        let weightScale = d3.scaleLinear()\r\n            .domain(d3.extent(links,  (d) => { return d.weight }))\r\n            .range([.1, 1])\r\n        // zacni simulaci\r\n        d3.forceSimulation().nodes(nodes)\r\n            .force(\"link\",d3.forceLink(links).strength((e) => weightScale(e.weight)).distance(0))\r\n            .force(\"x\", d3.forceX(150))\r\n            .force(\"collide\", d3.forceCollide().radius(10))\r\n            .force(\"charge\", d3.forceManyBody().strength(1))\r\n            .on(\"end\", () => { // po skonceni udelej nasledujici\r\n                // serad uzly dle y\r\n                nodes.sort((a,b) => a.y - b.y);\r\n                // ziskej dane poradi\r\n                const order = nodes.map(item => item.index);\r\n                // na jeho zaklade uprav aktivni uzly\r\n                this.context.active = order.map(i => this.context.active[i]);\r\n                // zjisti prubeh cest pro dane poradi a vykresli\r\n                b.drawRes(this.makeView());\r\n            });\r\n    }\r\n}\r\n","// trida pro vystvabu cele stranky plus zmeny a aktualizace\r\n// utilita z bp Zimmermanova - prepocet pozice na casovou znacku\r\nimport dateUtils from \"./currentVer/DateUtils.js\";\r\n\r\nexport default class Build {\r\n    // minimalni velikost obrazku udalosti\r\n    minWidthEvent = 50;\r\n    //konstruktor tridi build\r\n    constructor(context, order) {\r\n        this.context = context;\r\n        this.order = order;\r\n        this.header = document.createElement(\"div\");\r\n        this.minimap = document.createElement(\"div\");\r\n        this.canvas = document.createElement(\"div\");\r\n        this.modal_menu = document.createElement(\"div\");\r\n        this.footer = document.createElement(\"div\");\r\n        this.viz = document.createElement(\"div\");\r\n\r\n        // zmena velikosti okna s vizualizaci\r\n        window.addEventListener(\"resize\", () => {\r\n            let tmp = d3.select(\".minimapDraw\");\r\n            tmp.remove(tmp.firstElementChild);\r\n            this.buildMinimap();\r\n            if (context.active.length > 0) {\r\n                this.context.updateBrushZoomAxis(this.getMinimapInfo());\r\n                this.context.updateScales();\r\n                d3.select(\"#timestamps\").attr(\"transform\", `translate(0,${d3.select(\".canvasDraw\").node().clientHeight - 160})`);\r\n                this.drawRes(this.order.makeView());\r\n            }\r\n            this.moveButtons();\r\n        });\r\n\r\n        // vytvoreni cele vizualizace, zatim jen virtualne\r\n        this.buildViz();\r\n        // pripojeni vizualizace do okna prohlizece\r\n        document.body.append(this.viz);\r\n        // prepocitani pozice tlacitek pro pridani/odebrani\r\n        this.moveButtons();\r\n        // nacteni velikosti\r\n        this.minimapX = Number(d3.select(\"#minimap_Bound\").attr(\"x\"));\r\n        this.minimapW = Number(d3.select(\"#minimap_Bound\").attr(\"width\"));\r\n    }\r\n\r\n    // vraci x a width minimapy\r\n    getMinimapInfo() {\r\n        let tmp = d3.select(\".minimapDraw #minimap_Bound\");\r\n        this.minimapX = Number(tmp.attr(\"x\"));\r\n        this.minimapW = Number(tmp.attr(\"width\"));\r\n        return {x:Number(tmp.attr(\"x\")), width: Number(tmp.attr(\"width\"))};\r\n    }\r\n\r\n    //------------------------------------------------------------------\r\n    //------------------build-whole-viz---------------------------------\r\n    // postav hlavni element vizualizace, div kontejner s jednotlivymi podcastmi\r\n    buildViz() {\r\n        // pridej atributy\r\n        d3.select(this.viz).attr(\"id\", \"viz\");\r\n        // postav a pridej header\r\n        this.buildHeader();\r\n        this.viz.append(this.header);\r\n        // postav a pridej minimapu\r\n        this.buildMinimap();\r\n        this.viz.append(this.minimap);\r\n        // postav a pridej platno\r\n        this.buildCnvs();\r\n        this.viz.append(this.canvas);\r\n        // postav a pridej modal menu\r\n        this.buildModal();\r\n        this.viz.append(this.modal_menu);\r\n        // postav a pridej konec\r\n        this.buildFooter();\r\n        this.viz.append(this.footer);\r\n    }\r\n\r\n    // vytvor zahlavi\r\n    buildHeader() {\r\n        d3.select(this.header).attr(\"id\", \"header\");\r\n        const title = d3.select(this.header).append(\"div\");\r\n        title.attr(\"class\", \"title\")\r\n            .append(\"h1\")\r\n            .text(\"Asterion Timelines\");\r\n        const links = d3.select(this.header).append(\"div\");\r\n        links.attr(\"class\", \"links\");\r\n        // links.append(\"a\")\r\n        //     .text(\"Upravit\");\r\n        links.append(\"a\")\r\n            .attr(\"href\", \"./help.html\")\r\n            .append(\"img\")\r\n                .attr(\"src\", require(\"./img/help.png\"));\r\n        links.append(\"a\")\r\n            .attr(\"href\", \"https://discord.com/invite/vAzSaYc\")\r\n            .append(\"img\")\r\n                .attr(\"src\", require(\"./img/discord.png\"));\r\n        links.append(\"a\")\r\n            .attr(\"href\", \"https://asterionrpg.cz/\")\r\n            .append(\"img\")\r\n                .attr(\"src\", require(\"./img/asterionrpg.png\"));\r\n    }\r\n\r\n    // vytvor minimapu\r\n    buildMinimap() {\r\n        d3.select(this.minimap).attr(\"class\", \"minimap\");\r\n        let starttime = this.BrowserText.getWidth(dateUtils.getDateName(0), 16 ,\"Arial Black\")/3;\r\n        let endtime = this.BrowserText.getWidth(dateUtils.getDateName(3699999), 16 ,\"Arial Black\")/3;\r\n        const focus_begin = 0.12 * window.innerWidth;\r\n        const boundWidth = 0.76 * window.innerWidth;\r\n        // const dateWidth = 0.15 * (window.innerWidth - boundWidth)/2;\r\n        const dateWidth = (window.innerWidth - boundWidth)/4;\r\n        const yDatePosition = 65;\r\n        // console.log(dateWidth);\r\n        const svg = d3.select(this.minimap)\r\n            .append(\"svg\")\r\n            .attr(\"class\", \"minimapDraw\");\r\n        svg.append(\"text\")\r\n            .attr(\"id\", \"start_time\")\r\n            .attr(\"x\", `${dateWidth - starttime}`)\r\n            .attr(\"y\", `${yDatePosition}%`)\r\n            .text(dateUtils.getDateName(0));\r\n        svg.append(\"rect\")\r\n            .attr(\"id\", \"minimap_Bound\")\r\n            .attr(\"x\", `${focus_begin}`)\r\n            .attr(\"y\",\"5\")\r\n            .attr(\"height\", \"25\")\r\n            .attr(\"width\", `${boundWidth}`);\r\n        svg.append(\"text\")\r\n            .attr(\"id\", \"end_time\")\r\n            .attr(\"x\", `${focus_begin + boundWidth + dateWidth - endtime}`)\r\n            .attr(\"y\", `${yDatePosition}%`)\r\n            .text(dateUtils.getDateName(3699999));\r\n        svg.append(\"g\")\r\n            .attr(\"id\", \"gb\");\r\n    }\r\n\r\n    // vytvor hlavni zobrazovaci plochu\r\n    buildCnvs() {\r\n        d3.select(this.canvas)\r\n            .attr(\"class\", \"canvas\");\r\n        const svg = d3.select(this.canvas)\r\n            .append(\"svg\")\r\n            .attr(\"class\", \"canvasDraw\")\r\n            .attr(\"height\", \"100%\")\r\n            .attr(\"width\", \"100%\");\r\n        svg.append(\"rect\")\r\n            .attr(\"id\", \"zoom\");\r\n        svg.append(\"g\")\r\n            .attr(\"id\", \"timestamps\")\r\n            .attr(\"transform\", \"translate(0,960)\");\r\n        const cnvs = svg.append(\"g\").attr(\"transform\", \"translate(0,0)\");\r\n        let tmp = cnvs.append(\"g\").attr(\"id\", \"timelines\");\r\n        tmp = tmp.append(\"g\").attr(\"id\", \"timeline_els\");\r\n        tmp.append(\"g\").attr(\"id\", \"paths\");\r\n        cnvs.append(\"rect\")\r\n            .attr(\"id\", \"lampshade\")\r\n            .attr(\"x\", \"0\")\r\n            .attr(\"y\", \"-2000\")\r\n            .attr(\"height\", \"900%\")\r\n            .attr(\"width\", \"200\");\r\n        cnvs.append(\"image\")\r\n            .attr(\"id\", \"selected\")\r\n            .attr(\"x\", \"40\")\r\n            .attr(\"y\", \"0\")\r\n            .attr(\"width\", \"100\")\r\n            .attr(\"height\", \"100\")\r\n            .attr(\"href\", require(\"./img/selection.png\"));\r\n        cnvs.append(\"g\")\r\n            .attr(\"id\", \"emblems\")\r\n            .attr(\"transform\", \"translate(90,-50)\");\r\n\r\n        this.addButtonCnvs(svg, 0, \"add\", require(\"./img/add.png\"), 60, 10, \"Přidej\", \"příběh\", 10);\r\n        this.addButtonCnvs(svg, 100, \"remove\", require(\"./img/delete.png\"), 60, 110, \"Smaž\", \"vše\", 125);\r\n    }\r\n\r\n    // pridej svg tlacitko do hlavni zobrazovaci plochy\r\n    addButtonCnvs(to,xCoord, groupId, img, imgWidth, imgX, textA, textB, textX) {\r\n        let button = to.append(\"g\")\r\n            .attr(\"id\", groupId);\r\n        button.append(\"rect\")\r\n            .attr(\"width\",\"100\")\r\n            .attr(\"height\", \"100\")\r\n            .attr(\"x\", xCoord)\r\n            .attr(\"y\", \"0\");\r\n        button.append(\"image\")\r\n            .attr(\"href\", img)\r\n            .attr(\"width\", imgWidth)\r\n            .attr(\"y\", \"5\")\r\n            .attr(\"x\", imgX);\r\n        button.append(\"text\")\r\n            .text(textA)\r\n            .attr(\"y\", \"65\")\r\n            .attr(\"x\", textX);\r\n        button.append(\"text\")\r\n            .text(textB)\r\n            .attr(\"y\", \"90\")\r\n            .attr(\"x\", textX);\r\n    }\r\n\r\n    // pridej tlacitko do modalniho okna\r\n    addButtonModal(to, clss, text) {\r\n        to.append(\"button\")\r\n            .attr(\"class\", clss)\r\n            .text(text);\r\n    }\r\n\r\n    // vytvor modalni okno pro pridavani os\r\n    buildModal() {\r\n        const content = d3.select(this.modal_menu).attr(\"id\", \"modal_menu\").append(\"div\").attr(\"class\", \"content\");\r\n        let tmp = content.append(\"div\")\r\n            .attr(\"id\", \"buttons\");\r\n        this.addButtonModal(tmp, \"close\", \"X\");\r\n        const tabs = content.append(\"div\")\r\n            .attr(\"class\", \"tabs\");\r\n        tmp = tabs.append(\"div\")\r\n            .attr(\"id\", \"modal_add\");\r\n        tmp.append(\"p\").text(\"Vyhledávání časových os:\");\r\n        let form = tmp.append(\"div\").attr(\"class\", \"dropdown\");\r\n        form.append(\"input\")\r\n            .attr(\"class\", \"form_control\")\r\n            .attr(\"type\", \"text\")\r\n            .attr(\"value\", \"\")\r\n            .attr(\"placeholder\", \"Začněte psát\");\r\n        form.append(\"ul\")\r\n            .attr(\"id\", \"content\")\r\n            .style(\"visibility\", \"hidden\");\r\n        tmp.append(\"button\")\r\n            .attr(\"id\", \"add_confirm\")\r\n            .text(\"Přidat osu\");\r\n        tmp.append(\"button\")\r\n            .attr(\"id\", \"add_example\")\r\n            .text(\"Ukázka časových os\");\r\n        tmp.append(\"button\")\r\n            .attr(\"id\", \"frequency\")\r\n            .text(\"Frekvenční metoda\");\r\n        tmp.append(\"button\")\r\n            .attr(\"id\", \"force\")\r\n            .text(\"Silova metoda\");\r\n        tmp.append(\"button\")\r\n            .attr(\"id\", \"random_order\")\r\n            .text(\"Náhodné pořadí\");\r\n    }\r\n\r\n    // vytvor zapati s prislusnymi informacemi\r\n    buildFooter() {\r\n        const date = new Date();\r\n        d3.select(this.footer).attr(\"id\",\"footer\");\r\n        d3.select(this.footer).append(\"p\")\r\n            .text(`2021 - ${date.getFullYear()} ©`)\r\n            .append(\"a\")\r\n            .attr(\"href\", \"./about.html\")\r\n            .text(\"O nás\")\r\n    }\r\n\r\n    // prepocitej pozici tlacitek\r\n    moveButtons() {\r\n        let y = d3.select(this.canvas).node().clientHeight;\r\n        let node = d3.select(\"#add\");\r\n        node.attr(\"transform\", `translate(0,${y - node.node().firstChild.attributes[\"height\"].value})`)\r\n        node = d3.select(\"#remove\");\r\n        node.attr(\"transform\", `translate(0,${y - node.node().firstChild.attributes[\"height\"].value})`)\r\n    }\r\n\r\n    //--------------------------------------------------------------------------------------------\r\n    //--------------------------Draw-timelines----------------------------------------------------\r\n    // pridej zadany obrazek ke skupine g na urcitych souradnicich\r\n    addImg(g, cls, imgPath, x, y, h, w, transf) {\r\n        const newImg = g.append(\"image\")\r\n            .attr(\"class\", cls)\r\n            .attr(\"href\", imgPath)\r\n            .attr(\"x\",x)\r\n            .attr(\"y\",y)\r\n            .attr(\"height\", h)\r\n            .attr(\"width\", w);\r\n        if (transf !== undefined)\r\n            newImg.attr(\"transform\", transf);\r\n    }\r\n\r\n    // prenastav osu v item na zadane parametry\r\n    setPath(item, datum, cls, color) {\r\n        item.datum(datum)\r\n            .attr(\"class\", cls)\r\n            .attr(\"stroke\", color)\r\n            .attr(\"d\", this.context.area);\r\n    }\r\n\r\n    // pridej/zmen/odstran casove osy tak, aby se setrilo vytvareni novych prvku a mazani starych\r\n    fillPaths(list, data) {\r\n        let child = list.node() !== null ? list.node().firstElementChild : null;\r\n        let i = 0;\r\n        for (i; i < data.length; i++) {\r\n            if (child !== null) {\r\n                this.setPath(d3.select(child), data[i].datum, data[i].clsName, data[i].color);\r\n                child = child.nextElementSibling;\r\n                this.setPath(d3.select(child), [data[i].datum[0], data[i].datum[data[i].datum.length - 1]],\r\n                    data[i].clsName + \" sec_path\", data[i].color);\r\n                child = child.nextElementSibling;\r\n            } else {\r\n                this.setPath(list.append(\"path\"), data[i].datum, data[i].clsName, data[i].color);\r\n                this.setPath(list.append(\"path\"), [data[i].datum[0], data[i].datum[data[i].datum.length - 1]],\r\n                    data[i].clsName + \" sec_path\", data[i].color);\r\n            }\r\n        }\r\n        if (i === data.length && child) {\r\n\r\n            child = child.previousElementSibling;\r\n            while (list.node().lastElementChild !== child)\r\n                list.node().removeChild(list.node().lastElementChild);\r\n        }\r\n    }\r\n\r\n    // pridej/uprav/smaz reprezentace casovych os (erby) dle potreby\r\n    fillEmblems(list, data) {\r\n        let child = list.node() !== null ? list.node().firstElementChild : null;\r\n        let i = 0;\r\n        for (i; i < data.length; i++) {\r\n            if (child !== null) {\r\n                let tmp = d3.select(child);\r\n                tmp.attr(\"class\", data[i].clsName)\r\n                    .attr(\"transform\", `translate(0,${data[i].start})`);\r\n                tmp.select(\".item\").attr(\"href\", this.context.url + data[i].imgPath);\r\n                tmp.select(\"text\").text(data[i].name);\r\n                tmp.select(\".colorPicker\").attr(\"fill\", data[i].color);\r\n                if (i + 1 < data.length)\r\n                    child = child.nextElementSibling;\r\n            } else\r\n                this.addEmblem(data[i].name, data[i].clsName, data[i].start, data[i].imgPath, data[i].color);\r\n        }\r\n        if (i === data.length && child)\r\n            while (list.node().lastElementChild !== child)\r\n                list.node().removeChild(list.node().lastElementChild);\r\n    }\r\n\r\n    // pridej reprezentaci casove osy\r\n    addEmblem(name, clsName, y, path, color) {\r\n        const embls = d3.select(\"#emblems\");\r\n        const newGroup = embls.append(\"g\")\r\n            .attr(\"class\", `${clsName}`)\r\n            .attr(\"transform\", `translate(0,${y})`);\r\n        newGroup.append(\"rect\")\r\n            .attr(\"class\", \"background\")\r\n            .attr(\"x\", \"-90\")\r\n            .attr(\"y\", \"-15\")\r\n            .attr(\"width\", \"190\")\r\n            .attr(\"height\", \"130\");\r\n        newGroup.append(\"text\")\r\n            .attr(\"x\", \"-70\")\r\n            .attr(\"y\", \"0\")\r\n            .text(name);\r\n        // tlacitka skupiny\r\n        this.addImg(newGroup, \"item\", this.context.url + path, \"-35\", \"10\", \"100\", \"100\")\r\n        this.addImg(newGroup, \"up hideable\", require(\"/img/smallArrow.png\"), \"-75\", \"5\", \"30\", \"30\");\r\n        this.addImg(newGroup, \"down hideable\", require(\"/img/smallArrow.png\"), \"45\", \"-65\", \"30\", \"30\", \"rotate(180)\");\r\n        this.addImg(newGroup, \"remove\", require(\"/img/remove.png\"), \"-100\", \"-5\", \"20\", \"20\", \"rotate(180)\");\r\n        // dummy vyber barev\r\n        newGroup.append(\"circle\")\r\n            .attr(\"class\", \"colorPicker hideable\")\r\n            .attr(\"fill\",color)\r\n            .attr(\"cx\", \"-60\")\r\n            .attr(\"cy\", \"90\")\r\n            .attr(\"r\", \"20\")\r\n            .attr(\"stroke\", \"black\")\r\n            .attr(\"stroke-width\", \"1px\");\r\n\r\n        // element pro vlastni vyber a zmenu barev\r\n        d3.select(this.canvas)\r\n            .append(\"input\")\r\n            .attr(\"type\", \"color\")\r\n            .attr(\"class\", `inputPicker ${clsName}`);\r\n    }\r\n    //------------------------\r\n    // okenko pro napovedu u jednotlivych udalosti\r\n    makeDescr(info) {\r\n        let descr = d3.select(document.createElement(\"div\"));\r\n        descr.attr(\"id\", \"tooltip\")\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"opacity\", 0);\r\n        let tmp = descr.append(\"div\")\r\n            .attr(\"class\", \"left\");\r\n        tmp.append(\"h2\").text(info.name);\r\n        tmp.append(\"p\")\r\n            .attr(\"class\", \"desc_date\")\r\n            .text(dateUtils.getDateName(info.bck_x));\r\n        tmp.append(\"p\").text(info.desc);\r\n        if (info.filters.length > 1) {\r\n            tmp = descr.append(\"div\")\r\n                .attr(\"class\", \"right\");\r\n            tmp.append(\"h2\")\r\n                .text(\"Související časové linky\");\r\n            tmp = tmp.append(\"ul\");\r\n            for (let i = 0; i < info.filters.length; i++ )\r\n                tmp.append(\"li\").text(info.filters[i]);\r\n        }\r\n        return descr;\r\n    }\r\n\r\n    // spojeni obrazku udalosti s jeho popisem\r\n    appendInfoTo(item, event) {\r\n        event.attr(\"class\", this.getClass(item.cls))\r\n            .attr(\"href\", this.context.url + item.icon)\r\n            .attr(\"y\",item.y)\r\n            .attr(\"bckp-x\", item.bck_x)\r\n            .attr(\"x\", this.context.xt2(item.bck_x))\r\n            .attr(\"height\", this.minWidthEvent)\r\n            .attr(\"width\", this.minWidthEvent)\r\n            .attr(\"transform\", \"translate(-\" + this.minWidthEvent / 2 + \",0)\");\r\n        const desc = this.makeDescr(item);\r\n        tippy(event.node(), {\r\n            content: desc.node().innerHTML,\r\n            allowHTML: true,\r\n            theme: \"tooltip\",\r\n            placement: \"left\",\r\n            duration: [500,200],\r\n        });\r\n    }\r\n\r\n    // tecka v minimape\r\n    appendMinimapMark(item) {\r\n        // console.log(item);\r\n        d3.select(\".minimapDraw\").append(\"circle\")\r\n            .attr(\"class\", `miniEvent ${this.getClass(item.cls)}`)\r\n            .attr(\"r\", \"5\")\r\n            .attr(\"cx\", `${this.context.xt(item.bck_x) + this.minimapX}`)\r\n            .attr(\"cy\", \"17.5\")\r\n            .attr(\"fill\", d3.select(`#paths .${this.getClass(item.cls)}`).attr(\"stroke\"));\r\n    }\r\n\r\n    // umisteni udalosti\r\n    placeEvents(appendTo, events) {\r\n        for (let item of events) {\r\n            // console.log(item);\r\n            this.appendInfoTo(item, appendTo.append(\"image\"));\r\n            this.appendMinimapMark(item);\r\n        }\r\n    }\r\n\r\n    // umisteni skupiny nekolika udalosti v jednom miste\r\n    placeGroup(appendTo, x, y, l) {\r\n        let g = appendTo.append(\"g\")\r\n            .attr(\"class\", \"group\")\r\n            .on(\"mouseover\", (d) => {\r\n                const tmp = d3.select(d.target.parentNode).select(\"rect\");\r\n                const l = tmp.attr(\"length\");\r\n                tmp.attr(\"width\",l*50);\r\n                d3.select(d.target.parentNode).select(\".placeholder\").attr(\"display\", \"none\");\r\n                d3.select(d.target.parentNode).selectAll(\".hideable\").nodes().forEach(d => d3.select(d).attr(\"display\", \"inherit\"));\r\n            })\r\n            .on(\"mouseout\", (d) => {\r\n                d3.select(d.target.parentNode).select(\"rect\").attr(\"width\", this.minWidthEvent);\r\n                d3.select(d.target.parentNode).select(\".placeholder\").attr(\"display\", \"inherit\");\r\n                d3.select(d.target.parentNode).selectAll(\".hideable\").nodes().forEach(d => d3.select(d).attr(\"display\", \"none\"));\r\n            });\r\n        g.append(\"rect\")\r\n            .attr(\"x\", x)\r\n            .attr(\"bckp-x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"width\", this.minWidthEvent)\r\n            .attr(\"fill\", \"antiquewhite\")\r\n            .attr(\"length\", l)\r\n            .attr(\"transform\", \"translate(-\" + this.minWidthEvent / 2 + \",0)\");\r\n        g.append(\"image\")\r\n            .attr(\"href\", require(\"/img/group.png\"))\r\n            .attr(\"class\", \"placeholder\")\r\n            .attr(\"x\", x)\r\n            .attr(\"bckp-x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"transform\", \"translate(-\" + this.minWidthEvent / 2 + \",0)\");\r\n        return g;\r\n    }\r\n\r\n    // umisti event nebo skupinu do vizualizace\r\n    placeCommonEvents(appendTo, events) {\r\n        for (let item of events) {\r\n            if (item.eventlist.length === 1)\r\n                this.appendInfoTo(item.eventlist[0], appendTo.append(\"image\"));\r\n            else {\r\n                // console.log(item.eventlist);\r\n                // udelej skupinu\r\n                let group = this.placeGroup(appendTo, item.eventlist[0].x,item.eventlist[0].y,item.eventlist.length);\r\n                // vloz udalosti se vsemi daty\r\n                for (let [idx, event] in item.eventlist.entries()) {\r\n                    event.bck_x = event.bck_x + idx * this.minWidthEvent;\r\n                    this.appendInfoTo(event, group.append(\"image\"));\r\n                }\r\n            }\r\n            this.appendMinimapMark(item.eventlist[0]);\r\n        }\r\n    }\r\n\r\n    // vykresli vsechny vybrane casove osy\r\n    drawRes(res) {\r\n        this.fillPaths(d3.select(\"#paths\"), res.paths);\r\n        this.fillEmblems(d3.select(\"#emblems\"), res.paths);\r\n        let svgTarget = d3.select(\"#timeline_els\");\r\n        d3.selectAll(\"#timeline_els .group\").remove();\r\n        d3.selectAll(\"#timeline_els image\").remove();\r\n        d3.selectAll(\".minimapDraw .miniEvent\").remove();\r\n        this.placeEvents(svgTarget, res.events);\r\n        this.placeCommonEvents(svgTarget, res.commonEvents);\r\n    }\r\n\r\n    //--------------------------------------------------------------------------------------------\r\n    //--------------------------------------------------------------------------------------------\r\n\r\n    // odstrani specifikovanou mnozinu elementu\r\n    // potrebuje jako vstup pole prvku\r\n    removeSpecificItems(items) {\r\n        for(let item of items) {\r\n            d3.selectAll(item).remove();\r\n        }\r\n    }\r\n\r\n    // odstrani definovanou sadu prvku\r\n    removeItems() {\r\n        for(let item of [\"#timeline_els .group\", \"#timeline_els image\",\".minimapDraw .miniEvent\",\"#paths path\",\r\n            \"#emblems g\", \".inputPicker\"]) {\r\n            d3.selectAll(item).remove();\r\n        }\r\n    }\r\n\r\n    // --------------------------------------------------------------------------------------------\r\n    //--------------------------------------------------------------------------------------------\r\n\r\n    // Helper functions\r\n    // preskaluj casove osy dle aktualniho priblizeni\r\n    rescaleTimeline() {\r\n        d3.select(\"#timelines\").selectAll(\"image\").nodes().forEach((d,i) => {\r\n            const x = Number(d3.select(d).attr(\"bckp-x\"));\r\n            d3.select(d).attr(\"x\", `${this.context.xt2(x)}`);\r\n        });\r\n    }\r\n\r\n    // preskalovani skupin\r\n    rescaleGroups(ctx) {\r\n        let x = Number(d3.select(this).attr(\"bckp-x\"));\r\n        d3.select(this).attr(\"x\", `${this.context.xt2(x)}`);\r\n        x = d3.select(this).select(\".placehlder\").attr(\"bckp-x\");\r\n        d3.select(this).select(\".placehlder\").attr(\"x\", `${this.context.xt2(x)}`);\r\n    }\r\n\r\n    // uprav zadanou tridu na pouzitelnou podobu\r\n    getClass(cls) {\r\n        return cls.split(\" \").join(\"\").replaceAll(\".\", \"\");\r\n    }\r\n\r\n    //--------------------------------------------------------------------------------------------\r\n    //---------------------------------Selection utils--------------------------------------------\r\n\r\n    // nasteveni stylu zadanemu prvku\r\n    setStyle(target, style, value) {\r\n        d3.select(target).style(style, value);\r\n    }\r\n\r\n    // ziskani stylu zadaneho prvku\r\n    getStyle(target, style) {\r\n        return d3.select(target).style(style);\r\n    }\r\n\r\n    // nastaveni atributu zadanemu prvku\r\n    setAttrib(target, attrib, value) {\r\n        d3.select(target).attr(attrib, value);\r\n    }\r\n\r\n    // ziskani atributu zadaneho prvku\r\n    getAttrib(target, value) {\r\n        return d3.select(target).attr(value);\r\n    }\r\n\r\n    // nastaveni callbacku zadanemu prvku s určitou akci\r\n    setCallBack(target, action, cb) {\r\n        d3.select(target).on(action, cb);\r\n    }\r\n\r\n    // nacteni elementu z vizualizace\r\n    getElement(target) {\r\n        return d3.select(target);\r\n    }\r\n\r\n    // nacteni vsech specifikovanych elementu z vizualizace\r\n    getAllElements(target) {\r\n        return d3.selectAll(target);\r\n    }\r\n\r\n    //--------------------------------------------------------------------------------------------\r\n    //--------utils------------------------\r\n    //https://stackoverflow.com/questions/29031659/calculate-width-of-text-before-drawing-the-text\r\n    // vypocet sirky textu z velikosti fontu a typu fontu\r\n    BrowserText = (function () {\r\n        let canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d');\r\n\r\n        /**\r\n         * Measures the rendered width of arbitrary text given the font size and font face\r\n         * @param {string} text The text to measure\r\n         * @param {number} fontSize The font size in pixels\r\n         * @param {string} fontFace The font face (\"Arial\", \"Helvetica\", etc.)\r\n         * @returns {number} The width of the text\r\n         **/\r\n        function getWidth(text, fontSize, fontFace) {\r\n            ctx.font = fontSize + 'px ' + fontFace;\r\n            return ctx.measureText(text).width;\r\n        }\r\n\r\n        return {\r\n            getWidth: getWidth\r\n        };\r\n    })();\r\n\r\n}","// trida pro komunikaci se serverovou casti\r\n\r\nexport default class Communication {\r\n    constructor(context) {\r\n        this.context = context;\r\n    }\r\n\r\n    // drzi informace k vybranemu prvku v input okenku pod kategoriemi\r\n    searchItem = {name: \"\", id: -1};\r\n\r\n    // nastav searchItem na zadane hodnoty\r\n    fillSearchItem(name, id, cat){\r\n        this.searchItem.name = name;\r\n        this.searchItem.id = Number(id);\r\n        // console.log(this.searchItem);\r\n    }\r\n\r\n    // zmena v dropdown menu pro pridavani\r\n    changeSearched(e, sup) {\r\n        // console.log(e.target);\r\n        e = e.target;\r\n        d3.selectAll(\"#content .searchSel\").nodes().forEach((el) => {if (el.attributes.class.value === \"searchSel\") el.attributes.class.value = \"\";});\r\n        sup.fillSearchItem(e.textContent, e.attributes.ida.value, e.attributes.cat.value);\r\n        e.attributes[\"class\"].value = \"searchSel\";\r\n        d3.select(\".form_control\").node().value = e.textContent;\r\n        d3.select(\"#content\").style(\"visibility\", \"hidden\");\r\n    }\r\n\r\n    // vypln drop down list\r\n    fillDropDown(list, data) {\r\n        // vem prvni element\r\n        let child = list.node().firstElementChild;\r\n        let i = 0;\r\n        // projdi data\r\n        for (i; i < data.length; i++) {\r\n            // pokud je pritomny dalsi element tak ho vypln\r\n            if (child) {\r\n                d3.select(child).attr(\"ida\", data[i].id);\r\n                d3.select(child).attr(\"cat\", data[i].category.id);\r\n                d3.select(child).text(data[i].name);\r\n                if (i + 1 < data.length)\r\n                    child = child.nextElementSibling;\r\n            } else { // jinak pridej dalsi a nastav ho\r\n                list.append(\"li\")\r\n                    .attr(\"ida\", data[i].id)\r\n                    .attr(\"cat\", data[i].category.id)\r\n                    .attr(\"class\", \"\")\r\n                    .on(\"click\", (e) => {this.changeSearched(e, this)})\r\n                    .text(data[i].name);\r\n            }\r\n        }\r\n        // pokud neco prebyva tak to odstran\r\n        if (i === data.length && child)\r\n            while (list.node().lastElementChild !== child)\r\n                list.node().removeChild(list.node().lastElementChild);\r\n        // pokud se nic nevyplnuje tak to cele smaz\r\n        if (data.length === 0)\r\n            while (list.node().lastElementChild)\r\n                list.node().removeChild(list.node().lastElementChild);\r\n    }\r\n\r\n    // ziskej ze serveru vse se zadanym vyrazem searchFor\r\n    async fetchTags(searchFor, data) {\r\n        // doptej se na server\r\n        let resp = await fetch(this.context.url + `/tag/byContent?search=${searchFor}`);\r\n        // parse\r\n        data = await resp.json();\r\n        // uloz ziskana data\r\n        for (const item of data) {\r\n            if (!this.context.data.some(el => el.name === item.name))\r\n                this.context.data.push({\r\n                    name: item.name,\r\n                    clsName: item.name.split(\" \").join(\"\").replaceAll(\".\", \"\"),\r\n                    id:item.id,\r\n                    category:{id: item.category.id, icon: item.category.icon},\r\n                    icon: item.icon ? item.icon.path : undefined,\r\n                    events:undefined\r\n                });\r\n        }\r\n    }\r\n\r\n    // najdi polozky z databaze odpovidajici psanemu textu\r\n    async searchCats() {\r\n        // vyber dropdown\r\n        const list = d3.select(\"#content\");\r\n        // console.log(selected);\r\n        // ziskje hledanou frazi\r\n        const searchFor = d3.select(\".form_control\").node().value;\r\n        // pokud neni prazdna\r\n        if (searchFor !== \"\") {\r\n            // zobraz dropdown\r\n            d3.select(\"#content\").style(\"visibility\", \"inherit\");\r\n            // let data = this.context.data.filter(item => item.name.includes(searchFor) && (item.category.id === Number(selected.value) || Number(selected.value) === 0));\r\n            // nacti data z bufferu\r\n            let data = this.context.data.filter(item => item.name.includes(searchFor));\r\n            // pokud je to prvni nacitani, tak nektera data nemusi byt pritomna, nacti je ze serveru\r\n            if (!data.length) {\r\n                await this.fetchTags(searchFor, data);\r\n                // data = this.context.data.filter(item => item.name.includes(searchFor) && (item.category.id === Number(selected.value) || Number(selected.value) === 0));\r\n                data = this.context.data.filter(item => item.name.includes(searchFor));\r\n            }\r\n            // filtruj data\r\n            this.fillDropDown(list, data)\r\n        }\r\n        else {\r\n            // schovej dropdown\r\n            d3.select(\"#content\").style(\"visibility\", \"hidden\");\r\n            d3.selectAll(\"#content\").each(function (d,i) {d3.select(this).attr[\"class\"] = \"\";});\r\n            // vycisti search item\r\n            this.fillSearchItem(\"\", -1, -1);\r\n        }\r\n    }\r\n\r\n    // uklada do databufferu eventy osy vybrane z dropdown menu\r\n    async saveToBuffer() {\r\n        // najdi dany element\r\n        let el = this.context.data.findIndex(e => e.id === this.searchItem.id);\r\n        let item = this.context.data[el];\r\n        // console.log(this.searchItem);\r\n        // pokud jeste nemame jeho data\r\n        if (el !== -1) {\r\n            // pokud nemame udalsti pak je ziskej\r\n            if (item.events === undefined){\r\n                let resp = await fetch(this.context.url + `/event/byFilterId?id=${this.searchItem.id}`);\r\n                item.events = await resp.json();\r\n            }\r\n            // pokud je ma a neni v aktivnim listu\r\n            if (item.events.length !== 0 &&\r\n                this.context.active.find(e => e.id === this.searchItem.id) === undefined) {\r\n                // console.log(item);\r\n                // pridej danou osu a jeji informace k aktivnim prvkum\r\n                this.context.active.push({\r\n                    name:this.searchItem.name,\r\n                    clsName: item.clsName,\r\n                    id:this.searchItem.id,\r\n                    events:item.events,\r\n                    color: this.context.getNextFreeColor(),\r\n                    iconPath: item.icon !== undefined ? item.icon :\r\n                        (item.category.icon !== undefined ? item.category.icon.path : \"/img/tags/black-box.png\")\r\n                });\r\n            }\r\n        }\r\n        // console.log(this.context.active);\r\n    }\r\n\r\n    //-----------------------debugging part\r\n    clearElement(name) {\r\n        const events = d3.select(name);\r\n        while (events.node().firstElementChild)\r\n            events.node().removeChild(events.node().lastElementChild);\r\n    }\r\n\r\n    iterateEvents(name, data) {\r\n        const events = d3.select(\"#eventsResult\");\r\n        events.append(\"h2\").text(name + \" - počet událostí:\" + data.length);\r\n        for (const item of data) {\r\n            const list = events.append(\"ul\");\r\n            list.append(\"li\").text(\"id: \" + item[\"id\"]);\r\n            list.append(\"li\").text(\"Nazev: \" + item[\"name\"]);\r\n            list.append(\"li\").text(\"Popis: \" + item[\"description\"]);\r\n            list.append(\"li\").text(\"Zacatek: \" + item[\"begin\"]);\r\n            list.append(\"li\").text(\"IconsPath: \" + item[\"icon\"][\"path\"]);\r\n        }\r\n        events.append(\"hr\");\r\n    }\r\n\r\n    async showEventsToId() {\r\n        // console.log(`${control.value}`);\r\n        this.clearElement(\"#eventsResult\");\r\n        // console.log(text);\r\n        // doptat se na eventy\r\n        let resp = await fetch(this.context.url + `/event/byFilterId?id=${searchItem.id}`);\r\n        let data = await resp.json();\r\n        // vypsat vysledek\r\n        this.iterateEvents(this.searchItem.name, data);\r\n    }\r\n    //-----------------------\\debugging part\r\n}"],"names":["module","exports","r","e","n","t","o","i","f","u","a","Error","code","p","call","length","require","Point2D","Vector2D","Matrix2D","b","c","d","Object","defineProperties","this","value","undefined","writable","enumerable","configurable","IDENTITY","isIdentity","prototype","multiply","that","constructor","inverse","det1","idet","det2","det3","translate","tx","ty","scale","scaleAt","center","dx","x","dy","y","scaleNonUniform","scaleX","scaleY","scaleNonUniformAt","rotate","radians","Math","cos","s","sin","rotateAt","t1","t2","rotateFromVector","vector","unit","flipX","flipY","skewX","tan","skewY","isInvertible","getScale","sqrt","getDecomposition","E","F","G","H","Q","R","a1","atan2","a2","theta","phi","translation","rotation","rotation0","equals","toString","join","clone","add","subtract","scalar","divide","lerp","omt","distanceFrom","min","max","transform","matrix","fromPoints","p1","p2","magnitude","dot","cross","determinant","angleBetween","acos","perp","perpendicular","project","percent","Polynomial","SqrtPolynomial","init","arguments","TOLERANCE","ACCURACY","interpolate","xs","ys","offset","Array","isNaN","ns","diff","abs","dift","m","ho","hp","w","den","coefs","push","_variable","_s","eval","result","d1","getDegree","d2","dmax","v1","v2","j","divide_scalar","simplify","pop","bisection","minValue","maxValue","tmp1","log","tmp2","LN10","iters","ceil","LN2","signs","round","sign","trapezoid","range","it","delta","sum","simpson","st","os","ost","romberg","MAX","K","h","getDerivative","derivative","getRoots","getLinearRoot","getQuadraticRoots","getCubicRoots","getQuarticRoots","getRootsInInterval","root","roots","droots","results","c3","c2","c1","discrim","halfB","ZEROepsilon","zeroErrorEstimate","tmp","pow","distance","angle","sqrt3","NaN","poly","slice","ERRF","poly_d","derrt","sort","dery","nr","rb","bounds","maxabsX","minX","maxX","guesses","minmax","df","newton_secant_bisection","concat","an","reduce","v","nm","bounds_UpperReal_Fujiwara","map","coefSelectionFunc","find2Max","acc","bi","nearmax","max_nearmax_pos","negX","posX","bounds_LowerReal_Fujiwara","reverse","res","urb","x0","max_iterations","dfx","x_correction","x_new","y_atmin","y_atmax","prev_dfx","prev_x_ef_correction","min_correction_factor","isBounded","isEnoughCorrection","RATIO_LIMIT","AIMED_BISECT_OFFSET","VERSION","superclass","intersect","shape","newShape","Intersection","status","points","appendPoint","point","appendPoints","getArcParameters","startPoint","endPoint","rx","ry","arcFlag","sweepFlag","radian","ux","uy","vx","vy","mod","rad","PI","factor","halfDiff","x1p","y1p","x1px1p","y1py1p","lambda","rxrx","ryry","rxy1","ryx1","sq","mid","cxp","cyp","xcr1","xcr2","ycr1","ycr2","theta1","deltaTheta","PIx2","IntersectionParams","name","params","type","meta","TYPE","IPTYPE","parsePointsString","split","LINE","RECT","ROUNDRECT","CIRCLE","ELLIPSE","POLYGON","POLYLINE","PATH","ARC","BEZIER2","BEZIER3","svgElementName","props","toLowerCase","newLine","x1","y1","x2","y2","newRoundRect","width","height","newRect","newCircle","cx","cy","newEllipse","newPolygon","newPolyline","newPath","newArc","largeArcFlag","newBezier2","p3","newBezier3","p4","degreesToRadians","Token","text","x3","y0","y3","closePath","typeis","Path","tokenize","tokens","match","substr","RegExp","$1","COMMAND","NUMBER","parseFloat","EOD","AbsolutePathSegment","command","previous","AbsoluteArcPath","AbsoluteCurveto2","AbsoluteCurveto3","AbsoluteHLineto","AbsoluteVLineto","AbsoluteLineto","AbsoluteMoveto","AbsoluteSmoothCurveto2","AbsoluteSmoothCurveto3","RelativePathSegment","RelativeClosePath","RelativeCurveto2","RelativeCurveto3","RelativeLineto","RelativeMoveto","RelativeSmoothCurveto2","RelativeSmoothCurveto3","PARAMS","A","C","L","l","M","q","S","T","V","Z","z","index","token","mode","segments","param_length","number","segment","segmentParams","ip","getIntersectionParams","getLastPoint","shift","getLastControlPoint","prevPoint","getControlPoint","lastPoint","getFirstControlPoint","current","Point","constuctor","cmd","affine","removeMultipleRootsIn01","splice","intersectBezier2Bezier2","a3","b1","b2","b3","c12","c11","c10","c22","c21","c20","v0","v3","v4","v5","v6","xRoots","yRoots","checkRoots","xRoot","k","intersectBezier2Bezier3","b4","c23","c10x2","c10y2","c11x2","c11y2","c12x2","c12y2","c20x2","c20y2","c21x2","c21y2","c22x2","c22y2","c23x2","c23y2","intersectBezier2Ellipse","ec","c0","intersectBezier2Line","cl","p5","p6","intersectBezier3Bezier3","a4","c13","c10x3","c10y3","c11x3","c11y3","c12x3","c12y3","c13x2","c13x3","c13y2","c13y3","c20x3","c20y3","c21x3","c22x3","c23x3","c23y3","intersectBezier3Ellipse","intersectBezier3Line","p7","p8","p9","p10","bezierIntersectionFunctions","bezout","e1","e2","AB","AC","AD","AE","AF","BC","BE","BF","CD","DE","DF","BFpDE","BEmCD","removePointsNotInArc","intersection","th1","dth","mp","np","pi2","wasNeg","wasBig","m1","m2","m3","removeClosePoints","points1","points2","maxf","SQRT2","intersectionFunctions","intersectPathShape","path","inter0","previnter","inter","pathParams","intersectLinesShape","lines","closed","line_points","intersectLine","i1","i2","intersectArcShape","arc","rx1","ry1","phi1","dth1","intersectEllipseEllipse","rx2","ry2","yPoly","epsilon","norm0","norm1","clip","val","rootPointsN","xPoly","test","pts","indexOf","d3","ii","intersectEllipseLine","origin","dir","mDir","mDiff","t_a","t_b","intersectLineLine","ua_t","ub_t","u_b","ua","ub","intersectRayRay","composedShapeMethods","shape1","shape2","method","ip1","ip2","params1","params2","type1","type2","itm","SMF","useCTM","m1_","m2_","transParams","transParam","apply","key","hasOwnProperty","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","g","globalThis","Function","window","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","replace","DateUtils","static","months","holidaysLabel","dayInYear","holidays","has","find","month","firstDay","lastDay","daysFromZero","floor","daysInYear","getDayInYear","isHoliday","getMonthByDay","values","keys","get","day","year","entries","date","parseInt","getYear","Map","selection","ctrl","up","down","esc","context","url","data","active","activeOrder","minDate","maxDate","lowerEnd","upperEnd","colorPallete","color","users","xt","scaleLinear","xt2","area","axis","axisBottom","ticks","tickSizeInner","tickSizeOuter","brush","zoom","scaleExtent","Infinity","curve","curveMonotoneX","shuffelArray","arr","random","shuffelColors","updateScales","bound","select","dates","item","events","event","begin","flat","domain","Number","attr","node","clientWidth","move","setBrush","info","brushed","brushX","extent","on","setZoom","zoomed","trextent","clientHeight","translateExtent","updateBrushZoomAxis","getNextFreeColor","col","setColor","idx","findIndex","unsetColor","changeColor","oldColor","newColor","removeAll","forEach","el","removeSelected","clsName","order","pathShift","connShift","extend","getMinIdxFrom","common","placedCommon","prev","curr","prevI","currI","makePathItemPerson","makePathOther","makePathEvents","levels","names","start","datum","commonEvents","filters","minIdx","tmpEv","id","desc","description","icon","cls","bck_x","some","dur","end","yShift","eventlist","makeView","unshift","imgPath","iconPath","paths","randomOrder","entriesCount","idxs","drawRes","permutate","idxArray","idxCount","fill","getNumberOfIntersection","pairs","numInt","bruteForceOrder","permutations","bestPerm","perm","tmpPaths","getEdges","filtEvents","edges","source","target","getEvents","buffer","filter","self","place","makeFrequencyTable","freqData","freq","frequencyTable","getRndNumber","drawNodes","svg","node_data","edge_data","edge","selectAll","enter","append","classed","style","forceMethod","nodes","links","weight","weightScale","forceSimulation","force","forceLink","strength","forceX","forceCollide","radius","forceManyBody","build","minWidthEvent","header","createElement","minimap","canvas","modal_menu","footer","viz","addEventListener","remove","firstElementChild","buildMinimap","getMinimapInfo","moveButtons","buildViz","body","minimapX","minimapW","buildHeader","buildCnvs","buildModal","buildFooter","starttime","BrowserText","getWidth","endtime","focus_begin","innerWidth","boundWidth","dateWidth","cnvs","addButtonCnvs","to","xCoord","groupId","img","imgWidth","imgX","textA","textB","textX","button","addButtonModal","clss","content","form","Date","getFullYear","firstChild","attributes","addImg","transf","newImg","setPath","fillPaths","list","child","nextElementSibling","previousElementSibling","lastElementChild","removeChild","fillEmblems","addEmblem","newGroup","makeDescr","descr","appendInfoTo","getClass","tippy","innerHTML","allowHTML","theme","placement","duration","appendMinimapMark","placeEvents","appendTo","placeGroup","parentNode","placeCommonEvents","group","svgTarget","removeSpecificItems","items","removeItems","rescaleTimeline","rescaleGroups","ctx","replaceAll","setStyle","getStyle","setAttrib","attrib","getAttrib","setCallBack","action","cb","getElement","getAllElements","getContext","fontSize","fontFace","font","measureText","comm","searchItem","fillSearchItem","cat","changeSearched","sup","class","textContent","ida","fillDropDown","category","async","searchFor","resp","fetch","json","includes","fetchTags","each","clearElement","iterateEvents","modal","modalActive","orderCbs","calcFRQShowPaths","selectItem","moveUp","moveDown","deleteTimeLine","editColor","addPath","saveToBuffer","itemClass","parentElement","className","baseVal","unselectItem","picker","click","classList","defaultValue","activateModal","closeModal","showAdd","selIcon","nY","consolidate","swapGroups","otherIdx","clicked","other","sel","clkedAIdx","abvAIdx","moveSelectionTo","dispatch","tmpCls","clickEmblemItem","searchCats","preventDefault","scrollIntoView","ids","sourceEvent","invert","children","zoomIdentity","rescaleX","par","movementY","invertX","tickFormat"],"sourceRoot":""}